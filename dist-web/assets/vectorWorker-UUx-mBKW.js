(function(){"use strict";self.onmessage=async r=>{const{type:a,payload:s,id:o}=r.data;try{switch(a){case"search":{const{queryVector:e,vectors:c,k:t=5}=s,n=i(e,c,t);self.postMessage({type:"search_result",id:o,results:n});break}case"normalize":{const{vector:e}=s,c=u(e);self.postMessage({type:"normalize_result",id:o,vector:c});break}case"batch_search":{const{queryVectors:e,vectors:c,k:t=5}=s,n=e.map(m=>i(m,c,t));self.postMessage({type:"batch_search_result",id:o,results:n});break}case"compute_similarity":{const{vector1:e,vector2:c}=s,t=l(e,c);self.postMessage({type:"similarity_result",id:o,similarity:t});break}default:self.postMessage({type:"error",id:o,error:`Unknown operation: ${a}`})}}catch(e){self.postMessage({type:"error",id:o,error:e instanceof Error?e.message:String(e)})}};function i(r,a,s){return a.map(e=>({id:e.id,score:l(r,e.vector),metadata:e.metadata})).sort((e,c)=>c.score-e.score).slice(0,s)}function l(r,a){if(r.length!==a.length)return 0;let s=0,o=0,e=0;for(let t=0;t<r.length;t++)s+=r[t]*a[t],o+=r[t]*r[t],e+=a[t]*a[t];const c=Math.sqrt(o)*Math.sqrt(e);return c===0?0:s/c}function u(r){const a=Math.sqrt(r.reduce((s,o)=>s+o*o,0));return a===0?r:r.map(s=>s/a)}})();
//# sourceMappingURL=vectorWorker-UUx-mBKW.js.map
