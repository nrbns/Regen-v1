{"version":3,"file":"workspacesStore-BSqEl-CQ.js","sources":["../../src/state/workspacesStore.ts"],"sourcesContent":["/**\n * Workspaces Store - Tier 2\n * Manages saved workspaces (collections of tabs)\n */\n\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport type { Tab } from './tabsStore';\n\nexport type Workspace = {\n  id: string;\n  name: string;\n  createdAt: number;\n  updatedAt: number;\n  tabs: Tab[];\n  mode: 'Browse' | 'Research' | 'Trade' | 'Games' | 'Docs' | 'Images' | 'Threats' | 'GraphMind';\n  isPinned?: boolean;\n  description?: string;\n};\n\ntype WorkspacesState = {\n  workspaces: Workspace[];\n  add: (workspace: Omit<Workspace, 'id' | 'createdAt' | 'updatedAt'>) => string;\n  remove: (id: string) => void;\n  update: (id: string, updates: Partial<Workspace>) => void;\n  get: (id: string) => Workspace | undefined;\n  search: (query: string) => Workspace[];\n  togglePin: (id: string) => void;\n  clear: () => void;\n};\n\nexport const useWorkspacesStore = create<WorkspacesState>()(\n  persist(\n    (set, get) => ({\n      workspaces: [],\n      add: workspace => {\n        const now = Date.now();\n        const newWorkspace: Workspace = {\n          ...workspace,\n          id: `workspace-${now}-${Math.random().toString(36).slice(2, 9)}`,\n          createdAt: now,\n          updatedAt: now,\n        };\n        set(state => ({\n          workspaces: [...state.workspaces, newWorkspace],\n        }));\n        return newWorkspace.id;\n      },\n      remove: id =>\n        set(state => ({\n          workspaces: state.workspaces.filter(w => w.id !== id),\n        })),\n      update: (id, updates) =>\n        set(state => ({\n          workspaces: state.workspaces.map(w =>\n            w.id === id ? { ...w, ...updates, updatedAt: Date.now() } : w\n          ),\n        })),\n      get: id => {\n        return get().workspaces.find(w => w.id === id);\n      },\n      search: query => {\n        const lowerQuery = query.toLowerCase();\n        return get().workspaces.filter(\n          w =>\n            w.name.toLowerCase().includes(lowerQuery) ||\n            w.description?.toLowerCase().includes(lowerQuery)\n        );\n      },\n      togglePin: id =>\n        set(state => ({\n          workspaces: state.workspaces.map(w =>\n            w.id === id ? { ...w, isPinned: !w.isPinned } : w\n          ),\n        })),\n      clear: () => set({ workspaces: [] }),\n    }),\n    {\n      name: 'regen_workspaces_v1',\n    }\n  )\n);\n"],"names":["useWorkspacesStore","create","persist","set","get","workspace","now","newWorkspace","state","id","w","updates","query","lowerQuery"],"mappings":"qQA+BO,MAAMA,EAAqBC,EAAA,EAChCC,EACE,CAACC,EAAKC,KAAS,CACb,WAAY,CAAA,EACZ,IAAKC,GAAa,CAChB,MAAMC,EAAM,KAAK,IAAA,EACXC,EAA0B,CAC9B,GAAGF,EACH,GAAI,aAAaC,CAAG,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,EAAG,CAAC,CAAC,GAC9D,UAAWA,EACX,UAAWA,CAAA,EAEb,OAAAH,EAAIK,IAAU,CACZ,WAAY,CAAC,GAAGA,EAAM,WAAYD,CAAY,CAAA,EAC9C,EACKA,EAAa,EACtB,EACA,OAAQE,GACNN,EAAIK,IAAU,CACZ,WAAYA,EAAM,WAAW,OAAOE,GAAKA,EAAE,KAAOD,CAAE,CAAA,EACpD,EACJ,OAAQ,CAACA,EAAIE,IACXR,EAAIK,IAAU,CACZ,WAAYA,EAAM,WAAW,IAAIE,GAC/BA,EAAE,KAAOD,EAAK,CAAE,GAAGC,EAAG,GAAGC,EAAS,UAAW,KAAK,IAAA,GAAUD,CAAA,CAC9D,EACA,EACJ,IAAKD,GACIL,IAAM,WAAW,KAAKM,GAAKA,EAAE,KAAOD,CAAE,EAE/C,OAAQG,GAAS,CACf,MAAMC,EAAaD,EAAM,YAAA,EACzB,OAAOR,EAAA,EAAM,WAAW,OACtBM,GACEA,EAAE,KAAK,YAAA,EAAc,SAASG,CAAU,GACxCH,EAAE,aAAa,YAAA,EAAc,SAASG,CAAU,CAAA,CAEtD,EACA,UAAWJ,GACTN,EAAIK,IAAU,CACZ,WAAYA,EAAM,WAAW,IAAIE,GAC/BA,EAAE,KAAOD,EAAK,CAAE,GAAGC,EAAG,SAAU,CAACA,EAAE,UAAaA,CAAA,CAClD,EACA,EACJ,MAAO,IAAMP,EAAI,CAAE,WAAY,CAAA,EAAI,CAAA,GAErC,CACE,KAAM,qBAAA,CACR,CAEJ"}