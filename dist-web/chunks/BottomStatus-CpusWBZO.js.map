{"version":3,"mappings":"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","names":["tierConfig","Sparkles","Leaf","Sun","Flame","EcoBadgeCompact","score","tier","co2SavedG","config","Icon","jsxs","motion","jsx","PrivacySwitch","mode","setMode","useState","torDetected","setTorDetected","ghostModeActive","setGhostModeActive","policy","useProfileStore","state","useEffect","torDetection","detectTorBrowser","ghostMode","getGhostMode","isGhostModeEnabled","privateDisabled","ghostDisabled","modes","Lock","Eye","Network","handleModeChange","newMode","m","ipc","__vitePreload","n","activeId","useTabsStore","error","isActive","e","defaultTor","defaultVpn","usePrivacyStore","create","set","get","status","response","DAY_MS","IDLE_CARBON","SAMPLE_PERIOD_MS","useMetricsStore","sample","nextHistory","delta","nextCarbon","RELATIVE_TIME_FORMATTER","createEventId","cryptoRandom","formatRelativeTime","timestamp","now","difference","divisions","amount","unit","BottomStatus","uiLanguage","useSettingsStore","prompt","setPrompt","promptLoading","setPromptLoading","isOffline","setIsOffline","promptResponse","setPromptResponse","promptError","setPromptError","promptEcoScore","setPromptEcoScore","extraOpen","setExtraOpen","trendOpen","setTrendOpen","extraRef","useRef","trendRef","dohStatus","setDohStatus","latestSample","cpuUsage","memoryUsage","pushMetricSample","modelReady","backendOnline","setBackendOnline","isBackendAvailable","privacyMode","setPrivacyMode","efficiencyAlert","setEfficiencyAlert","efficiencyLabel","useEfficiencyStore","efficiencyBadge","efficiencySnapshot","setEfficiencyEvent","carbonIntensity","torStatus","vpnStatus","refreshTor","refreshVpn","startTor","stopTor","newTorIdentity","checkVpn","metricsHistory","dailyCarbon","highCpuRef","highRamRef","metricsAlert","setMetricsAlert","vpnProfiles","setVpnProfiles","vpnProfilesRef","vpnActiveId","setVpnActiveId","vpnBusy","setVpnBusy","vpnError","setVpnError","privacyEvents","setPrivacyEvents","privacyToast","setPrivacyToast","shieldsStats","setShieldsStats","updateShieldsStats","interval","isElectron","useMemo","isElectronRuntime","apiBaseUrl","getEnvVar","metricsSocketRef","openTrustDashboard","useTrustDashboardStore","trustRefresh","trustBadgeData","handleOnline","handleOffline","unsubscribe","onBackendStatusChange","addPrivacyEvent","useCallback","event","entry","current","prevVpnRef","prevTorRef","useIPCEvent","profiles","match","p","alert","cancelled","loadProfiles","startupTimer","samples","previous","label","pollInterval","pollMetrics","metrics","isWebMode","socket","reconnectTimeout","reconnectAttempts","maxReconnectAttempts","reconnectDelay","connectWebSocket","wsUrl","data","delay","pollShieldsStats","isMounted","initStatus","privacyModeColors","trustVariant","trustDescription","torStatusLabel","torTooltip","vpnTooltip","severityStyles","clampPercent","value","TrendChart","points","color","labels","path","index","arr","x","y","spanMs","spanMinutes","spanLabel","sparklinePoints","trendSamples","trendCpuPoints","trendRamPoints","trendLabels","StatusMeter","percent","gradient","title","onClick","Component","pct","StatusBadge","description","variant","pulse","loading","className","palette","timer","handleEfficiencyAction","action","handlePromptSubmit","activeTab","t","tabContext","redixUrl","workflowResponse","workflowData","askResponse","askData","sendPrompt","contextPrompt","listenerOptions","handleOutside","target","handleDoHToggle","handleVpnConnect","profileId","result","message","handleVpnDisconnect","efficiencyDetails","efficiencyVariant","torBadgeDescription","torBadgeVariant","vpnBadgeDescription","localeKey","localeStrings","Fragment","AnimatePresence","Shield","Wifi","X","Cpu","MemoryStick","Activity","AlertTriangle","Brain","prev","Loader2","Send","MoreHorizontal","RefreshCw","profile","dotColor"],"ignoreList":[],"sources":["../../src/components/EcoBadge.tsx","../../src/components/PrivacySwitch.tsx","../../src/state/privacyStore.ts","../../src/state/metricsStore.ts","../../src/components/layout/BottomStatus.tsx"],"sourcesContent":["/**\r\n * EcoBadge - Real-time eco feedback component\r\n * Shows green tier, score, and CO2 saved\r\n */\r\n\r\nimport { motion } from 'framer-motion';\r\nimport { Leaf, Flame, Sun, Sparkles } from 'lucide-react';\r\n\r\ntype GreenTier = 'Ultra Green' | 'Green' | 'Yellow' | 'Red';\r\n\r\ninterface EcoBadgeProps {\r\n  score: number;\r\n  tier: GreenTier;\r\n  co2SavedG?: number;\r\n  className?: string;\r\n}\r\n\r\nconst tierConfig: Record<GreenTier, { color: string; icon: typeof Leaf; message: string }> = {\r\n  'Ultra Green': {\r\n    color: '#10b981', // emerald-500\r\n    icon: Sparkles,\r\n    message: 'AI healed the planet!',\r\n  },\r\n  'Green': {\r\n    color: '#22c55e', // green-500\r\n    icon: Leaf,\r\n    message: 'Eco-friendly response',\r\n  },\r\n  'Yellow': {\r\n    color: '#f59e0b', // amber-500\r\n    icon: Sun,\r\n    message: 'Moderate energy use',\r\n  },\r\n  'Red': {\r\n    color: '#ef4444', // red-500\r\n    icon: Flame,\r\n    message: 'High energy — optimize!',\r\n  },\r\n};\r\n\r\nexport function EcoBadge({ score, tier, co2SavedG = 0, className = '' }: EcoBadgeProps) {\r\n  const config = tierConfig[tier];\r\n  const Icon = config.icon;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.9 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className={`flex items-center gap-2 px-3 py-1.5 rounded-lg border backdrop-blur-sm ${className}`}\r\n      style={{\r\n        borderColor: `${config.color}40`,\r\n        backgroundColor: `${config.color}10`,\r\n      }}\r\n    >\r\n      <Icon size={16} style={{ color: config.color }} />\r\n      <div className=\"flex items-center gap-2 text-xs\">\r\n        <span style={{ color: config.color }} className=\"font-semibold\">\r\n          {score}%\r\n        </span>\r\n        {co2SavedG > 0 && (\r\n          <span className=\"text-gray-400\">\r\n            • Saved {co2SavedG.toFixed(1)}g CO₂\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div\r\n        className=\"text-[10px] opacity-70\"\r\n        style={{ color: config.color }}\r\n        title={config.message}\r\n      >\r\n        {tier}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n// Compact version for status bar\r\nexport function EcoBadgeCompact({ score, tier, co2SavedG = 0 }: EcoBadgeProps) {\r\n  const config = tierConfig[tier];\r\n  const Icon = config.icon;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      className=\"flex items-center gap-1.5 px-2 py-1 rounded-md border backdrop-blur-sm\"\r\n      style={{\r\n        borderColor: `${config.color}40`,\r\n        backgroundColor: `${config.color}10`,\r\n      }}\r\n      title={`${tier}: ${score}% • ${config.message}${co2SavedG > 0 ? ` • Saved ${co2SavedG.toFixed(1)}g CO₂` : ''}`}\r\n    >\r\n      <Icon size={12} style={{ color: config.color }} />\r\n      <span style={{ color: config.color }} className=\"text-[10px] font-semibold\">\r\n        {score}%\r\n      </span>\r\n      {co2SavedG > 0 && (\r\n        <span className=\"text-[9px] text-gray-400\">\r\n          {co2SavedG.toFixed(1)}g\r\n        </span>\r\n      )}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n","/**\n * PrivacySwitch - Toggle between Normal/Private/Ghost modes\n */\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Lock, Eye, Network } from 'lucide-react';\nimport { useProfileStore } from '../state/profileStore';\nimport { useTabsStore } from '../state/tabsStore';\nimport { detectTorBrowser } from '../core/tor-detector';\nimport { getGhostMode, isGhostModeEnabled } from '../core/ghost-mode';\n\ntype PrivacyMode = 'Normal' | 'Private' | 'Ghost';\n\nexport function PrivacySwitch() {\n  const [mode, setMode] = useState<PrivacyMode>('Normal');\n  const [torDetected, setTorDetected] = useState(false);\n  const [ghostModeActive, setGhostModeActive] = useState(false);\n  const policy = useProfileStore(state => state.policies[state.activeProfileId]);\n\n  // Detect Tor Browser on mount\n  useEffect(() => {\n    const torDetection = detectTorBrowser();\n    setTorDetected(torDetection.isTorBrowser);\n\n    // Auto-enable Ghost Mode if Tor is detected\n    if (torDetection.isTorBrowser && torDetection.confidence !== 'low') {\n      const ghostMode = getGhostMode();\n      if (!ghostMode.isEnabled()) {\n        ghostMode.enable();\n        setMode('Ghost');\n        setGhostModeActive(true);\n      }\n    }\n\n    // Check if Ghost Mode is already enabled\n    setGhostModeActive(isGhostModeEnabled());\n  }, []);\n\n  const privateDisabled = policy ? !policy.allowPrivateWindows : false;\n  const ghostDisabled = policy ? !policy.allowGhostTabs : false;\n\n  const modes: Array<{\n    value: PrivacyMode;\n    icon: typeof Lock;\n    label: string;\n    color: string;\n    disabled?: boolean;\n    badge?: React.ReactNode;\n  }> = [\n    { value: 'Normal', icon: Lock, label: 'Normal', color: 'text-gray-400' },\n    {\n      value: 'Private',\n      icon: Eye,\n      label: 'Private',\n      color: 'text-blue-400',\n      disabled: privateDisabled,\n    },\n    {\n      value: 'Ghost',\n      icon: Network,\n      label: 'Ghost',\n      color: 'text-purple-400',\n      disabled: ghostDisabled,\n      badge: torDetected ? 'Tor' : undefined,\n    },\n  ];\n\n  const handleModeChange = async (newMode: PrivacyMode) => {\n    if (newMode === mode) return;\n\n    const target = modes.find(m => m.value === newMode);\n    if (target?.disabled) {\n      return;\n    }\n\n    const { ipc } = await import('../lib/ipc-typed');\n    const { activeId } = useTabsStore.getState();\n    const ghostMode = getGhostMode();\n\n    if (newMode === 'Ghost') {\n      // Enable Ghost Mode\n      try {\n        // Check if Tor is detected\n        const torDetection = detectTorBrowser();\n        if (!torDetection.isTorBrowser) {\n          const confirmed = confirm(\n            '⚠️ Ghost Mode is most secure when running inside Tor Browser.\\n\\n' +\n              'Without Tor Browser, some security features may be limited.\\n\\n' +\n              'Enable Ghost Mode anyway?'\n          );\n          if (!confirmed) {\n            return;\n          }\n        }\n\n        ghostMode.enable();\n        setGhostModeActive(true);\n\n        // Enable Tor proxy if available\n        if (activeId) {\n          try {\n            await ipc.proxy.set({\n              tabId: activeId,\n              type: 'socks5',\n              host: '127.0.0.1',\n              port: 9050, // Default Tor port\n            });\n          } catch (error) {\n            console.warn('Could not set Tor proxy:', error);\n            // Continue anyway - Ghost Mode can work without Tor proxy\n          }\n        }\n\n        setMode('Ghost');\n      } catch (error) {\n        console.error('Failed to enable Ghost mode:', error);\n      }\n      return;\n    }\n\n    if (newMode === 'Normal') {\n      // Disable Ghost Mode if active\n      if (ghostModeActive) {\n        ghostMode.disable();\n        setGhostModeActive(false);\n      }\n\n      // Normal mode: Clear any active proxy settings\n      try {\n        if (activeId) {\n          // Clear per-tab proxy by omitting type/host/port\n          await ipc.proxy.set({ tabId: activeId });\n        }\n        // Clear global proxy by omitting type/host/port (schema allows optional fields)\n        await ipc.proxy.set({});\n        setMode('Normal');\n      } catch (error) {\n        console.error('Failed to switch to Normal mode:', error);\n        setMode('Normal');\n      }\n    } else if (newMode === 'Private') {\n      // Private = Incognito mode (separate session, no history)\n      try {\n        await ipc.private.createWindow({ url: 'about:blank' });\n        // Reset mode after creating window (don't keep it active)\n        setMode('Normal');\n        return; // Don't set mode again at the end\n      } catch (error) {\n        console.error('Failed to create private window:', error);\n        return;\n      }\n    }\n\n    // Only set mode if we haven't already set it (Normal and Private modes set it themselves)\n    if (newMode !== 'Normal' && newMode !== 'Private') {\n      setMode(newMode);\n    }\n  };\n\n  return (\n    <div\n      className=\"flex items-center gap-1 rounded-lg border border-gray-700/50 bg-gray-800/50 p-1\"\n      role=\"group\"\n      aria-label=\"Privacy mode selector\"\n    >\n      {modes.map(m => {\n        const Icon = m.icon;\n        const isActive = mode === m.value;\n        return (\n          <motion.button\n            key={m.value}\n            type=\"button\"\n            onClick={() => handleModeChange(m.value)}\n            onKeyDown={e => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                handleModeChange(m.value);\n              }\n            }}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            className={`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium transition-all focus:outline-none focus:ring-2 focus:ring-blue-400/50 ${\n              isActive\n                ? `${m.color.replace('text-', 'bg-')} bg-opacity-20 text-white`\n                : m.disabled\n                  ? 'cursor-not-allowed text-gray-600'\n                  : 'text-gray-400 hover:text-gray-300'\n            }`}\n            disabled={m.disabled}\n            aria-label={`Switch to ${m.label} privacy mode`}\n            aria-pressed={isActive}\n            aria-disabled={m.disabled}\n            title={m.disabled ? `${m.label} disabled by profile policy` : `Switch to ${m.label}`}\n          >\n            <Icon size={14} aria-hidden=\"true\" />\n            <span>{m.label}</span>\n            {m.badge && (\n              <span className=\"text-[10px] opacity-75\" title=\"Tor Browser detected\">\n                {m.badge}\n              </span>\n            )}\n          </motion.button>\n        );\n      })}\n    </div>\n  );\n}\n","import { create } from 'zustand';\nimport { ipc } from '../lib/ipc-typed';\n\nexport type TorStatus = {\n  running: boolean;\n  bootstrapped: boolean;\n  circuitEstablished: boolean;\n  progress: number;\n  stub?: boolean;\n  error?: string | null;\n  loading: boolean;\n  lastChecked: number | null;\n};\n\nexport type VpnStatus = {\n  connected: boolean;\n  type?: string;\n  name?: string;\n  stub?: boolean;\n  loading: boolean;\n  lastChecked: number | null;\n};\n\ninterface PrivacyState {\n  tor: TorStatus;\n  vpn: VpnStatus;\n  refreshTor: () => Promise<void>;\n  refreshVpn: () => Promise<void>;\n  startTor: () => Promise<void>;\n  stopTor: () => Promise<void>;\n  newTorIdentity: () => Promise<void>;\n  checkVpn: () => Promise<void>;\n}\n\nconst defaultTor: TorStatus = {\n  running: false,\n  bootstrapped: false,\n  circuitEstablished: false,\n  progress: 0,\n  stub: false,\n  error: null,\n  loading: false,\n  lastChecked: null,\n};\n\nconst defaultVpn: VpnStatus = {\n  connected: false,\n  type: undefined,\n  name: undefined,\n  stub: false,\n  loading: false,\n  lastChecked: null,\n};\n\nexport const usePrivacyStore = create<PrivacyState>((set, get) => ({\n  tor: defaultTor,\n  vpn: defaultVpn,\n  async refreshTor() {\n    set((state) => ({ tor: { ...state.tor, loading: true } }));\n    try {\n      const status = await ipc.tor.status() as any;\n      set({\n        tor: {\n          running: Boolean(status?.running),\n          bootstrapped: Boolean(status?.bootstrapped),\n          circuitEstablished: Boolean(status?.circuitEstablished),\n          progress: typeof status?.progress === 'number' ? status.progress : 0,\n          stub: Boolean(status?.stub),\n          error: typeof status?.error === 'string' ? status.error : null,\n          loading: false,\n          lastChecked: Date.now(),\n        },\n      });\n    } catch (error) {\n      set({\n        tor: {\n          ...get().tor,\n          loading: false,\n          error: error instanceof Error ? error.message : String(error),\n          lastChecked: Date.now(),\n        },\n      });\n    }\n  },\n  async refreshVpn() {\n    set((state) => ({ vpn: { ...state.vpn, loading: true } }));\n    try {\n      const status = await ipc.vpn.status() as any;\n      set({\n        vpn: {\n          connected: Boolean(status?.connected),\n          type: status?.type ?? undefined,\n          name: status?.name ?? undefined,\n          stub: Boolean((status as any)?.stub),\n          loading: false,\n          lastChecked: Date.now(),\n        },\n      });\n    } catch {\n      set({\n        vpn: {\n          ...get().vpn,\n          loading: false,\n          lastChecked: Date.now(),\n        },\n      });\n    }\n  },\n  async startTor() {\n    set((state) => ({ tor: { ...state.tor, loading: true, error: null } }));\n    try {\n      const response = await ipc.tor.start();\n      await get().refreshTor();\n      if ((response as any)?.stub) {\n        set((state) => ({\n          tor: {\n            ...state.tor,\n            stub: true,\n            error: (response as any)?.warning ?? 'Tor binary not found; running in stub mode.',\n          },\n        }));\n      }\n    } catch (error) {\n      set({\n        tor: {\n          ...defaultTor,\n          error: error instanceof Error ? error.message : String(error),\n          loading: false,\n          lastChecked: Date.now(),\n        },\n      });\n    }\n  },\n  async stopTor() {\n    set((state) => ({ tor: { ...state.tor, loading: true } }));\n    try {\n      await ipc.tor.stop();\n    } catch (error) {\n      set({\n        tor: {\n          ...get().tor,\n          error: error instanceof Error ? error.message : String(error),\n        },\n      });\n    } finally {\n      set({\n        tor: {\n          ...defaultTor,\n          lastChecked: Date.now(),\n        },\n      });\n    }\n  },\n  async newTorIdentity() {\n    try {\n      await ipc.tor.newIdentity();\n      await get().refreshTor();\n    } catch (error) {\n      set({\n        tor: {\n          ...get().tor,\n          error: error instanceof Error ? error.message : String(error),\n        },\n      });\n    }\n  },\n  async checkVpn() {\n    set((state) => ({ vpn: { ...state.vpn, loading: true } }));\n    try {\n      const status = await ipc.vpn.check() as any;\n      set({\n        vpn: {\n          connected: Boolean(status?.connected),\n          type: status?.type ?? undefined,\n          name: status?.name ?? undefined,\n          stub: Boolean((status as any)?.stub),\n          loading: false,\n          lastChecked: Date.now(),\n        },\n      });\n    } catch {\n      set({\n        vpn: {\n          ...get().vpn,\n          loading: false,\n          lastChecked: Date.now(),\n        },\n      });\n    }\n  },\n}));\n","import { create } from 'zustand';\r\n\r\nexport type MetricSample = {\r\n  timestamp: number;\r\n  cpu: number;\r\n  memory: number;\r\n  carbonIntensity?: number;\r\n};\r\n\r\nexport type MetricsState = {\r\n  latest: MetricSample | null;\r\n  history: MetricSample[];\r\n  dailyTotalCarbon: number;\r\n  pushSample: (sample: MetricSample) => void;\r\n  clear: () => void;\r\n};\r\n\r\nconst MAX_HISTORY = 300;\r\nconst DAY_MS = 24 * 60 * 60 * 1000;\r\nconst IDLE_CARBON = 200;\r\nconst SAMPLE_PERIOD_MS = Number(import.meta.env.VITE_METRICS_INTERVAL_MS || 2000);\r\n\r\nexport const useMetricsStore = create<MetricsState>((set) => ({\r\n  latest: null,\r\n  history: [],\r\n  dailyTotalCarbon: 0,\r\n  pushSample: (sample) =>\r\n    set((state) => {\r\n      const nextHistory = [...state.history, sample].slice(-MAX_HISTORY);\r\n      const baseline = Math.max(sample.carbonIntensity ?? IDLE_CARBON, 0);\r\n      const delta = baseline * (SAMPLE_PERIOD_MS / DAY_MS);\r\n      const nextCarbon = state.dailyTotalCarbon + delta;\r\n      return {\r\n        latest: sample,\r\n        history: nextHistory,\r\n        dailyTotalCarbon: nextCarbon,\r\n      };\r\n    }),\r\n  clear: () => set({ latest: null, history: [], dailyTotalCarbon: 0 }),\r\n}));\r\n","/**\n * BottomStatus - Status bar with live indicators and AI prompt\n */\n\nimport { useState, useEffect, useRef, useMemo, useCallback } from 'react';\nimport type { LucideIcon } from 'lucide-react';\nimport {\n  Send,\n  Cpu,\n  MemoryStick,\n  Network,\n  Brain,\n  Shield,\n  Activity,\n  AlertTriangle,\n  X,\n  RefreshCw,\n  Wifi,\n  Loader2,\n  MoreHorizontal,\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { EcoBadgeCompact } from '../EcoBadge';\nimport { ipc } from '../../lib/ipc-typed';\nimport { useTabsStore } from '../../state/tabsStore';\nimport {\n  EfficiencyModeEvent,\n  NetworkStatus,\n  EfficiencyAlert,\n  EfficiencyAlertAction,\n} from '../../lib/ipc-events';\nimport { useIPCEvent } from '../../lib/use-ipc-event';\nimport { PrivacySwitch } from '../PrivacySwitch';\nimport { useEfficiencyStore } from '../../state/efficiencyStore';\nimport { usePrivacyStore } from '../../state/privacyStore';\n// Voice components disabled by user request\n// Voice components removed by user request\nimport { useMetricsStore, type MetricSample } from '../../state/metricsStore';\nimport { getEnvVar, isElectronRuntime, isWebMode } from '../../lib/env';\nimport { isBackendAvailable, onBackendStatusChange } from '../../lib/backend-status';\nimport { useTrustDashboardStore } from '../../state/trustDashboardStore';\nimport { useSettingsStore } from '../../state/settingsStore';\n\ntype PrivacyEventEntry = {\n  id: string;\n  timestamp: number;\n  kind: 'tor' | 'vpn';\n  status: 'info' | 'success' | 'warning';\n  message: string;\n};\n\nconst RELATIVE_TIME_FORMATTER = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\n\nfunction createEventId(): string {\n  const cryptoRandom = (globalThis.crypto as Crypto | undefined)?.randomUUID?.();\n  if (cryptoRandom) {\n    return cryptoRandom;\n  }\n  return `privacy-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;\n}\n\nfunction formatRelativeTime(timestamp: number): string {\n  const now = Date.now();\n  let difference = timestamp - now;\n  const divisions: Array<[number, Intl.RelativeTimeFormatUnit]> = [\n    [1000, 'second'],\n    [60, 'minute'],\n    [60, 'hour'],\n    [24, 'day'],\n    [7, 'week'],\n    [4.34524, 'month'],\n    [12, 'year'],\n  ];\n\n  for (const [amount, unit] of divisions) {\n    if (Math.abs(difference) < amount) {\n      return RELATIVE_TIME_FORMATTER.format(Math.round(difference), unit);\n    }\n    difference /= amount;\n  }\n\n  return RELATIVE_TIME_FORMATTER.format(Math.round(difference), 'year');\n}\n\nexport function BottomStatus() {\n  const { activeId } = useTabsStore();\n  const uiLanguage = useSettingsStore(state => state.language || 'en');\n  const [prompt, setPrompt] = useState('');\n  const [promptLoading, setPromptLoading] = useState(false);\n  const [isOffline, setIsOffline] = useState(() =>\n    typeof navigator !== 'undefined' ? !navigator.onLine : false\n  );\n  const [promptResponse, setPromptResponse] = useState('');\n  const [promptError, setPromptError] = useState<string | null>(null);\n  const [promptEcoScore, setPromptEcoScore] = useState<{\n    score: number;\n    tier: string;\n    co2Saved: number;\n  } | null>(null);\n  // const promptSessionRef = useRef<string | null>(null); // Unused for now\n  const [extraOpen, setExtraOpen] = useState(false);\n  const [trendOpen, setTrendOpen] = useState(false);\n  const extraRef = useRef<HTMLDivElement | null>(null);\n  const trendRef = useRef<HTMLDivElement | null>(null);\n  const [dohStatus, setDohStatus] = useState({ enabled: false, provider: 'cloudflare' });\n  const latestSample = useMetricsStore(state => state.latest);\n  // Use metrics store for real-time CPU/memory updates\n  const cpuUsage = latestSample?.cpu ?? 0;\n  const memoryUsage = latestSample?.memory ?? 0;\n  const pushMetricSample = useMetricsStore(state => state.pushSample);\n  const [modelReady] = useState(true);\n  const [backendOnline, setBackendOnline] = useState(() => isBackendAvailable());\n  const [privacyMode, setPrivacyMode] = useState<'Normal' | 'Ghost' | 'Tor'>('Normal');\n  const [efficiencyAlert, setEfficiencyAlert] = useState<EfficiencyAlert | null>(null);\n  const efficiencyLabel = useEfficiencyStore(state => state.label);\n  const efficiencyBadge = useEfficiencyStore(state => state.badge);\n  const efficiencySnapshot = useEfficiencyStore(state => state.snapshot);\n  const setEfficiencyEvent = useEfficiencyStore(state => state.setEvent);\n  const carbonIntensity = efficiencySnapshot.carbonIntensity ?? null;\n  const torStatus = usePrivacyStore(state => state.tor);\n  const vpnStatus = usePrivacyStore(state => state.vpn);\n  const refreshTor = usePrivacyStore(state => state.refreshTor);\n  const refreshVpn = usePrivacyStore(state => state.refreshVpn);\n  const startTor = usePrivacyStore(state => state.startTor);\n  const stopTor = usePrivacyStore(state => state.stopTor);\n  const newTorIdentity = usePrivacyStore(state => state.newTorIdentity);\n  const checkVpn = usePrivacyStore(state => state.checkVpn);\n  const metricsHistory = useMetricsStore(state => state.history);\n  const dailyCarbon = useMetricsStore(state => state.dailyTotalCarbon);\n  const highCpuRef = useRef<MetricSample[]>([]);\n  const highRamRef = useRef<MetricSample[]>([]);\n  const [metricsAlert, setMetricsAlert] = useState<{\n    title: string;\n    message: string;\n    severity: 'info' | 'warning' | 'critical';\n  } | null>(null);\n  const [vpnProfiles, setVpnProfiles] = useState<\n    Array<{ id: string; name: string; type: string; server?: string }>\n  >([]);\n  const vpnProfilesRef = useRef<Array<{ id: string; name: string; type: string; server?: string }>>(\n    []\n  );\n  const [vpnActiveId, setVpnActiveId] = useState<string | null>(null);\n  const [vpnBusy, setVpnBusy] = useState(false);\n  const [vpnError, setVpnError] = useState<string | null>(null);\n  const [privacyEvents, setPrivacyEvents] = useState<PrivacyEventEntry[]>([]);\n  const [privacyToast, setPrivacyToast] = useState<PrivacyEventEntry | null>(null);\n  const [shieldsStats, setShieldsStats] = useState<{ trackersBlocked: number; adsBlocked: number }>(\n    { trackersBlocked: 0, adsBlocked: 0 }\n  );\n\n  // Privacy scorecard: Track blocked trackers and ads\n  useEffect(() => {\n    const updateShieldsStats = async () => {\n      try {\n        const status = await ipc.shields.getStatus();\n        if (status) {\n          setShieldsStats({\n            trackersBlocked: status.trackersBlocked || 0,\n            adsBlocked: status.adsBlocked || 0,\n          });\n        }\n      } catch (error) {\n        console.debug('[BottomStatus] Failed to get shields stats:', error);\n      }\n    };\n\n    updateShieldsStats();\n    const interval = setInterval(updateShieldsStats, 5000); // Update every 5 seconds\n    return () => clearInterval(interval);\n  }, []);\n  const isElectron = useMemo(() => isElectronRuntime(), []);\n  const apiBaseUrl = useMemo(() => {\n    return (\n      getEnvVar('API_BASE_URL') ??\n      getEnvVar('OMNIBROWSER_API_URL') ??\n      getEnvVar('OB_API_BASE_URL') ??\n      getEnvVar('VITE_REDIX_HTTP_URL') ??\n      'http://localhost:4000'\n    );\n  }, []);\n  const metricsSocketRef = useRef<WebSocket | EventSource | null>(null);\n  const openTrustDashboard = useTrustDashboardStore(state => state.open);\n  const trustRefresh = useTrustDashboardStore(state => state.refresh);\n  const trustBadgeData = useTrustDashboardStore(state => ({\n    pending: state.consentStats.pending,\n    blocked: state.blockedSummary.trackers,\n    loading: state.loading,\n  }));\n\n  useEffect(() => {\n    const handleOnline = () => setIsOffline(false);\n    const handleOffline = () => setIsOffline(true);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    const unsubscribe = onBackendStatusChange(status => {\n      setBackendOnline(status);\n    });\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      unsubscribe();\n    };\n  }, []);\n\n  // Real-time metrics: Electron uses IPC, non-Electron uses WebSocket/SSE\n  // This effect is removed - metrics are handled in the unified effect below\n\n  const pushPrivacyEvent = useCallback(\n    (event: Omit<PrivacyEventEntry, 'id' | 'timestamp'> & { timestamp?: number }) => {\n      const entry: PrivacyEventEntry = {\n        id: createEventId(),\n        timestamp: event.timestamp ?? Date.now(),\n        kind: event.kind,\n        status: event.status,\n        message: event.message,\n      };\n      setPrivacyEvents(current => [...current.slice(-29), entry]);\n      setPrivacyToast(entry);\n    },\n    []\n  );\n\n  // Temporary alias for compatibility with new naming while keeping existing references working.\n  const addPrivacyEvent = pushPrivacyEvent;\n\n  const prevVpnRef = useRef(vpnStatus);\n  const prevTorRef = useRef(torStatus);\n\n  // Listen for network status\n  useIPCEvent<NetworkStatus>(\n    'net:status',\n    status => {\n      if (status.doh) {\n        setDohStatus(status.doh);\n      }\n      if (status.tor?.enabled && status.tor.circuitEstablished) {\n        setPrivacyMode('Tor');\n      } else if (status.proxy?.enabled) {\n        setPrivacyMode('Ghost');\n      } else {\n        setPrivacyMode('Normal');\n      }\n      if (status.vpn) {\n        if (!status.vpn.connected) {\n          setVpnActiveId(null);\n        } else {\n          const profiles = vpnProfilesRef.current;\n          const match =\n            profiles.find(p => p.name === status.vpn?.provider) ||\n            profiles.find(p => p.server && p.server === status.vpn?.server);\n          if (match) {\n            setVpnActiveId(match.id);\n          } else if (status.vpn.provider) {\n            setVpnActiveId(status.vpn.provider);\n          }\n        }\n      }\n    },\n    []\n  );\n\n  useIPCEvent<EfficiencyModeEvent>(\n    'efficiency:mode',\n    event => {\n      setEfficiencyEvent(event);\n    },\n    [setEfficiencyEvent]\n  );\n\n  useIPCEvent<EfficiencyAlert>(\n    'efficiency:alert',\n    alert => {\n      setEfficiencyAlert(alert);\n    },\n    []\n  );\n\n  useEffect(() => {\n    void refreshTor();\n    void refreshVpn();\n    const interval = window.setInterval(() => {\n      void refreshTor();\n      void refreshVpn();\n    }, 20000);\n    return () => window.clearInterval(interval);\n  }, [refreshTor, refreshVpn]);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    const loadProfiles = async () => {\n      try {\n        const profiles = await ipc.vpn.listProfiles();\n        if (!cancelled && Array.isArray(profiles)) {\n          setVpnProfiles(profiles);\n          vpnProfilesRef.current = profiles;\n        }\n      } catch (error) {\n        console.warn('[vpn] Failed to load profiles', error);\n      }\n    };\n\n    loadProfiles();\n    const interval = window.setInterval(loadProfiles, 60000);\n    return () => {\n      cancelled = true;\n      window.clearInterval(interval);\n    };\n  }, []);\n\n  useEffect(() => {\n    const startupTimer = window.setTimeout(() => {\n      void trustRefresh();\n    }, 450);\n    const interval = window.setInterval(() => {\n      void trustRefresh();\n    }, 60000);\n    return () => {\n      window.clearTimeout(startupTimer);\n      window.clearInterval(interval);\n    };\n  }, [trustRefresh]);\n\n  useEffect(() => {\n    if (latestSample) {\n      // CPU and memory now come directly from latestSample (real-time updates)\n      const samples = metricsHistory.slice(-5);\n      highCpuRef.current = samples.filter(sample => sample.cpu >= 85);\n      highRamRef.current = samples.filter(sample => sample.memory >= 85);\n\n      if (highCpuRef.current.length >= 3) {\n        setMetricsAlert({\n          title: 'CPU running hot',\n          message: 'Consider enabling Performance Mode or closing heavy tabs.',\n          severity: 'warning',\n        });\n      } else if (highRamRef.current.length >= 3) {\n        setMetricsAlert({\n          title: 'Memory pressure detected',\n          message: 'Try hibernating inactive tabs to free RAM.',\n          severity: 'warning',\n        });\n      }\n    }\n  }, [latestSample, metricsHistory]);\n\n  useEffect(() => {\n    const previous = prevTorRef.current;\n    if (!previous.running && torStatus.running) {\n      addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Tor daemon starting…' });\n    }\n    if (!previous.bootstrapped && torStatus.bootstrapped) {\n      addPrivacyEvent({ kind: 'tor', status: 'success', message: 'Tor circuit established' });\n    }\n    if (previous.running && !torStatus.running) {\n      addPrivacyEvent({ kind: 'tor', status: 'info', message: 'Tor stopped' });\n    }\n    if (!previous.stub && torStatus.stub) {\n      addPrivacyEvent({\n        kind: 'tor',\n        status: 'warning',\n        message: 'Tor binary not found – running in stub mode',\n      });\n    }\n    if (torStatus.error && torStatus.error !== previous.error) {\n      addPrivacyEvent({\n        kind: 'tor',\n        status: 'warning',\n        message: `Tor warning: ${torStatus.error}`,\n      });\n    }\n    prevTorRef.current = torStatus;\n  }, [torStatus, addPrivacyEvent]);\n\n  useEffect(() => {\n    const previous = prevVpnRef.current;\n    if (!previous.connected && vpnStatus.connected) {\n      const label = vpnStatus.name || vpnStatus.type || 'VPN';\n      addPrivacyEvent({\n        kind: 'vpn',\n        status: 'success',\n        message: `VPN connected${label ? `: ${label}` : ''}`,\n      });\n    }\n    if (previous.connected && !vpnStatus.connected) {\n      addPrivacyEvent({ kind: 'vpn', status: 'info', message: 'VPN disconnected' });\n    }\n    prevVpnRef.current = vpnStatus;\n  }, [vpnStatus, addPrivacyEvent]);\n\n  // Real-time metrics: Electron uses IPC, non-Electron uses WebSocket with auto-reconnect\n  useEffect(() => {\n    if (isElectron) {\n      let cancelled = false;\n      let pollInterval: NodeJS.Timeout | null = null;\n\n      const pollMetrics = async () => {\n        if (cancelled) return;\n\n        try {\n          const metrics = await ipc.performance.getMetrics();\n          if (cancelled || !metrics) return;\n\n          const sample = {\n            timestamp: metrics.timestamp || Date.now(),\n            cpu: metrics.cpu || 0,\n            memory: metrics.memory || 0,\n            carbonIntensity: undefined, // Can be added later if available\n          };\n\n          pushMetricSample(sample);\n        } catch (error) {\n          if (!cancelled) {\n            console.warn('[metrics] Failed to poll metrics:', error);\n          }\n        }\n      };\n\n      // Start polling immediately, then every 1 second for real-time feel\n      pollMetrics();\n      pollInterval = setInterval(pollMetrics, 1000);\n\n      return () => {\n        cancelled = true;\n        if (pollInterval) {\n          clearInterval(pollInterval);\n        }\n      };\n    } else {\n      // Skip WebSocket connections in web mode - no backend available\n      if (isWebMode()) {\n        // In web mode, use dummy metrics (no backend)\n        pushMetricSample({\n          timestamp: Date.now(),\n          cpu: 0,\n          memory: 0,\n        });\n        return;\n      }\n\n      if (!backendOnline) {\n        if (metricsSocketRef.current) {\n          try {\n            metricsSocketRef.current.close();\n          } catch {\n            // ignore\n          }\n          metricsSocketRef.current = null;\n        }\n        pushMetricSample({\n          timestamp: Date.now(),\n          cpu: 0,\n          memory: 0,\n        });\n        return;\n      }\n      // Non-Electron: Use WebSocket with auto-reconnect\n      let socket: WebSocket | null = null;\n      let reconnectTimeout: NodeJS.Timeout | null = null;\n      let reconnectAttempts = 0;\n      const maxReconnectAttempts = 10;\n      const reconnectDelay = 3000; // Start with 3 seconds\n\n      const connectWebSocket = () => {\n        // Skip WebSocket connections in web mode - no backend available\n        if (isWebMode()) {\n          // In web mode, never attempt WebSocket connection\n          return;\n        }\n\n        if (socket?.readyState === WebSocket.OPEN) return;\n\n        try {\n          const wsUrl = `${apiBaseUrl.replace(/^http/, 'ws')}/ws/metrics`;\n          socket = new WebSocket(wsUrl);\n          metricsSocketRef.current = socket;\n\n          socket.onmessage = event => {\n            try {\n              const data = JSON.parse(event.data);\n              if (data.type !== 'metrics') return;\n              const sample = {\n                timestamp: typeof data.timestamp === 'number' ? data.timestamp : Date.now(),\n                cpu: typeof data.cpu === 'number' ? data.cpu : 0,\n                memory: typeof data.memory === 'number' ? data.memory : 0,\n                carbonIntensity:\n                  typeof data.carbon_intensity === 'number' ? data.carbon_intensity : undefined,\n              };\n              pushMetricSample(sample);\n              reconnectAttempts = 0; // Reset on successful message\n            } catch (error) {\n              console.warn('[metrics] Failed to parse message', error);\n            }\n          };\n\n          socket.onopen = () => {\n            reconnectAttempts = 0;\n            // Don't log - WebSocket connection is expected in Electron/Tauri\n          };\n\n          socket.onerror = event => {\n            // Suppress error logging completely - metrics WebSocket is optional\n            event.stopPropagation();\n            event.preventDefault();\n            // Don't log - backend is optional in web mode\n          };\n\n          socket.onclose = () => {\n            socket = null;\n            metricsSocketRef.current = null;\n\n            // Auto-reconnect with exponential backoff (skip in web mode)\n            if (!isWebMode() && reconnectAttempts < maxReconnectAttempts) {\n              reconnectAttempts++;\n              const delay = reconnectDelay * Math.min(reconnectAttempts, 5); // Cap at 5x delay\n              reconnectTimeout = setTimeout(() => {\n                connectWebSocket();\n              }, delay);\n            }\n            // Don't log warnings or attempt fallback polling in web mode\n          };\n        } catch (error) {\n          // Suppress all WebSocket creation errors - backend is optional\n          // Only log if we're in Electron/Tauri (backend expected)\n          if (!isWebMode()) {\n            console.error('[metrics] Failed to create websocket:', error);\n          }\n        }\n      };\n\n      connectWebSocket();\n\n      return () => {\n        if (reconnectTimeout) {\n          clearTimeout(reconnectTimeout);\n        }\n        if (socket) {\n          try {\n            // Only close if WebSocket is in a valid state to prevent browser errors\n            if (\n              socket.readyState === WebSocket.OPEN ||\n              socket.readyState === WebSocket.CONNECTING\n            ) {\n              socket.close();\n            }\n          } catch {\n            // ignore - WebSocket errors are expected if server isn't running\n          }\n          socket = null;\n        }\n        metricsSocketRef.current = null;\n      };\n    }\n  }, [isElectron, apiBaseUrl, pushMetricSample, backendOnline]);\n\n  // Poll shields stats for privacy scorecard\n  useEffect(() => {\n    if (!isElectron) return;\n\n    let cancelled = false;\n    let pollInterval: NodeJS.Timeout | null = null;\n\n    const pollShieldsStats = async () => {\n      if (cancelled) return;\n\n      try {\n        const status = await ipc.shields.getStatus();\n        if (cancelled || !status) return;\n\n        setShieldsStats({\n          trackersBlocked: status.trackersBlocked || 0,\n          adsBlocked: status.adsBlocked || 0,\n        });\n      } catch (error) {\n        if (!cancelled) {\n          console.warn('[BottomStatus] Failed to poll shields stats:', error);\n        }\n      }\n    };\n\n    // Start polling immediately, then every 2 seconds\n    pollShieldsStats();\n    pollInterval = setInterval(pollShieldsStats, 2000);\n\n    return () => {\n      cancelled = true;\n      if (pollInterval) {\n        clearInterval(pollInterval);\n      }\n    };\n  }, [isElectron]);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    // Wait a bit for IPC to be ready before making calls\n    const initStatus = async () => {\n      if (!isMounted) return;\n\n      // Wait for IPC to be ready\n      if (!window.ipc || typeof window.ipc.invoke !== 'function') {\n        // Retry after a delay\n        setTimeout(initStatus, 500);\n        return;\n      }\n\n      // Load DoH status\n      try {\n        const status = await ipc.dns.status();\n        if (isMounted && status && typeof status === 'object') {\n          setDohStatus(status as any);\n        }\n      } catch {\n        // Silently handle - set default state on error\n        if (isMounted) {\n          setDohStatus({ enabled: false, provider: 'cloudflare' });\n        }\n      }\n\n      // Check model status (would check Ollama heartbeat)\n      // ipc.agent.getModelStatus().then(status => {\n      //   setModelReady(status.ready);\n      // }).catch(() => {});\n    };\n\n    // Delay initial load to allow IPC to initialize\n    setTimeout(initStatus, 400);\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const privacyModeColors = {\n    Normal: 'text-gray-400',\n    Ghost: 'text-blue-400',\n    Tor: 'text-purple-400',\n  };\n\n  const trustVariant =\n    trustBadgeData.pending > 0 ? 'warning' : trustBadgeData.blocked > 0 ? 'info' : 'default';\n  const trustDescription =\n    trustBadgeData.pending > 0\n      ? `${trustBadgeData.pending} pending`\n      : trustBadgeData.blocked > 0\n        ? `${trustBadgeData.blocked} trackers blocked`\n        : 'Ledger clean';\n\n  const torStatusLabel = torStatus.stub\n    ? 'Tor: Stub'\n    : torStatus.running\n      ? torStatus.circuitEstablished\n        ? 'Tor: On'\n        : `Tor: ${Math.round(torStatus.progress)}%`\n      : 'Tor: Off';\n  const torTooltip = torStatus.error\n    ? `Tor warning: ${torStatus.error}`\n    : torStatus.stub\n      ? 'Tor binary not found; using stub mode for UI only.'\n      : torStatus.running\n        ? torStatus.circuitEstablished\n          ? 'Tor circuit established. Click to stop.'\n          : 'Tor starting up. Click to stop.'\n        : 'Route traffic through Tor. Click to enable.';\n\n  const vpnTooltip = vpnStatus.connected\n    ? `VPN connected${vpnStatus.name ? ` (${vpnStatus.name})` : ''}. Click to re-check.`\n    : 'Check whether a system VPN is active.';\n\n  const severityStyles: Record<'info' | 'warning' | 'critical', string> = {\n    info: 'bg-blue-500/10 border-blue-400/40 text-blue-100',\n    warning: 'bg-amber-500/10 border-amber-400/40 text-amber-100',\n    critical: 'bg-red-500/10 border-red-400/40 text-red-100',\n  };\n\n  const clampPercent = (value?: number | null) => {\n    if (typeof value !== 'number' || !Number.isFinite(value)) {\n      return 0;\n    }\n    return Math.max(0, Math.min(100, Math.round(value)));\n  };\n\n  // const smoothValue = (previous: number, next: number, factor = 0.35) => {\n  //   if (!Number.isFinite(previous)) return next;\n  //   return previous + (next - previous) * factor;\n  // }; // Unused for now\n\n  const TrendChart = ({\n    label,\n    points,\n    color,\n    labels,\n  }: {\n    label: string;\n    points: number[];\n    color: string;\n    labels: number[];\n  }) => {\n    const recent = points.length > 0 ? points : [0];\n    const path = recent\n      .map((value, index, arr) => {\n        const x = (index / Math.max(arr.length - 1, 1)) * 200;\n        const y = 80 - (value / 100) * 80;\n        return `${index === 0 ? 'M' : 'L'}${x},${y}`;\n      })\n      .join(' ');\n    const spanMs = labels.length >= 2 ? labels[labels.length - 1] - labels[0] : 0;\n    const spanMinutes = Math.max(Math.round(spanMs / 60000), 0);\n    const spanLabel = spanMinutes > 0 ? `${spanMinutes}m window` : 'Live';\n\n    return (\n      <div className=\"space-y-1\">\n        <div className=\"flex items-center justify-between text-[11px] text-gray-300\">\n          <span>{label}</span>\n          <span className=\"opacity-70\">{spanLabel}</span>\n        </div>\n        <svg viewBox=\"0 0 200 80\" className=\"h-20 w-full rounded-md bg-gray-900/70 p-1\">\n          <path d={path} fill=\"none\" stroke={color} strokeWidth=\"2\" strokeLinecap=\"round\" />\n        </svg>\n      </div>\n    );\n  };\n\n  const sparklinePoints = useMemo(\n    () => metricsHistory.map(sample => clampPercent(sample.cpu)),\n    [metricsHistory]\n  );\n  const trendSamples = useMemo(() => metricsHistory.slice(-180), [metricsHistory]);\n  const trendCpuPoints = useMemo(\n    () => trendSamples.map(sample => clampPercent(sample.cpu)),\n    [trendSamples]\n  );\n  const trendRamPoints = useMemo(\n    () => trendSamples.map(sample => clampPercent(sample.memory)),\n    [trendSamples]\n  );\n  const trendLabels = useMemo(() => trendSamples.map(sample => sample.timestamp), [trendSamples]);\n\n  const StatusMeter = ({\n    icon: Icon,\n    label,\n    value,\n    percent,\n    gradient = 'from-blue-500 via-cyan-500 to-blue-500',\n    title,\n    onClick,\n    sparklinePoints,\n  }: {\n    icon: LucideIcon;\n    label: string;\n    value: string;\n    percent?: number;\n    gradient?: string;\n    title?: string;\n    onClick?: () => void;\n    sparklinePoints?: number[];\n  }) => {\n    const Component = onClick ? 'button' : 'div';\n    const pct = clampPercent(percent);\n\n    return (\n      <Component\n        type={onClick ? 'button' : undefined}\n        onClick={onClick}\n        title={title}\n        className={`flex items-center gap-1.5 rounded-full border border-gray-700/60 bg-gray-800/60 px-2 py-1 text-xs text-gray-200 ${\n          onClick\n            ? 'cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/40'\n            : ''\n        }`}\n      >\n        <Icon size={12} className=\"text-gray-400\" />\n        <span className=\"font-semibold text-gray-100\">{label}</span>\n        <span className=\"text-[11px] opacity-75\">{value}</span>\n        <div className=\"h-1.5 w-14 overflow-hidden rounded-full bg-gray-700\">\n          <motion.div\n            className={`h-full bg-gradient-to-r ${gradient}`}\n            initial={{ width: 0 }}\n            animate={{ width: `${pct}%` }}\n            transition={{ duration: 0.5, ease: 'easeOut' }}\n          />\n        </div>\n        {sparklinePoints && sparklinePoints.length > 4 && (\n          <svg viewBox=\"0 0 40 12\" className=\"ml-2 h-3 w-10 text-blue-400/70\">\n            <polyline\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"1.5\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              points={sparklinePoints\n                .slice(-12)\n                .map((value, index, arr) => {\n                  const x = (index / Math.max(arr.length - 1, 1)) * 40;\n                  const y = 12 - (value / 100) * 12;\n                  return `${x},${y}`;\n                })\n                .join(' ')}\n            />\n          </svg>\n        )}\n      </Component>\n    );\n  };\n\n  const StatusBadge = ({\n    icon: Icon,\n    label,\n    description,\n    variant = 'default',\n    title,\n    onClick,\n    pulse = false,\n    loading = false,\n    className,\n  }: {\n    icon: LucideIcon;\n    label: string;\n    description?: string;\n    variant?: 'default' | 'positive' | 'warning' | 'danger' | 'info';\n    title?: string;\n    onClick?: () => void;\n    pulse?: boolean;\n    loading?: boolean;\n    className?: string;\n  }) => {\n    const palette: Record<string, string> = {\n      default: 'border-gray-700/60 bg-gray-800/60 text-gray-200',\n      positive: 'border-emerald-500/30 bg-emerald-500/10 text-emerald-100',\n      warning: 'border-amber-500/30 bg-amber-500/10 text-amber-100',\n      danger: 'border-red-500/30 bg-red-500/10 text-red-100',\n      info: 'border-blue-500/30 bg-blue-500/10 text-blue-100',\n    };\n\n    const Component = onClick ? 'button' : 'div';\n\n    return (\n      <Component\n        type={onClick ? 'button' : undefined}\n        onClick={onClick}\n        onKeyDown={\n          onClick\n            ? e => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault();\n                  onClick();\n                }\n              }\n            : undefined\n        }\n        title={title}\n        aria-label={title || label}\n        aria-busy={loading}\n        className={`${palette[variant]} ${className ?? ''} flex items-center gap-1.5 rounded-full px-2 py-1 text-xs ${\n          onClick\n            ? 'cursor-pointer transition-colors hover:border-gray-500/70 focus:outline-none focus:ring-1 focus:ring-blue-400/30'\n            : ''\n        }`}\n      >\n        <Icon size={12} className=\"opacity-80\" aria-hidden=\"true\" />\n        <span className=\"font-medium\">{label}</span>\n        {description && <span className=\"text-[11px] opacity-75\">{description}</span>}\n        {loading && (\n          <span\n            className=\"h-3 w-3 animate-spin rounded-full border border-current border-t-transparent\"\n            aria-label=\"Loading\"\n            role=\"status\"\n          />\n        )}\n        {pulse && (\n          <motion.span\n            className=\"inline-flex h-1.5 w-1.5 rounded-full bg-current\"\n            animate={{\n              opacity: [0.4, 1, 0.4],\n              scale: [1, 1.2, 1],\n            }}\n            transition={{ duration: 1.6, repeat: Infinity, ease: 'easeInOut' }}\n            aria-hidden=\"true\"\n          />\n        )}\n      </Component>\n    );\n  };\n\n  useEffect(() => {\n    if (!efficiencyAlert) return;\n    const timer = setTimeout(() => {\n      setEfficiencyAlert(null);\n    }, 20000);\n    return () => clearTimeout(timer);\n  }, [efficiencyAlert]);\n\n  useEffect(() => {\n    if (!privacyToast) return;\n    const timer = window.setTimeout(() => {\n      setPrivacyToast(null);\n    }, 8000);\n    return () => window.clearTimeout(timer);\n  }, [privacyToast]);\n\n  const handleEfficiencyAction = async (action: EfficiencyAlertAction) => {\n    try {\n      if (action.type === 'mode' && action.mode) {\n        await ipc.efficiency.applyMode(action.mode);\n      } else if (action.type === 'hibernate') {\n        await ipc.efficiency.hibernateInactiveTabs();\n      }\n    } catch (error) {\n      console.error('Efficiency action failed:', error);\n    } finally {\n      setEfficiencyAlert(null);\n    }\n  };\n\n  const handlePromptSubmit = useCallback(async () => {\n    if (!prompt.trim() || promptLoading) return;\n\n    setPromptLoading(true);\n    setPromptError(null);\n    setPromptResponse('');\n\n    // Get active tab context for better AI responses\n    const activeTab = useTabsStore.getState().tabs.find(t => t.id === activeId);\n    const tabContext = activeTab\n      ? {\n          url: activeTab.url,\n          title: activeTab.title,\n          tabId: activeTab.id,\n        }\n      : undefined;\n\n    const redixUrl = import.meta.env.VITE_REDIX_CORE_URL || 'http://localhost:8001';\n\n    try {\n      // Try Redix /workflow endpoint with RAG workflow for better context-aware responses\n      const workflowResponse = await fetch(`${redixUrl}/workflow`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          query: prompt,\n          context: tabContext ? `Current page: ${tabContext.title} (${tabContext.url})` : '',\n          workflowType: 'rag',\n          options: {\n            useOllama: true, // Prefer local for efficiency\n            stream: false, // Can enable streaming later\n            temperature: 0.7,\n          },\n        }),\n      }).catch(() => null);\n\n      if (workflowResponse?.ok) {\n        const workflowData = await workflowResponse.json();\n        setPromptResponse(workflowData.result || 'No response generated.');\n\n        // Store eco metrics if available\n        if (workflowData.greenScore !== undefined) {\n          setPromptEcoScore({\n            score: workflowData.greenScore,\n            tier: workflowData.greenTier || 'Green',\n            co2Saved: workflowData.co2SavedG || 0,\n          });\n        }\n        return;\n      }\n\n      // Fallback to Redix /ask endpoint\n      const askResponse = await fetch(`${redixUrl}/ask`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          query: prompt,\n          context: tabContext,\n          options: {\n            provider: 'auto',\n            maxTokens: 500,\n          },\n        }),\n      }).catch(() => null);\n\n      if (askResponse?.ok) {\n        const askData = await askResponse.json();\n        setPromptResponse(askData.text || 'No response generated.');\n\n        // Store eco metrics if available\n        if (askData.greenScore !== undefined) {\n          setPromptEcoScore({\n            score: askData.greenScore,\n            tier: askData.greenTier || 'Green',\n            co2Saved: askData.co2SavedG || 0,\n          });\n        }\n        return;\n      }\n\n      // Final fallback: Use LLM adapter directly\n      try {\n        const { sendPrompt } = await import('../../core/llm/adapter');\n        const contextPrompt = tabContext\n          ? `Context: You are viewing \"${tabContext.title}\" at ${tabContext.url}\\n\\nUser question: ${prompt}`\n          : prompt;\n        const response = await sendPrompt(contextPrompt, {\n          systemPrompt: 'You are a helpful AI assistant in a browser. Answer concisely.',\n          maxTokens: 500,\n        });\n        setPromptResponse(response.text);\n      } catch {\n        throw new Error('AI service unavailable. Please check your API keys or Redix server.');\n      }\n    } catch (error: any) {\n      console.error('[BottomStatus] Prompt failed:', error);\n      setPromptError(error.message || 'Failed to get AI response. Check Redix server or API keys.');\n    } finally {\n      setPromptLoading(false);\n    }\n  }, [prompt, promptLoading, activeId]);\n\n  // Legacy IPC-based prompt handler (kept for backward compatibility)\n  // The new handler above uses Redix /workflow with tab context\n  // This can be removed once IPC redix.stream is fully deprecated\n\n  useEffect(() => {\n    if (!extraOpen && !trendOpen) return;\n    const listenerOptions: AddEventListenerOptions = { capture: true };\n    const handleOutside = (event: MouseEvent) => {\n      const target = event.target as Node;\n      if (extraOpen && extraRef.current && extraRef.current.contains(target)) return;\n      if (trendOpen && trendRef.current && trendRef.current.contains(target)) return;\n      setExtraOpen(false);\n      setTrendOpen(false);\n    };\n    document.addEventListener('mousedown', handleOutside, listenerOptions);\n    return () => document.removeEventListener('mousedown', handleOutside, listenerOptions);\n  }, [extraOpen, trendOpen]);\n\n  const handleDoHToggle = async () => {\n    try {\n      if (dohStatus.enabled) {\n        await ipc.dns.disableDoH();\n        setDohStatus({ enabled: false, provider: 'cloudflare' });\n      } else {\n        await ipc.dns.enableDoH('cloudflare');\n        setDohStatus({ enabled: true, provider: 'cloudflare' });\n      }\n    } catch (error) {\n      console.error('Failed to toggle DoH:', error);\n    }\n  };\n\n  const handleVpnConnect = useCallback(\n    async (profileId: string) => {\n      if (!profileId || vpnBusy) {\n        return;\n      }\n      setVpnError(null);\n      setVpnBusy(true);\n      try {\n        const result = await ipc.vpn.connect(profileId);\n        await checkVpn().catch(() => {});\n        if (result?.connected) {\n          setVpnActiveId(profileId);\n          const label = result.name || result.server || result.interface || 'VPN';\n          addPrivacyEvent({\n            kind: 'vpn',\n            status: 'success',\n            message: label ? `VPN connected: ${label}` : 'VPN connected',\n          });\n        } else {\n          addPrivacyEvent({\n            kind: 'vpn',\n            status: 'info',\n            message: 'VPN connect command sent',\n          });\n        }\n      } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        setVpnError(message);\n        addPrivacyEvent({ kind: 'vpn', status: 'warning', message: `VPN error: ${message}` });\n      } finally {\n        setVpnBusy(false);\n      }\n    },\n    [checkVpn, addPrivacyEvent, vpnBusy]\n  );\n\n  const handleVpnDisconnect = useCallback(async () => {\n    if (vpnBusy) {\n      return;\n    }\n    setVpnError(null);\n    setVpnBusy(true);\n    try {\n      await ipc.vpn.disconnect();\n      await checkVpn().catch(() => {});\n      setVpnActiveId(null);\n      addPrivacyEvent({ kind: 'vpn', status: 'info', message: 'VPN disconnect requested' });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      setVpnError(message);\n      addPrivacyEvent({ kind: 'vpn', status: 'warning', message: `VPN error: ${message}` });\n    } finally {\n      setVpnBusy(false);\n    }\n  }, [checkVpn, addPrivacyEvent, vpnBusy]);\n\n  const efficiencyDetails = [\n    efficiencyBadge || null,\n    typeof efficiencySnapshot.batteryPct === 'number'\n      ? `${Math.round(efficiencySnapshot.batteryPct)}%`\n      : null,\n    typeof carbonIntensity === 'number' ? `${Math.round(carbonIntensity)} gCO₂/kWh` : null,\n    dailyCarbon > 0 ? `${dailyCarbon.toFixed(2)} gCO₂ saved today` : null,\n  ]\n    .filter(Boolean)\n    .join(' · ');\n\n  const efficiencyVariant: 'default' | 'positive' | 'info' = efficiencyLabel.includes('Regen')\n    ? 'positive'\n    : efficiencyLabel.includes('Battery')\n      ? 'info'\n      : 'default';\n\n  const torBadgeDescription = torStatusLabel.replace(/^Tor:?\\s*/i, '');\n  const torBadgeVariant: 'default' | 'positive' | 'warning' | 'info' = torStatus.stub\n    ? 'warning'\n    : torStatus.running\n      ? 'info'\n      : 'default';\n\n  const vpnBadgeDescription = vpnStatus.connected\n    ? vpnStatus.type\n      ? vpnStatus.type.toUpperCase()\n      : 'Active'\n    : 'Disconnected';\n  const localeKey = uiLanguage?.startsWith('hi')\n    ? 'hi'\n    : uiLanguage?.startsWith('ta')\n      ? 'ta'\n      : 'en';\n  const localeStrings = {\n    shieldsOn: {\n      en: 'Shields ON',\n      hi: 'शील्ड चालू',\n      ta: 'கவசம் இயக்கம்',\n    },\n    blocked: {\n      en: 'Blocked',\n      hi: 'रोकें',\n      ta: 'தடுக்கப்பட்டது',\n    },\n  };\n\n  return (\n    <>\n      <AnimatePresence>\n        {privacyToast && (\n          <motion.div\n            key={privacyToast.id}\n            initial={{ opacity: 0, y: 12 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 12 }}\n            transition={{ duration: 0.2 }}\n            className={`fixed bottom-20 right-6 z-50 flex items-center gap-2 rounded-lg border px-3 py-2 text-xs shadow-lg shadow-black/40 ${\n              privacyToast.status === 'success'\n                ? 'border-emerald-500/40 bg-emerald-500/15 text-emerald-100'\n                : privacyToast.status === 'warning'\n                  ? 'border-amber-500/40 bg-amber-500/15 text-amber-100'\n                  : 'border-sky-500/40 bg-sky-500/15 text-sky-100'\n            }`}\n          >\n            {privacyToast.kind === 'tor' ? (\n              <Shield size={16} aria-hidden=\"true\" />\n            ) : (\n              <Wifi size={16} aria-hidden=\"true\" />\n            )}\n            <div className=\"flex flex-col\">\n              <span className=\"font-medium\">{privacyToast.message}</span>\n              <span className=\"text-[10px] opacity-80\">\n                {formatRelativeTime(privacyToast.timestamp)}\n              </span>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setPrivacyToast(null)}\n              className=\"ml-2 rounded p-1 text-[10px] transition-colors hover:text-white\"\n              aria-label=\"Dismiss privacy notification\"\n            >\n              <X size={12} />\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      <div\n        className=\"hidden flex-col gap-2 border-t border-slate-800/60 bg-slate-950/90 px-4 py-2.5 text-xs text-gray-300 md:flex\"\n        data-onboarding=\"status-bar\"\n      >\n        <div className=\"flex flex-wrap items-center gap-1.5 text-xs text-gray-300 sm:gap-2 sm:text-sm md:gap-3\">\n          <PrivacySwitch />\n\n          <StatusMeter\n            icon={Cpu}\n            label=\"CPU\"\n            value={`${cpuUsage}%`}\n            percent={cpuUsage}\n            gradient=\"from-blue-500 via-cyan-500 to-blue-500\"\n            title=\"CPU usage\"\n            sparklinePoints={sparklinePoints}\n          />\n\n          <StatusMeter\n            icon={MemoryStick}\n            label=\"RAM\"\n            value={`${memoryUsage}%`}\n            percent={memoryUsage}\n            title=\"System memory usage\"\n            gradient=\"from-green-500 via-emerald-500 to-green-500\"\n          />\n\n          <StatusBadge\n            icon={Activity}\n            label={efficiencyLabel}\n            description={efficiencyDetails || undefined}\n            variant={efficiencyVariant}\n            title={efficiencyBadge ?? efficiencyLabel}\n          />\n\n          <StatusBadge\n            icon={Network}\n            label=\"Mode\"\n            description={privacyMode}\n            className={privacyModeColors[privacyMode]}\n            title={`Privacy mode: ${privacyMode}`}\n          />\n\n          <StatusBadge\n            icon={Shield}\n            label=\"Trust\"\n            description={trustDescription}\n            variant={trustVariant}\n            onClick={() => void openTrustDashboard()}\n            title=\"Open trust & ethics dashboard\"\n            loading={trustBadgeData.loading}\n          />\n\n          {isOffline && (\n            <StatusBadge\n              icon={AlertTriangle}\n              label=\"Offline\"\n              description=\"Local mode\"\n              variant=\"warning\"\n              title=\"Offline mode: remote services paused\"\n            />\n          )}\n\n          {/* Privacy Scorecard - Always visible showing blocked trackers from Redix/Shields */}\n          <StatusBadge\n            icon={Shield}\n            label=\"Blocked\"\n            description={\n              shieldsStats.trackersBlocked > 0 || shieldsStats.adsBlocked > 0\n                ? shieldsStats.trackersBlocked > 0 && shieldsStats.adsBlocked > 0\n                  ? `${shieldsStats.trackersBlocked} trackers, ${shieldsStats.adsBlocked} ads`\n                  : shieldsStats.trackersBlocked > 0\n                    ? `${shieldsStats.trackersBlocked} trackers`\n                    : `${shieldsStats.adsBlocked} ads`\n                : '0 trackers'\n            }\n            variant={\n              shieldsStats.trackersBlocked > 0 || shieldsStats.adsBlocked > 0\n                ? 'positive'\n                : 'default'\n            }\n            onClick={() => void openTrustDashboard()}\n            title={\n              shieldsStats.trackersBlocked > 0 || shieldsStats.adsBlocked > 0\n                ? `Privacy shields active: ${shieldsStats.trackersBlocked} tracker${shieldsStats.trackersBlocked === 1 ? '' : 's'} and ${shieldsStats.adsBlocked} ad${shieldsStats.adsBlocked === 1 ? '' : 's'} blocked. Click to view details.`\n                : 'Privacy shields: No trackers or ads blocked yet. Click to view privacy dashboard.'\n            }\n          />\n\n          <div className=\"ml-auto flex flex-shrink-0 items-center gap-1.5 sm:gap-2\">\n            <StatusBadge\n              icon={Brain}\n              label=\"Model\"\n              description={modelReady ? 'Ready' : 'Loading'}\n              variant={modelReady ? 'positive' : 'default'}\n              pulse={modelReady}\n              loading={!modelReady}\n              title=\"Local model status\"\n            />\n\n            <button\n              type=\"button\"\n              className=\"hidden items-center gap-1 rounded-full border border-gray-700/50 bg-gray-800/60 px-2 py-1 text-xs text-gray-300 transition-colors hover:border-gray-600 hover:text-white sm:px-3 sm:py-1.5 md:flex\"\n              onClick={() => setTrendOpen(prev => !prev)}\n              title=\"View detailed performance trends\"\n            >\n              <Activity size={14} />\n              <span className=\"hidden lg:inline\">Trends</span>\n            </button>\n\n            <div className=\"relative hidden w-32 sm:block sm:w-48 md:w-60\">\n              <input\n                type=\"text\"\n                value={prompt}\n                onChange={e => setPrompt(e.target.value)}\n                onKeyDown={e => {\n                  if (e.key === 'Enter') {\n                    void handlePromptSubmit();\n                  }\n                }}\n                placeholder=\"Prompt agent (e.g., 'summarize this page')...\"\n                disabled={promptLoading || isOffline}\n                className={`h-8 w-full rounded-full border border-gray-700/60 bg-gray-800/70 pl-3 pr-9 text-xs text-gray-200 placeholder-gray-400 focus:border-blue-500/60 focus:outline-none focus:ring-1 focus:ring-blue-500/40 ${\n                  promptLoading || isOffline ? 'cursor-not-allowed opacity-70' : ''\n                }`}\n              />\n              {promptLoading ? (\n                <Loader2\n                  className=\"absolute right-2 top-1/2 h-3.5 w-3.5 -translate-y-1/2 animate-spin text-blue-300\"\n                  aria-label=\"Sending prompt\"\n                />\n              ) : (\n                <button\n                  type=\"button\"\n                  onClick={() => void handlePromptSubmit()}\n                  disabled={isOffline}\n                  className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 transition-colors hover:text-gray-200 disabled:opacity-50\"\n                  title=\"Send prompt\"\n                >\n                  <Send size={14} />\n                </button>\n              )}\n            </div>\n\n            {(promptResponse || promptError || promptLoading) && (\n              <div className=\"hidden w-full space-y-2 sm:block\">\n                <div className=\"rounded-xl border border-gray-800 bg-gray-900/70 p-3 text-left text-xs text-gray-200\">\n                  {promptError ? (\n                    <span className=\"text-red-400\">{promptError}</span>\n                  ) : (\n                    <span className=\"whitespace-pre-wrap\">\n                      {promptResponse || (promptLoading ? 'Redix is thinking…' : '')}\n                    </span>\n                  )}\n                </div>\n                {promptEcoScore && !promptLoading && (\n                  <div className=\"flex items-center justify-end\">\n                    <EcoBadgeCompact\n                      score={promptEcoScore.score}\n                      tier={promptEcoScore.tier as 'Ultra Green' | 'Green' | 'Yellow' | 'Red'}\n                      co2SavedG={promptEcoScore.co2Saved}\n                    />\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Voice components removed by user request */}\n\n            <div className=\"relative\" ref={extraRef}>\n              <button\n                type=\"button\"\n                className=\"flex items-center gap-1 rounded-full border border-gray-700/50 bg-gray-800/60 px-3 py-1.5 text-xs text-gray-300 transition-colors hover:border-gray-600 hover:text-white\"\n                onClick={() => setExtraOpen(prev => !prev)}\n                title=\"Security & network controls\"\n              >\n                <MoreHorizontal size={14} />\n                More\n              </button>\n              <AnimatePresence>\n                {extraOpen && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 6 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: 6 }}\n                    transition={{ duration: 0.16 }}\n                    className=\"absolute right-0 mt-2 w-64 rounded-lg border border-gray-800 bg-slate-950/95 p-3 shadow-xl\"\n                  >\n                    <div className=\"grid gap-2\">\n                      <StatusBadge\n                        icon={Shield}\n                        label=\"Tor\"\n                        description={torBadgeDescription}\n                        variant={torBadgeVariant}\n                        onClick={\n                          !torStatus.loading\n                            ? async () => {\n                                if (torStatus.running) {\n                                  addPrivacyEvent({\n                                    kind: 'tor',\n                                    status: 'info',\n                                    message: 'Stopping Tor…',\n                                  });\n                                  await stopTor();\n                                  // Verify status after stopping\n                                  setTimeout(async () => {\n                                    await refreshTor();\n                                    const status = (await ipc.proxy.status()) as any;\n                                    if (status?.tor?.enabled === false) {\n                                      addPrivacyEvent({\n                                        kind: 'tor',\n                                        status: 'success',\n                                        message: 'Tor stopped. Proxy disabled.',\n                                      });\n                                    }\n                                  }, 1000);\n                                } else {\n                                  addPrivacyEvent({\n                                    kind: 'tor',\n                                    status: 'info',\n                                    message: 'Starting Tor…',\n                                  });\n                                  await startTor();\n                                  // Verify status after starting\n                                  setTimeout(async () => {\n                                    await refreshTor();\n                                    const status = (await ipc.proxy.status()) as any;\n                                    if (status?.tor?.enabled && status?.tor?.circuitEstablished) {\n                                      addPrivacyEvent({\n                                        kind: 'tor',\n                                        status: 'success',\n                                        message: `Tor active. Circuit: ${status.tor.circuitId || 'established'}`,\n                                      });\n                                    } else if (status?.tor?.enabled) {\n                                      addPrivacyEvent({\n                                        kind: 'tor',\n                                        status: 'info',\n                                        message: 'Tor starting, circuit establishing…',\n                                      });\n                                    }\n                                  }, 2000);\n                                }\n                              }\n                            : undefined\n                        }\n                        loading={torStatus.loading}\n                        title={torTooltip}\n                        className={`justify-start ${torStatus.loading ? 'cursor-not-allowed opacity-60' : ''}`}\n                      />\n                      {torStatus.running && !torStatus.stub && (\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            if (torStatus.loading) return;\n                            addPrivacyEvent({\n                              kind: 'tor',\n                              status: 'info',\n                              message: 'Requesting new Tor identity…',\n                            });\n                            void newTorIdentity()\n                              .then(() => {\n                                addPrivacyEvent({\n                                  kind: 'tor',\n                                  status: 'success',\n                                  message: 'Tor identity refreshed',\n                                });\n                              })\n                              .catch(error => {\n                                const message =\n                                  error instanceof Error ? error.message : String(error);\n                                addPrivacyEvent({\n                                  kind: 'tor',\n                                  status: 'warning',\n                                  message: `Tor identity error: ${message}`,\n                                });\n                              });\n                          }}\n                          className=\"flex items-center gap-2 rounded-md border border-purple-500/40 bg-purple-500/10 px-3 py-1.5 text-[11px] text-purple-100 transition-colors hover:border-purple-400/60\"\n                        >\n                          <RefreshCw size={12} />\n                          Request new Tor identity\n                        </button>\n                      )}\n                      <StatusBadge\n                        icon={Wifi}\n                        label=\"VPN\"\n                        description={vpnBadgeDescription}\n                        variant={vpnStatus.connected ? 'positive' : 'default'}\n                        onClick={!vpnStatus.loading ? () => void checkVpn() : undefined}\n                        loading={vpnStatus.loading}\n                        title={vpnTooltip}\n                        className={`justify-start ${vpnStatus.loading ? 'cursor-not-allowed opacity-60' : ''}`}\n                      />\n                      {vpnProfiles.length > 0 && (\n                        <div className=\"space-y-2 rounded-md border border-gray-800/60 bg-gray-900/40 p-2\">\n                          <span className=\"text-[10px] uppercase text-gray-400\">VPN Profiles</span>\n                          <div className=\"space-y-1\">\n                            {vpnProfiles.map(profile => {\n                              const isActive = vpnActiveId === profile.id;\n                              return (\n                                <button\n                                  key={profile.id}\n                                  type=\"button\"\n                                  onClick={() => handleVpnConnect(profile.id)}\n                                  disabled={vpnBusy}\n                                  className={`w-full rounded-md px-2 py-1 text-left text-[11px] transition-colors ${\n                                    isActive\n                                      ? 'border border-emerald-400/40 bg-emerald-500/20 text-emerald-100'\n                                      : 'border border-transparent text-gray-300 hover:border-gray-700'\n                                  } ${vpnBusy ? 'cursor-wait opacity-70' : ''}`}\n                                >\n                                  <div className=\"flex items-center justify-between\">\n                                    <span>{profile.name}</span>\n                                    {isActive && (\n                                      <span className=\"text-[10px] opacity-70\">Active</span>\n                                    )}\n                                  </div>\n                                  {profile.server && (\n                                    <div className=\"text-[10px] opacity-60\">{profile.server}</div>\n                                  )}\n                                </button>\n                              );\n                            })}\n                          </div>\n                          <div className=\"flex items-center justify-between gap-2\">\n                            <button\n                              type=\"button\"\n                              onClick={() => handleVpnDisconnect()}\n                              disabled={!vpnActiveId || vpnBusy}\n                              className=\"flex-1 rounded-md border border-gray-700/50 px-2 py-1 text-[10px] text-gray-300 transition-colors hover:border-gray-600 disabled:opacity-50\"\n                            >\n                              Disconnect\n                            </button>\n                            {vpnBusy && (\n                              <Loader2 className=\"h-3.5 w-3.5 animate-spin text-emerald-300\" />\n                            )}\n                          </div>\n                          {vpnError && (\n                            <div className=\"rounded-md border border-amber-500/30 bg-amber-500/10 px-2 py-1 text-[10px] text-amber-200\">\n                              {vpnError}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                      {privacyEvents.length > 0 && (\n                        <div className=\"space-y-2 rounded-md border border-gray-800/60 bg-gray-900/40 p-2\">\n                          <div className=\"flex items-center justify-between text-[10px] uppercase text-gray-400\">\n                            <span>Privacy activity</span>\n                            <button\n                              type=\"button\"\n                              onClick={() => {\n                                setPrivacyEvents([]);\n                                setPrivacyToast(null);\n                              }}\n                              className=\"rounded px-1.5 py-0.5 text-[9px] text-gray-400 transition-colors hover:text-gray-200\"\n                            >\n                              Clear\n                            </button>\n                          </div>\n                          <div className=\"max-h-32 space-y-1 overflow-auto\">\n                            {privacyEvents\n                              .slice()\n                              .reverse()\n                              .map(event => {\n                                const dotColor =\n                                  event.status === 'success'\n                                    ? 'bg-emerald-400'\n                                    : event.status === 'warning'\n                                      ? 'bg-amber-400'\n                                      : 'bg-sky-400';\n                                return (\n                                  <div\n                                    key={event.id}\n                                    className=\"flex items-start gap-2 text-[11px] text-gray-300\"\n                                  >\n                                    <span\n                                      className={`mt-1 h-2 w-2 rounded-full ${dotColor}`}\n                                      aria-hidden=\"true\"\n                                    />\n                                    <div className=\"space-y-0.5\">\n                                      <div className=\"flex items-center gap-1\">\n                                        {event.kind === 'tor' ? (\n                                          <Shield size={12} className=\"text-purple-300\" />\n                                        ) : (\n                                          <Wifi size={12} className=\"text-emerald-300\" />\n                                        )}\n                                        <span>{event.message}</span>\n                                      </div>\n                                      <div className=\"text-[9px] text-gray-500\">\n                                        {formatRelativeTime(event.timestamp)}\n                                      </div>\n                                    </div>\n                                  </div>\n                                );\n                              })}\n                          </div>\n                        </div>\n                      )}\n                      <StatusBadge\n                        icon={Shield}\n                        label=\"DoH\"\n                        description={dohStatus.enabled ? dohStatus.provider : 'Disabled'}\n                        variant={dohStatus.enabled ? 'info' : 'default'}\n                        onClick={handleDoHToggle}\n                        title=\"Toggle DNS-over-HTTPS\"\n                        className=\"justify-start\"\n                      />\n                      <StatusBadge\n                        icon={Activity}\n                        label=\"Efficiency\"\n                        description={efficiencyLabel || 'Normal'}\n                        variant=\"default\"\n                        className=\"justify-start\"\n                      />\n                      <StatusBadge\n                        icon={Cpu}\n                        label=\"CPU\"\n                        description={`${cpuUsage}%`}\n                        variant={cpuUsage > 70 ? 'warning' : 'default'}\n                        title=\"CPU usage\"\n                        className=\"justify-start\"\n                      />\n                      <StatusBadge\n                        icon={MemoryStick}\n                        label=\"RAM\"\n                        description={`${memoryUsage}%`}\n                        variant={memoryUsage > 75 ? 'warning' : 'default'}\n                        title=\"Memory usage\"\n                        className=\"justify-start\"\n                      />\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </div>\n\n            <AnimatePresence>\n              {trendOpen && (\n                <motion.div\n                  ref={trendRef}\n                  initial={{ opacity: 0, y: 6 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: 6 }}\n                  transition={{ duration: 0.16 }}\n                  className=\"absolute right-0 top-12 w-72 rounded-lg border border-gray-800 bg-slate-950/95 p-4 shadow-xl\"\n                >\n                  <div className=\"mb-2 flex items-center justify-between text-xs text-gray-300\">\n                    <span className=\"font-semibold uppercase tracking-wide\">\n                      Performance Trends\n                    </span>\n                    <button\n                      className=\"text-xs opacity-70 transition-opacity hover:opacity-100\"\n                      onClick={() => setTrendOpen(false)}\n                      aria-label=\"Close trends panel\"\n                    >\n                      <X size={12} />\n                    </button>\n                  </div>\n                  <TrendChart\n                    label=\"CPU %\"\n                    points={trendCpuPoints}\n                    color=\"#38bdf8\"\n                    labels={trendLabels}\n                  />\n                  <TrendChart\n                    label=\"RAM %\"\n                    points={trendRamPoints}\n                    color=\"#22d3ee\"\n                    labels={trendLabels}\n                  />\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n\n        <div className=\"flex flex-wrap items-start gap-3\">\n          <AnimatePresence>\n            {efficiencyAlert && (\n              <motion.div\n                key=\"efficiency-alert\"\n                initial={{ opacity: 0, y: 6 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 6 }}\n                className={`flex w-full max-w-xl items-center gap-3 rounded-lg border px-3 py-2 shadow-inner ${severityStyles[efficiencyAlert.severity]}`}\n              >\n                <AlertTriangle size={14} />\n                <div className=\"flex flex-col gap-0.5\">\n                  <span className=\"text-xs font-semibold\">{efficiencyAlert.title}</span>\n                  <span className=\"text-[11px] opacity-80\">{efficiencyAlert.message}</span>\n                </div>\n                <div className=\"ml-auto flex items-center gap-2\">\n                  {efficiencyAlert.actions.map(action => (\n                    <button\n                      key={action.id}\n                      onClick={() => handleEfficiencyAction(action)}\n                      className=\"rounded bg-gray-900/60 px-2 py-1 text-[11px] font-medium transition-colors hover:bg-gray-900/80\"\n                    >\n                      {action.label}\n                    </button>\n                  ))}\n                  <button\n                    onClick={() => setEfficiencyAlert(null)}\n                    className=\"p-1 text-xs opacity-70 transition-opacity hover:opacity-100\"\n                    aria-label=\"Dismiss efficiency alert\"\n                  >\n                    <X size={12} />\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          <AnimatePresence>\n            {metricsAlert && (\n              <motion.div\n                key=\"metrics-alert\"\n                initial={{ opacity: 0, y: 6 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: 6 }}\n                className={`flex w-full max-w-xl items-center gap-3 rounded-lg border px-3 py-2 shadow-inner ${severityStyles[metricsAlert.severity]}`}\n              >\n                <Activity size={14} />\n                <div className=\"flex flex-col gap-0.5\">\n                  <span className=\"text-xs font-semibold\">{metricsAlert.title}</span>\n                  <span className=\"text-[11px] opacity-80\">{metricsAlert.message}</span>\n                </div>\n                <div className=\"ml-auto\">\n                  <button\n                    onClick={() => setMetricsAlert(null)}\n                    className=\"p-1 text-xs opacity-70 transition-opacity hover:opacity-100\"\n                    aria-label=\"Dismiss metrics alert\"\n                  >\n                    <X size={12} />\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </div>\n      <div className=\"flex items-center justify-between border-t border-slate-900/70 bg-slate-950/95 px-4 py-3 text-xs text-gray-200 md:hidden\">\n        <div className=\"flex flex-col\">\n          <span className=\"text-[11px] text-gray-400\">\n            CPU {cpuUsage}% · RAM {memoryUsage}%\n          </span>\n          <button\n            type=\"button\"\n            onClick={() => setPrivacyMode(prev => (prev === 'Normal' ? 'Ghost' : 'Normal'))}\n            className=\"mt-1 inline-flex items-center gap-2 rounded-full bg-slate-800/80 px-3 py-1 text-[11px] font-medium text-gray-100\"\n          >\n            <Shield size={12} />\n            {localeStrings.shieldsOn[localeKey]}\n          </button>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-[11px] text-gray-400\">\n            {localeStrings.blocked[localeKey]}:{' '}\n            {shieldsStats.trackersBlocked + shieldsStats.adsBlocked}\n          </div>\n          <span className=\"text-[10px] text-gray-500\">\n            VPN: {vpnStatus.connected ? vpnBadgeDescription : 'OFF'}\n          </span>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"file":"BottomStatus-CpusWBZO.js"}