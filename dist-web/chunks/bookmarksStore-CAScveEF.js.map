{"version":3,"file":"bookmarksStore-CAScveEF.js","sources":["../../src/state/bookmarksStore.ts"],"sourcesContent":["/**\n * Bookmarks Store - Tier 2\n * Manages user bookmarks\n */\n\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nexport type Bookmark = {\n  id: string;\n  url: string;\n  title: string;\n  createdAt: number;\n  tags?: string[];\n  description?: string;\n  folder?: string;\n};\n\nexport type BookmarkFolder = {\n  id: string;\n  name: string;\n  createdAt: number;\n};\n\ntype BookmarksState = {\n  bookmarks: Bookmark[];\n  folders: BookmarkFolder[];\n  // Legacy methods\n  add: (bookmark: Omit<Bookmark, 'id' | 'createdAt'>) => void;\n  remove: (id: string) => void;\n  update: (id: string, updates: Partial<Bookmark>) => void;\n  getByUrl: (url: string) => Bookmark | undefined;\n  search: (query: string) => Bookmark[];\n  clear: () => void;\n  // New methods expected by components\n  isBookmarked: (url: string) => boolean;\n  addBookmark: (bookmark: Omit<Bookmark, 'id' | 'createdAt'>) => void;\n  removeBookmark: (id: string) => void;\n  updateBookmark: (id: string, updates: Partial<Bookmark>) => void;\n  getBookmarkByUrl: (url: string) => Bookmark | undefined;\n  searchBookmarks: (query: string) => Bookmark[];\n  getBookmarksByFolder: (folderId: string) => Bookmark[];\n  addFolder: (name: string) => void;\n  removeFolder: (id: string) => void;\n};\n\nexport const useBookmarksStore = create<BookmarksState>()(\n  persist(\n    (set, get) => {\n      const createBookmark = (bookmark: Omit<Bookmark, 'id' | 'createdAt'>): Bookmark => ({\n        ...bookmark,\n        id: `bookmark-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,\n        createdAt: Date.now(),\n      });\n\n      return {\n        bookmarks: [],\n        folders: [],\n        // Legacy methods\n        add: bookmark => {\n          const existing = get().bookmarks.find(b => b.url === bookmark.url);\n          if (existing) {\n            get().update(existing.id, bookmark);\n            return;\n          }\n          const newBookmark = createBookmark(bookmark);\n          set(state => ({\n            bookmarks: [...state.bookmarks, newBookmark],\n          }));\n        },\n        remove: id =>\n          set(state => ({\n            bookmarks: state.bookmarks.filter(b => b.id !== id),\n          })),\n        update: (id, updates) =>\n          set(state => ({\n            bookmarks: state.bookmarks.map(b => (b.id === id ? { ...b, ...updates } : b)),\n          })),\n        getByUrl: url => {\n          return get().bookmarks.find(b => b.url === url);\n        },\n        search: query => {\n          const lowerQuery = query.toLowerCase();\n          return get().bookmarks.filter(\n            b =>\n              b.title.toLowerCase().includes(lowerQuery) ||\n              b.url.toLowerCase().includes(lowerQuery) ||\n              b.tags?.some(tag => tag.toLowerCase().includes(lowerQuery)) ||\n              b.description?.toLowerCase().includes(lowerQuery)\n          );\n        },\n        clear: () => set({ bookmarks: [], folders: [] }),\n        // New methods (aliases/implementations)\n        isBookmarked: url => {\n          return get().bookmarks.some(b => b.url === url);\n        },\n        addBookmark: bookmark => {\n          get().add(bookmark);\n        },\n        removeBookmark: id => {\n          get().remove(id);\n        },\n        updateBookmark: (id, updates) => {\n          get().update(id, updates);\n        },\n        getBookmarkByUrl: url => {\n          return get().getByUrl(url);\n        },\n        searchBookmarks: query => {\n          return get().search(query);\n        },\n        getBookmarksByFolder: folderId => {\n          return get().bookmarks.filter(b => b.folder === folderId);\n        },\n        addFolder: name => {\n          const newFolder: BookmarkFolder = {\n            id: `folder-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,\n            name,\n            createdAt: Date.now(),\n          };\n          set(state => ({\n            folders: [...state.folders, newFolder],\n          }));\n        },\n        removeFolder: id => {\n          set(state => ({\n            folders: state.folders.filter(f => f.id !== id),\n            bookmarks: state.bookmarks.map(b =>\n              b.folder === id ? { ...b, folder: undefined } : b\n            ),\n          }));\n        },\n      };\n    },\n    {\n      name: 'regen_bookmarks_v1',\n    }\n  )\n);\n"],"names":["useBookmarksStore","create","persist","set","get","createBookmark","bookmark","existing","b","newBookmark","state","id","updates","url","query","lowerQuery","tag","folderId","name","newFolder","f"],"mappings":"wDA8CO,MAAMA,EAAoBC,EAAA,EAC/BC,EACE,CAACC,EAAKC,IAAQ,CACZ,MAAMC,EAAkBC,IAA4D,CAClF,GAAGA,EACH,GAAI,YAAY,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,EAAG,CAAC,CAAC,GACpE,UAAW,KAAK,IAAA,CAAI,GAGtB,MAAO,CACL,UAAW,CAAA,EACX,QAAS,CAAA,EAET,IAAKA,GAAY,CACf,MAAMC,EAAWH,IAAM,UAAU,KAAKI,GAAKA,EAAE,MAAQF,EAAS,GAAG,EACjE,GAAIC,EAAU,CACZH,EAAA,EAAM,OAAOG,EAAS,GAAID,CAAQ,EAClC,MACF,CACA,MAAMG,EAAcJ,EAAeC,CAAQ,EAC3CH,EAAIO,IAAU,CACZ,UAAW,CAAC,GAAGA,EAAM,UAAWD,CAAW,CAAA,EAC3C,CACJ,EACA,OAAQE,GACNR,EAAIO,IAAU,CACZ,UAAWA,EAAM,UAAU,OAAOF,GAAKA,EAAE,KAAOG,CAAE,CAAA,EAClD,EACJ,OAAQ,CAACA,EAAIC,IACXT,EAAIO,IAAU,CACZ,UAAWA,EAAM,UAAU,OAAUF,EAAE,KAAOG,EAAK,CAAE,GAAGH,EAAG,GAAGI,CAAA,EAAYJ,CAAE,CAAA,EAC5E,EACJ,SAAUK,GACDT,IAAM,UAAU,KAAKI,GAAKA,EAAE,MAAQK,CAAG,EAEhD,OAAQC,GAAS,CACf,MAAMC,EAAaD,EAAM,YAAA,EACzB,OAAOV,EAAA,EAAM,UAAU,OACrBI,GACEA,EAAE,MAAM,YAAA,EAAc,SAASO,CAAU,GACzCP,EAAE,IAAI,YAAA,EAAc,SAASO,CAAU,GACvCP,EAAE,MAAM,KAAKQ,GAAOA,EAAI,YAAA,EAAc,SAASD,CAAU,CAAC,GAC1DP,EAAE,aAAa,YAAA,EAAc,SAASO,CAAU,CAAA,CAEtD,EACA,MAAO,IAAMZ,EAAI,CAAE,UAAW,CAAA,EAAI,QAAS,CAAA,EAAI,EAE/C,aAAcU,GACLT,IAAM,UAAU,KAAKI,GAAKA,EAAE,MAAQK,CAAG,EAEhD,YAAaP,GAAY,CACvBF,EAAA,EAAM,IAAIE,CAAQ,CACpB,EACA,eAAgBK,GAAM,CACpBP,EAAA,EAAM,OAAOO,CAAE,CACjB,EACA,eAAgB,CAACA,EAAIC,IAAY,CAC/BR,IAAM,OAAOO,EAAIC,CAAO,CAC1B,EACA,iBAAkBC,GACTT,EAAA,EAAM,SAASS,CAAG,EAE3B,gBAAiBC,GACRV,EAAA,EAAM,OAAOU,CAAK,EAE3B,qBAAsBG,GACbb,IAAM,UAAU,OAAOI,GAAKA,EAAE,SAAWS,CAAQ,EAE1D,UAAWC,GAAQ,CACjB,MAAMC,EAA4B,CAChC,GAAI,UAAU,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,MAAM,EAAG,CAAC,CAAC,GAClE,KAAAD,EACA,UAAW,KAAK,IAAA,CAAI,EAEtBf,EAAIO,IAAU,CACZ,QAAS,CAAC,GAAGA,EAAM,QAASS,CAAS,CAAA,EACrC,CACJ,EACA,aAAcR,GAAM,CAClBR,EAAIO,IAAU,CACZ,QAASA,EAAM,QAAQ,OAAOU,GAAKA,EAAE,KAAOT,CAAE,EAC9C,UAAWD,EAAM,UAAU,IAAIF,GAC7BA,EAAE,SAAWG,EAAK,CAAE,GAAGH,EAAG,OAAQ,QAAcA,CAAA,CAClD,EACA,CACJ,CAAA,CAEJ,EACA,CACE,KAAM,oBAAA,CACR,CAEJ"}