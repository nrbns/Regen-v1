const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/core-ai-yFIunLTZ.js","chunks/vendor-zustand-BWsgwsXr.js","chunks/vendor-react-gmX1Lmvt.js","chunks/vendor-react-dom-Bkb6jJ_S.js","chunks/vendor-Vl2WtvH-.js","chunks/mode-manager.ts-DwguZmJt.js","chunks/core-memory-DmK-uh9X.js"])))=>i.map(i=>d[i]);
import{N as Kt,r as s,j as t,aI as Oe,aT as Wt,bx as qt,c as rt,al as Tt,P as Xt,by as Yt,bz as Jt,a0 as Qt,aF as Vt,bA as Zt,bB as xt,L as er,ap as jt,bC as nt,bD as tr,bb as rr,aX as Ye,X as Ve,q as ot,aU as Nt,bE as Ct,T as nr,a8 as kt,bF as or,bG as ar,bH as sr,bI as It,bJ as At,bK as St,bL as Rt,bM as Dt,bN as Pt,bO as Et,bP as Mt,bQ as Gt,bR as ir,S as lr,ae as cr,af as dr,a3 as gt}from"./vendor-react-gmX1Lmvt.js";import{a as B,c as at,f as ht,i as A,T as Ce,_ as ur,b as zt,j as pr,h as fr}from"./core-ai-yFIunLTZ.js";import{i as we}from"../assets/index-D9cF9G1U.js";import{A as ke,m as T}from"./vendor-framer-motion-DDE19Uim.js";import{u as mr}from"./profileStore-CltTxMCZ.js";import{c as br}from"./vendor-zustand-BWsgwsXr.js";import{P as $t}from"./Downloads-CU-ngJEB.js";import{d as xr,r as gr,e as hr}from"./AppShell-CJtR0Pw4.js";import{c as ge}from"./mode-research-BclgCwOH.js";import"./vendor-react-dom-Bkb6jJ_S.js";import"./vendor-Vl2WtvH-.js";import"./mode-manager.ts-DwguZmJt.js";import"./core-memory-DmK-uh9X.js";import"@tauri-apps/api/core";import"./vendor-utils-5Vdoy44w.js";import"./mode-docs-FcsoolLb.js";import"./vendor-pdf-ejcqEZLU.js";import"./vendor-mammoth-BPQIafDs.js";import"./History-kg0LrAO3.js";import"./OmniDesk-C5fSodZ1.js";import"./WorkspacesPanel-3geKynW_.js";import"./bookmarksStore-CAScveEF.js";import"./workspacesStore-BSqEl-CQ.js";import"./tradeStore-CHfkU4NA.js";import"./dataService-HUHZrGu9.js";import"./registry-CG5fPtjR.js";import"./trustDashboardStore-BRaGSCcb.js";const Ft=Kt.forwardRef(({tabId:n,children:i},o)=>{const[c,h]=s.useState(!1),[k,U]=s.useState(null),K=B($=>$.tabs).find($=>$.id===n);return s.useEffect(()=>{c&&K&&U({title:K.title||"New Tab",url:K.url||"about:blank"})},[c,K]),t.jsxs("div",{ref:o,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:"relative",style:{pointerEvents:"auto"},onClick:$=>{$.target===$.currentTarget&&$.stopPropagation()},children:[i,t.jsx(ke,{children:c&&k&&t.jsxs(T.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"absolute bottom-full left-0 mb-2 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl z-[40] w-80 p-4",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:$=>$.stopPropagation(),onMouseDown:$=>$.stopPropagation(),style:{pointerEvents:"auto"},children:[k.thumbnail&&t.jsx("img",{src:k.thumbnail,alt:k.title,className:"w-full h-32 object-cover rounded mb-2"}),t.jsx("div",{className:"text-sm font-medium text-gray-200 mb-1 truncate",children:k.title}),t.jsx("div",{className:"text-xs text-gray-400 truncate",children:k.url})]})})]})});Ft.displayName="TabHoverCard";const yr=Ft,be=[{name:"Work",color:"#3b82f6",icon:Oe,description:"Work-related browsing"},{name:"Personal",color:"#10b981",icon:Wt,description:"Personal browsing"},{name:"Anonymous",color:"#8b5cf6",icon:qt,description:"Private browsing"}];function vr({onSelect:n,compact:i=!1,showLabel:o=!0}){const{containers:c,activeContainerId:h,setActiveContainer:k}=at(),[U,I]=s.useState(!1),[K,$]=s.useState([]);s.useEffect(()=>{(async()=>{if(ht()){const x=be.map((L,G)=>({id:`preset-${G}`,name:L.name,color:L.color,scope:"global"}));$(x);return}try{const x=await A.containers.list().catch(()=>[]),L=be.filter(D=>!x.some(Y=>Y.name.toLowerCase()===D.name.toLowerCase()));if(L.length>0)for(const D of L)try{await A.containers.create({name:D.name,color:D.color})}catch{}const G=await A.containers.list().catch(()=>[]),g=[];for(const D of be){const Y=G.find(ce=>ce.name.toLowerCase()===D.name.toLowerCase());Y&&Y.scope&&g.push(Y)}$(g)}catch{const x=be.map((L,G)=>({id:`preset-${G}`,name:L.name,color:L.color,scope:"global"}));$(x)}})()},[]),s.useEffect(()=>{const m=be.map(x=>c.find(L=>L.name.toLowerCase()===x.name.toLowerCase())).filter(x=>x!==void 0);$(m)},[c]);const ne=s.useCallback(async m=>{if(ht()){k(m),n?.(m.id),I(!1);return}try{const x=await A.containers.setActive(m.id);k(x||m),n?.(m.id),I(!1)}catch{k(m),n?.(m.id),I(!1)}},[n,k]),W=c.find(m=>m.id===h),oe=K.find(m=>m.id===h),ee=oe?be.find(m=>m.name.toLowerCase()===oe.name.toLowerCase()):null,te=ee?.icon||Oe;return i?t.jsxs("div",{className:"relative",children:[t.jsxs(T.button,{onClick:()=>I(!U),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 rounded-lg border border-white/10 bg-white/5 px-2 py-1 transition-colors hover:bg-white/10",title:W?.name||"Select container",children:[ee&&t.jsx(te,{size:14,className:"text-muted"}),!ee&&W?.color&&t.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:W.color}}),o&&W&&t.jsx("span",{className:"text-muted text-xs",children:W.name}),t.jsx(rt,{size:12,className:"text-muted"})]}),t.jsx(ke,{children:U&&t.jsxs(t.Fragment,{children:[t.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-30",onClick:()=>I(!1)}),t.jsx(T.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},className:"bg-surface-elevated/95 absolute right-0 top-full z-40 mt-2 w-56 overflow-hidden rounded-xl border border-white/10 shadow-2xl backdrop-blur-xl",children:t.jsx("div",{className:"p-2",children:K.map(m=>{const x=be.find(g=>g.name.toLowerCase()===m.name.toLowerCase()),L=x?.icon||Oe,G=m.id===h;return t.jsxs(T.button,{onClick:()=>ne(m),whileHover:{scale:1.02},whileTap:{scale:.98},className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 transition-colors ${G?"bg-primary/20 border-primary/40 text-primary border":"text-muted hover:text-primary hover:bg-white/10"}`,children:[t.jsx(L,{size:16}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"text-sm font-medium",children:m.name}),x&&t.jsx("div",{className:"text-muted/70 text-xs",children:x.description})]}),G&&t.jsx("div",{className:"bg-primary h-2 w-2 rounded-full"})]},m.id)})})})]})})]}):t.jsx("div",{className:"flex items-center gap-2",children:K.map(m=>{const x=be.find(g=>g.name.toLowerCase()===m.name.toLowerCase()),L=x?.icon||Oe,G=m.id===h;return t.jsxs(T.button,{onClick:()=>ne(m),whileHover:{scale:1.05},whileTap:{scale:.95},className:`flex items-center gap-2 rounded-lg border px-3 py-1.5 transition-all ${G?"bg-primary/20 border-primary/40 text-primary shadow-primary/20 shadow-lg":"text-muted hover:text-primary border-white/10 bg-white/5 hover:bg-white/10"}`,title:x?.description||m.name,children:[t.jsx(L,{size:16}),o&&t.jsx("span",{className:"text-sm font-medium",children:m.name})]},m.id)})})}const _e=br((n,i)=>({visible:!1,tab:null,open:o=>n({visible:!0,tab:o}),close:()=>n({visible:!1,tab:null}),sync:o=>{const c=i().tab;c?.id===o.id&&n({tab:{...c,...o}})}}));function wr({tabId:n,url:i,containerId:o,containerName:c,containerColor:h,mode:k,sleeping:U,onClose:I}){const[K,$]=s.useState({x:0,y:0}),ne=s.useRef(null),W=mr(l=>l.policies[l.activeProfileId]),oe=W?!W.allowGhostTabs:!1,ee=W?!W.allowPrivateWindows:!1,{containers:te,setContainers:m}=at(l=>({containers:l.containers,setContainers:l.setContainers})),x=B(l=>l.tabs.find(z=>z.id===n)),L=B(l=>l.tabGroups),G=B(l=>l.assignTabToGroup),g=B(l=>l.createGroup),D=_e(l=>l.open),Y=U??x?.sleeping??!1;s.useEffect(()=>{const l=z=>{ne.current&&!ne.current.contains(z.target)&&I()};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[I]),s.useEffect(()=>{const l=window.__lastContextMenuPos||{x:0,y:0};$({x:l.x,y:l.y})},[]),s.useEffect(()=>{te.length===0&&A.containers.list().then(l=>{Array.isArray(l)&&m(l)}).catch(l=>{console.error("Failed to load containers for context menu:",l)})},[te.length,m]);const ce=()=>({id:x?.id??n,title:x?.title??x?.url??i??"New Tab",url:x?.url??i??"about:blank",containerId:x?.containerId??o,containerName:x?.containerName??c,containerColor:x?.containerColor??h,mode:x?.mode??k,createdAt:x?.createdAt,lastActiveAt:x?.lastActiveAt,sessionId:x?.sessionId,profileId:x?.profileId,sleeping:x?.sleeping??U??!1}),ue=l=>{G(n,l),I()},se=()=>{const l=window.prompt("New group name",`Group ${L.length+1}`)?.trim(),z=g({name:l||void 0});G(n,z.id),I()},f=async()=>{if(!oe)try{await A.private.createGhostTab({url:i}),I()}catch(l){console.error("Failed to open as ghost:",l)}},q=async()=>{try{confirm("Burn this tab? All data will be permanently deleted.")&&(await A.tabs.burn(n),I())}catch(l){console.error("Failed to burn tab:",l)}},re=async()=>{if(ee)return;const l=prompt("Auto-close after (minutes):","10");if(l)try{const z=parseInt(l)*60*1e3;await A.private.createWindow({url:i,autoCloseAfter:z}),I()}catch(z){console.error("Failed to start timer:",z)}},F=async(l,z=!0)=>{try{await A.tabs.create({url:i||"about:blank",containerId:l??o,activate:z}),I()}catch(ye){console.error("Failed to duplicate tab:",ye)}},ze=async l=>{if(!l||l===o){I();return}try{const z=await A.tabs.setContainer(n,l);z?.success||console.warn("Failed to switch container:",z?.error)}catch(z){console.error("Failed to switch tab container:",z)}finally{I()}},He=()=>{D(ce()),I()},Ie=async()=>{try{await A.tabs.wake(n),I()}catch(l){console.error("Failed to wake tab:",l)}},he=k==="ghost",$e=k==="private",Ae=[{icon:Tt,label:"Peek preview",action:He},{icon:Xt,label:"Duplicate Tab",action:()=>F(o,!0),disabled:he||$e},{icon:Yt,label:"Open as Ghost",action:f,hide:he,disabled:oe,disabledReason:"Disabled by profile policy"},{icon:Jt,label:"Burn Tab",action:q,danger:!0},{icon:Qt,label:"Start 10-min Timer",action:re,disabled:ee,disabledReason:"Disabled by profile policy"},{icon:Vt,label:"Wake tab",action:Ie,hide:!Y}].filter(l=>!l.hide),J=!he&&!$e?te.filter(l=>l.id!==o):[],Se=te.filter(l=>l.id!==o);return t.jsx(ke,{children:t.jsxs(T.div,{ref:ne,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:"fixed z-50 bg-surface-elevated text-foreground border border-subtle rounded-lg shadow-elevated py-1 min-w-[200px]",style:{left:`${K.x}px`,top:`${K.y}px`},children:[Y&&t.jsxs("div",{className:"px-3 py-2 text-xs text-amber-500 bg-amber-500/10 border-b border-subtle flex items-center gap-2",children:[t.jsx(Zt,{size:14}),t.jsx("span",{children:"Tab is hibernating"})]}),(o||c)&&t.jsxs("div",{className:"px-3 py-2 text-xs text-muted border-b border-subtle flex items-center gap-2",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-full border border-gray-500/30",style:{backgroundColor:h||"#6366f1"}}),t.jsx("span",{children:c||(o==="default"?"Default container":o)})]}),Ae.map((l,z)=>{const ye=l.icon;return t.jsxs(T.button,{whileHover:l.disabled?void 0:{scale:1.01},onClick:l.action,className:`w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors ${l.danger?"text-red-500 hover:bg-red-500/10":l.disabled?"text-muted cursor-not-allowed":"text-foreground hover:bg-[color:var(--surface-muted)]/45"}`,disabled:l.disabled,title:l.disabled?l.disabledReason||"Disabled by profile policy":void 0,children:[t.jsx(ye,{size:16}),t.jsx("span",{children:l.label})]},z)}),Se.length>0&&t.jsxs("div",{className:"mt-1 border-t border-subtle pt-1.5",children:[t.jsxs("div",{className:"px-3 py-1 text-[11px] uppercase tracking-wide text-muted flex items-center gap-2",children:[t.jsx(xt,{size:12}),"Open copy in container"]}),t.jsx("div",{className:"flex flex-col",children:Se.map(l=>t.jsxs(T.button,{whileHover:{scale:1.01},onClick:()=>F(l.id,!0),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-[color:var(--surface-muted)]/45 transition-colors",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full border border-gray-500/30",style:{backgroundColor:l.color||"#6366f1"}}),t.jsx("span",{className:"truncate",children:l.name})]},`open-${l.id}`))})]}),J.length>0&&t.jsxs("div",{className:"mt-1 border-t border-subtle pt-1.5",children:[t.jsxs("div",{className:"px-3 py-1 text-[11px] uppercase tracking-wide text-muted flex items-center gap-2",children:[t.jsx(xt,{size:12}),"Move to container"]}),t.jsx("div",{className:"flex flex-col",children:J.map(l=>t.jsxs(T.button,{whileHover:{scale:1.01},onClick:()=>ze(l.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-[color:var(--surface-muted)]/45 transition-colors",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full border border-gray-500/30",style:{backgroundColor:l.color||"#6366f1"}}),t.jsx("span",{className:"truncate",children:l.name})]},l.id))})]}),L.length>0&&t.jsxs("div",{className:"mt-1 border-t border-subtle pt-1.5",children:[t.jsxs("div",{className:"px-3 py-1 text-[11px] uppercase tracking-wide text-muted flex items-center gap-2",children:[t.jsx(er,{size:12}),"Tab group"]}),t.jsxs("div",{className:"flex flex-col",children:[L.map(l=>t.jsxs(T.button,{whileHover:{scale:1.01},onClick:()=>ue(l.id),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-[color:var(--surface-muted)]/45 transition-colors",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full border border-gray-500/30",style:{backgroundColor:l.color}}),t.jsx("span",{className:"truncate flex-1",children:l.name}),x?.groupId===l.id&&t.jsx(jt,{size:12,className:"text-emerald-400"})]},l.id)),x?.groupId&&t.jsx(T.button,{whileHover:{scale:1.01},onClick:()=>ue(null),className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-[color:var(--surface-muted)]/45 transition-colors",children:"Remove from group"})]})]}),t.jsxs(T.button,{whileHover:{scale:1.01},onClick:se,className:"w-full flex items-center gap-2 px-3 py-1.5 text-sm text-foreground hover:bg-[color:var(--surface-muted)]/45 transition-colors border-t border-subtle mt-1",children:[t.jsx(nt,{size:14}),"New group"]})]})})}function Tr({clusters:n,summary:i,onApply:o}){const[c,h]=s.useState(0);if(s.useEffect(()=>{n.length?c>=n.length&&h(0):h(0)},[n,c]),!n.length)return null;const k=n[c],U=typeof k.confidence=="number"?Math.round(k.confidence*100):null;return t.jsxs(T.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"no-drag flex items-center gap-2 mr-3",children:[t.jsxs("button",{type:"button",onClick:()=>o(k.id),className:"flex items-center gap-1.5 rounded-full border border-blue-500/40 bg-blue-500/15 px-3 py-1.5 text-xs text-blue-100 transition-colors hover:bg-blue-500/25",title:i??"Redix suggests regrouping these tabs into a focused workspace.",children:[t.jsx(rr,{size:12}),t.jsxs("span",{className:"font-semibold",children:["Regroup ",k.label]}),U!==null&&t.jsxs("span",{className:"text-[11px] text-blue-200/80",children:[U,"%"]})]}),n.length>1&&t.jsx("button",{type:"button",onClick:()=>h(I=>(I+1)%n.length),className:"rounded-full border border-slate-700/60 p-1.5 text-[10px] text-slate-300 transition-colors hover:text-slate-100","aria-label":"Next suggested cluster",children:"â—"})]})}function jr({entry:n,onOpen:i}){if(!n)return null;let o=n.url;try{o=new URL(n.url).hostname.replace(/^www\./,"")}catch{}const c=typeof n.confidence=="number"?Math.round(n.confidence*100):null;return t.jsx(T.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"no-drag flex items-center gap-2 mr-3",children:t.jsxs("button",{type:"button",onClick:()=>i(n),className:"flex items-center gap-1.5 rounded-full border border-emerald-500/40 bg-emerald-500/15 px-3 py-1.5 text-xs text-emerald-100 transition-colors hover:bg-emerald-500/25",title:n.reason,children:[t.jsx(tr,{size:12}),t.jsxs("span",{className:"font-semibold",children:["Scout ",o]}),c!==null&&t.jsxs("span",{className:"text-[11px] text-emerald-200/80",children:[c,"%"]})]})})}function Nr({open:n,onClose:i}){const{tabs:o,tabGroups:c,createGroup:h,updateGroup:k,deleteGroup:U,assignTabToGroup:I,toggleGroupCollapsed:K,setGroupColor:$}=B(),[ne,W]=s.useState(null),[oe,ee]=s.useState(""),[te,m]=s.useState(null),x=s.useMemo(()=>{const f=new Map;return o.forEach(q=>{const re=q.groupId||"ungrouped";f.has(re)||f.set(re,[]),f.get(re).push(q)}),f},[o]),L=s.useCallback(()=>{const f=h({name:`Group ${c.length+1}`});W(f.id),ee(f.name)},[h,c.length]),G=s.useCallback(f=>{W(f.id),ee(f.name)},[]),g=s.useCallback(f=>{oe.trim()&&k(f,{name:oe.trim()}),W(null),ee("")},[oe,k]),D=s.useCallback(()=>{W(null),ee("")},[]),Y=s.useCallback(f=>{window.confirm("Delete this group? Tabs will be ungrouped but not closed.")&&U(f)},[U]),ce=s.useCallback(f=>{const q=Ce.findIndex(F=>F===f.color),re=Ce[(q+1)%Ce.length];$(f.id,re)},[$]),ue=s.useCallback(f=>{te&&(I(te,f||null),m(null))},[te,I]),se=x.get("ungrouped")||[];return n?t.jsx($t,{children:t.jsx(ke,{children:t.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm",onClick:i,children:t.jsxs(T.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl max-h-[80vh] bg-gray-900 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden",onClick:f=>f.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700 bg-gray-800/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ye,{className:"w-5 h-5 text-purple-400"}),t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Tab Groups"}),t.jsxs("span",{className:"text-sm text-gray-400",children:[c.length," group",c.length!==1?"s":""]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[t.jsx(nt,{size:16}),"New Group"]}),t.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors text-gray-400 hover:text-white",children:t.jsx(Ve,{size:20})})]})]}),t.jsx("div",{className:"overflow-y-auto max-h-[calc(80vh-80px)] p-6",children:c.length===0&&se.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[t.jsx(Ye,{className:"w-16 h-16 text-gray-600 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No tabs or groups"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Create a group to organize your tabs"}),t.jsx("button",{onClick:L,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Create Your First Group"})]}):t.jsxs("div",{className:"space-y-4",children:[c.map(f=>{const q=x.get(f.id)||[],re=f.collapsed;return t.jsxs(T.div,{layout:!0,className:"bg-gray-800/50 rounded-xl border border-gray-700 overflow-hidden",onDragOver:F=>{te&&(F.preventDefault(),F.stopPropagation())},onDrop:F=>{F.preventDefault(),F.stopPropagation(),ue(f.id)},children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-800/70 border-b border-gray-700",style:{borderLeft:`4px solid ${f.color}`},children:[t.jsx("button",{onClick:()=>K(f.id),className:"p-1 hover:bg-gray-700 rounded transition-colors text-gray-400 hover:text-white",children:re?t.jsx(ot,{size:16}):t.jsx(rt,{size:16})}),t.jsx("div",{className:"w-4 h-4 rounded-full border border-white/20 flex-shrink-0",style:{backgroundColor:f.color}}),ne===f.id?t.jsx("input",{type:"text",value:oe,onChange:F=>ee(F.target.value),onBlur:()=>g(f.id),onKeyDown:F=>{F.key==="Enter"?g(f.id):F.key==="Escape"&&D()},className:"flex-1 bg-gray-700 text-white px-2 py-1 rounded text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0}):t.jsx("button",{onClick:()=>G(f),className:"flex-1 text-left text-sm font-semibold text-white hover:text-purple-400 transition-colors",children:f.name}),t.jsxs("span",{className:"text-xs text-gray-400",children:[q.length," tab",q.length!==1?"s":""]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>ce(f),className:"p-1.5 hover:bg-gray-700 rounded transition-colors text-gray-400 hover:text-white",title:"Change color",children:t.jsx(Nt,{size:14})}),t.jsx("button",{onClick:()=>G(f),className:"p-1.5 hover:bg-gray-700 rounded transition-colors text-gray-400 hover:text-white",title:"Rename",children:t.jsx(Ct,{size:14})}),t.jsx("button",{onClick:()=>Y(f.id),className:"p-1.5 hover:bg-red-500/20 rounded transition-colors text-gray-400 hover:text-red-400",title:"Delete group",children:t.jsx(nr,{size:14})})]})]}),!re&&t.jsx(ke,{children:t.jsx("div",{className:"p-3 space-y-2",children:q.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500 text-sm",children:[t.jsx("p",{children:"No tabs in this group"}),t.jsx("p",{className:"text-xs mt-1",children:"Drag tabs here to add them"})]}):q.map(F=>t.jsxs(T.div,{layout:!0,draggable:!0,onDragStart:()=>m(F.id),onDragEnd:()=>m(null),className:"flex items-center gap-3 px-3 py-2 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors cursor-move",children:[t.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:f.color}}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-white truncate",children:F.title||"Untitled"}),t.jsx("p",{className:"text-xs text-gray-400 truncate",children:F.url||"about:blank"})]}),t.jsx("button",{onClick:()=>I(F.id,null),className:"p-1 hover:bg-gray-600 rounded transition-colors text-gray-400 hover:text-white",title:"Remove from group",children:t.jsx(Ve,{size:14})})]},F.id))})})]},f.id)}),se.length>0&&t.jsxs(T.div,{layout:!0,className:"bg-gray-800/50 rounded-xl border border-gray-700 overflow-hidden",onDragOver:f=>{te&&(f.preventDefault(),f.stopPropagation())},onDrop:f=>{f.preventDefault(),f.stopPropagation(),ue(null)},children:[t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-800/70 border-b border-gray-700",children:[t.jsx(Ye,{className:"w-4 h-4 text-gray-400"}),t.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:"Ungrouped Tabs"}),t.jsxs("span",{className:"text-xs text-gray-500",children:[se.length," tab",se.length!==1?"s":""]})]}),t.jsx("div",{className:"p-3 space-y-2",children:se.map(f=>t.jsxs(T.div,{layout:!0,draggable:!0,onDragStart:()=>m(f.id),onDragEnd:()=>m(null),className:"flex items-center gap-3 px-3 py-2 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors cursor-move",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-white truncate",children:f.title||"Untitled"}),t.jsx("p",{className:"text-xs text-gray-400 truncate",children:f.url||"about:blank"})]}),t.jsx("button",{onClick:()=>{if(c.length>0)I(f.id,c[0].id);else{const q=h({});I(f.id,q.id)}},className:"p-1 hover:bg-gray-600 rounded transition-colors text-gray-400 hover:text-purple-400",title:"Add to group",children:t.jsx(kt,{size:14})})]},f.id))})]})]})})]})})})}):null}const Cr=or,kr=ar,Ir=s.forwardRef(({className:n,inset:i,children:o,...c},h)=>t.jsxs(Dt,{ref:h,className:ge("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-800/60 data-[state=open]:bg-slate-800/60",i&&"pl-8",n),...c,children:[o,t.jsx(ot,{className:"ml-auto h-4 w-4"})]}));Ir.displayName=Dt.displayName;const Ar=s.forwardRef(({className:n,...i},o)=>t.jsx(Pt,{ref:o,className:ge("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-800/70 bg-slate-950/90 p-1 text-sm shadow-lg backdrop-blur-xl",n),...i}));Ar.displayName=Pt.displayName;const Lt=s.forwardRef(({className:n,sideOffset:i=8,...o},c)=>t.jsx(sr,{children:t.jsx(It,{ref:c,sideOffset:i,className:ge("z-50 min-w-[10rem] overflow-hidden rounded-xl border border-white/8 bg-slate-950/95 p-1 text-sm shadow-xl backdrop-blur-xl",n),...o})}));Lt.displayName=It.displayName;const Ze=s.forwardRef(({className:n,inset:i,...o},c)=>t.jsx(Rt,{ref:c,className:ge("relative flex cursor-default select-none items-center rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-800/60 focus:text-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i&&"pl-8",n),...o}));Ze.displayName=Rt.displayName;const Sr=s.forwardRef(({className:n,children:i,checked:o,...c},h)=>t.jsxs(Et,{ref:h,className:ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-800/60 focus:text-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:o,...c,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Mt,{children:t.jsx(jt,{className:"h-4 w-4"})})}),i]}));Sr.displayName=Et.displayName;const Rr=s.forwardRef(({className:n,children:i,...o},c)=>t.jsxs(Gt,{ref:c,className:ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-800/60 focus:text-slate-50 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Mt,{children:t.jsx(ir,{className:"h-2 w-2 fill-current"})})}),i]}));Rr.displayName=Gt.displayName;const Ot=s.forwardRef(({className:n,inset:i,...o},c)=>t.jsx(At,{ref:c,className:ge("px-2 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",i&&"pl-8",n),...o}));Ot.displayName=At.displayName;const et=s.forwardRef(({className:n,...i},o)=>t.jsx(St,{ref:o,className:ge("-mx-1 my-1 h-px bg-slate-800/60",n),...i}));et.displayName=St.displayName;const st="regen:tabs:resurrection",tt=3e5,Dr=20;function yt(n,i){try{const o=it(),c={id:n.id,title:n.title,url:n.url,appMode:n.appMode,mode:n.mode,containerId:n.containerId,containerName:n.containerName,containerColor:n.containerColor,groupId:n.groupId,history:n.history,historyIndex:n.historyIndex,savedAt:Date.now(),crashReason:i},h=o.filter(U=>U.id!==n.id),k=[c,...h].slice(0,Dr);localStorage.setItem(st,JSON.stringify(k))}catch(o){console.warn("[TabResurrection] Failed to save tab:",o)}}function it(){try{const n=localStorage.getItem(st);if(!n)return[];const i=JSON.parse(n);return Array.isArray(i)?i:[]}catch(n){return console.warn("[TabResurrection] Failed to load resurrectable tabs:",n),[]}}async function Pr(n){try{const{ipc:i}=await ur(async()=>{const{ipc:k}=await import("./core-ai-yFIunLTZ.js").then(U=>U.U);return{ipc:k}},__vite__mapDeps([0,1,2,3,4,5,6])),o=B.getState(),c=await i.tabs.create({url:n.url||"about:blank",containerId:n.containerId||void 0}),h=typeof c=="object"&&c&&"id"in c?String(c.id):String(c);return setTimeout(()=>{o.updateTab(h,{appMode:n.appMode,containerId:n.containerId,containerName:n.containerName,containerColor:n.containerColor,mode:n.mode,title:n.title,url:n.url,history:n.history,historyIndex:n.historyIndex}),o.setActive(h)},75),Er(n.id),!0}catch(i){return console.error("[TabResurrection] Failed to resurrect tab:",i),!1}}function Er(n){try{const o=it().filter(c=>c.id!==n);localStorage.setItem(st,JSON.stringify(o))}catch(i){console.warn("[TabResurrection] Failed to delete resurrectable tab:",i)}}function Mr(){const n=it(),i=Date.now(),o=3e5;return n.filter(c=>i-c.savedAt<o)}function vt(n=tt){setTimeout(()=>{const i=Mr();i.length>0&&(console.log(`[TabResurrection] Auto-resurrecting ${i.length} tabs`),i.forEach(o=>{Pr(o).catch(c=>{console.error("[TabResurrection] Failed to auto-resurrect:",c)})}))},n)}const Je="application/x-regen-tab-id",M=pr(),Te=fr(),Qe="__new-tab-group__",H=n=>{n?.stopPropagation?.(),n?.nativeEvent?.stopImmediatePropagation?.()},xe=(n,i,o=void 0)=>{try{if(n==null||typeof n!="object"||!(i in n))return o;const c=n[i];return c??o}catch{return o}},pe=(n,i,o="")=>{try{const c=xe(n,i);return typeof c=="string"?c:o}catch{return o}},wt=(n,i)=>{try{const o=xe(n,i);return typeof o=="number"?o:void 0}catch{return}},Z=n=>{try{if(!Array.isArray(n))return[];const i=[];for(const o of n)try{if(o==null||typeof o!="object")continue;const c=pe(o,"id");if(!c||c.length===0)continue;const h={id:c,title:pe(o,"title","Untitled"),active:!!xe(o,"active",!1),url:pe(o,"url","about:blank"),mode:xe(o,"mode")==="ghost"||xe(o,"mode")==="private"?xe(o,"mode"):"normal",containerId:pe(o,"containerId"),containerColor:pe(o,"containerColor"),containerName:pe(o,"containerName"),createdAt:wt(o,"createdAt"),lastActiveAt:wt(o,"lastActiveAt"),sessionId:pe(o,"sessionId"),profileId:pe(o,"profileId"),sleeping:!!xe(o,"sleeping",!1),pinned:!!xe(o,"pinned",!1),groupId:pe(o,"groupId")};i.push(h)}catch(c){M&&console.warn("[TabStrip] Failed to map tab item:",o,c);continue}return i}catch(i){return M&&console.error("[TabStrip] mapTabsForStore error:",i,n),[]}};function Gr(){xr();const n=B(e=>e.setAll),i=B(e=>e.setActive),o=B(e=>e.activeId),c=B(e=>e.tabs),h=Array.isArray(c)?c:[],k=B(e=>e.updateTab),U=B(e=>e.rememberClosedTab),I=_e(e=>e.open),K=B(e=>e.recentlyClosed),$=B(e=>e.togglePinTab),ne=B(e=>e.tabGroups),W=B(e=>e.createGroup),oe=B(e=>e.deleteGroup),ee=B(e=>e.toggleGroupCollapsed),te=B(e=>e.setGroupColor),m=B(e=>e.assignTabToGroup),x=B(e=>e.updateGroup),{activeContainerId:L}=at(),{mode:G}=zt(),[g,D]=s.useState([]),[Y,ce]=s.useState([]),[ue,se]=s.useState([]),[f,q]=s.useState(null),[re,F]=s.useState(null),[ze,He]=s.useState(null),[Ie,he]=s.useState({platform:"desktop",lastSentAt:null}),[$e,Ae]=s.useState(!1),[J,Se]=s.useState(null),[l,z]=s.useState(!1),ye=s.useRef(!1),ae=s.useRef(!1),ie=s.useRef(""),O=s.useRef(null),Re=s.useRef(null),j=s.useRef(g),De=s.useRef(),[Fe,ve]=s.useState(null),Be=s.useMemo(()=>{const e=new Map;return ne.forEach(a=>{e.set(a.id,a)}),e},[ne]),Ue=s.useCallback(e=>{const a=window.prompt("Rename group",e.name);if(!a)return;const d=a.trim();!d||d===e.name||x(e.id,{name:d})},[x]),lt=s.useCallback(e=>{const a=Ce.findIndex(u=>u===e.color),d=Ce[(a+1)%Ce.length];te(e.id,d)},[te]);s.useCallback(e=>{window.confirm(`Remove group "${e.name}"? Tabs will remain open.`)&&oe(e.id)},[oe]);const ct=s.useCallback(e=>{Q.current&&(m(Q.current,e),Q.current=null,me.current=null,ve(null))},[m]),dt=s.useCallback((e,a)=>{Q.current&&(e.preventDefault(),e.stopPropagation(),ve(a))},[]),ut=s.useCallback(e=>{ve(a=>a===e?null:a)},[]);s.useCallback(e=>W({name:e}),[W]);const _t=s.useCallback(()=>{if(!Q.current)return;const e=W({});m(Q.current,e.id),Q.current=null,me.current=null,ve(null)},[m,W]),le=s.useMemo(()=>{try{if(!Array.isArray(h))return[];const e=h.filter(a=>{try{return a!=null&&typeof a=="object"&&typeof a.id=="string"&&a.id.length>0}catch{return!1}});return e.length===0?[]:e.filter(a=>{try{return!a.appMode||a.appMode===G}catch{return!0}})}catch(e){return M&&console.error("[TabStrip] filteredTabs error:",e),[]}},[h,G]),Ke=s.useCallback(e=>{const a=le.filter(d=>d.groupId===e.id);return t.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-xs font-semibold ${Fe===e.id?"border-blue-500/70 bg-blue-500/10 text-blue-200":"border-gray-700/60 bg-gray-800/80 text-gray-200"}`,style:{borderLeft:`3px solid ${e.color}`},onDragOver:d=>dt(d,e.id),onDragLeave:()=>ut(e.id),onDrop:d=>{d.preventDefault(),d.stopPropagation(),ct(e.id)},children:[t.jsx("button",{type:"button",onClick:d=>{H(d),ee(e.id)},onMouseDown:d=>{H(d)},className:"p-1 rounded hover:bg-gray-700/60 transition-colors text-gray-300 hover:text-white",style:{zIndex:10011,isolation:"isolate"},title:e.collapsed?"Expand group":"Collapse group",children:e.collapsed?t.jsx(ot,{size:14}):t.jsx(rt,{size:14})}),t.jsx("div",{className:"w-3 h-3 rounded-full border border-white/30 flex-shrink-0",style:{backgroundColor:e.color},title:`Group color: ${e.color}`}),t.jsx("button",{type:"button",onClick:d=>{H(d),Ue(e)},onMouseDown:d=>{H(d)},className:"text-[11px] font-semibold text-gray-100 hover:text-white truncate min-w-[60px]",style:{zIndex:10011,isolation:"isolate"},title:"Rename group",children:e.name}),t.jsxs("span",{className:"text-[10px] text-gray-400 ml-1",children:["(",a.length,")"]}),t.jsxs("div",{className:"flex items-center gap-0.5 ml-auto",children:[t.jsx("button",{type:"button",onClick:d=>{H(d),lt(e)},onMouseDown:d=>{H(d)},className:"p-1 rounded hover:bg-gray-700/60 text-gray-400 hover:text-white transition-colors opacity-0 group-hover:opacity-100",style:{zIndex:10011,isolation:"isolate"},title:"Change color",children:t.jsx(Nt,{size:12})}),t.jsx("button",{type:"button",onClick:d=>{H(d),Ue(e)},onMouseDown:d=>{H(d)},className:"p-1 rounded hover:bg-gray-700/60 text-gray-400 hover:text-white transition-colors opacity-0 group-hover:opacity-100",style:{zIndex:10011,isolation:"isolate"},title:"Rename group",children:t.jsx(Ct,{size:12})})]})]},`group-${e.id}`)},[le,Fe,dt,ut,ct,ee,Ue,lt,Ae]),je=s.useCallback(async()=>{if(Te)try{const e=await A.tabs.list();if(!Array.isArray(e)){M&&console.warn("[TabStrip] refreshTabsFromMain: Invalid tab list",e);return}M&&console.log("[TabStrip] refreshTabsFromMain: Got",e.length,"tabs");const a=e.map(r=>{const p=c.find(y=>y.id===r.id),b=p?.appMode||G,P=p?.pinned??!!r.pinned,_=p?.groupId??r.groupId;return{id:r.id,title:r.title||"New Tab",url:r.url||"about:blank",active:r.active||!1,mode:r.mode||"normal",appMode:b,containerId:r.containerId,containerName:r.containerName,containerColor:r.containerColor,createdAt:r.createdAt,lastActiveAt:r.lastActiveAt,sessionId:r.sessionId,profileId:r.profileId,sleeping:!!r.sleeping,pinned:P,groupId:_}}),d=a.map(r=>r.id).sort().join(",");ie.current=d,D(a),j.current=a,n(Z(a));const u=a.find(r=>r.active);if(u)i(u.id),O.current=u.id;else if(a.length>0){const r=a[0];if(r){i(r.id),O.current=r.id;try{await A.tabs.activate({id:r.id})}catch{}}}else i(null),O.current=null;De.current?.()}catch(e){M&&console.error("[TabStrip] Failed to refresh tabs from main process:",e)}},[i,n,c,G,D]),fe=s.useCallback(async e=>{if(!Te){const u=j.current.length>0?j.current:g;if(!u.find(b=>b.id===e))return;const p=u.map(b=>({...b,active:b.id===e}));D(p),j.current=p,ie.current=p.map(b=>b.id).sort().join(","),n(Z(p)),i(e),O.current=e,we.emit("tabs:updated",Z(p));return}if(Re.current===e||O.current===e&&o===e)return;if(!(j.current.length>0?j.current:g).find(u=>u.id===e)){M&&console.warn("[TabStrip] Tab not found for activation:",e);return}Re.current=e,i(e),O.current=e,A.tabs.activate({id:e}).then(u=>{(!u||!u.success)&&(M&&console.warn("[TabStrip] Tab activation failed:",e,u?.error),je().catch(()=>{})),Re.current=null}).catch(u=>{M&&console.error("[TabStrip] Tab activation error:",u),je().catch(()=>{}),Re.current=null})},[o,i,n,je,g,D]),Pe=async e=>{if(!Te){const y=j.current.length>0?j.current:g,V=y.findIndex(E=>E.id===e);if(V===-1)return;const Me=y[V];Me&&(U(Me),yt(Me),vt(tt));const N=y[V]?.active,R=y.filter(E=>E.id!==e);let v=R;if(R.length===0)v=[{id:`local-${Date.now()}`,title:"New Tab",url:"about:blank",active:!0,mode:"normal"}];else if(N){let E=V;E>=R.length&&(E=R.length-1),v=R.map((w,C)=>({...w,active:C===E}))}const X=v.find(E=>E.active)??v[0];D(v),j.current=v,ie.current=v.map(E=>E.id).sort().join(","),n(Z(v)),i(X?X.id:null),O.current=X?X.id:null,we.emit("tabs:updated",Z(v));return}if(ae.current)return;const a=j.current.length>0?j.current:g,d=a.find(y=>y.id===e);if(!d)return;U(d),yt(d),vt(tt);const u=d.active,r=a.findIndex(y=>y.id===e),p=a.filter(y=>y.id!==e),b=p.length===0,P=a.map(y=>({...y})),_=O.current;if(D(p),j.current=p,ie.current=p.map(y=>y.id).sort().join(","),n(Z(p)),u&&p.length>0){let y=r;y>=p.length&&(y=p.length-1);const V=p[y];V&&(i(V.id),O.current=V.id)}else p.length===0&&(i(null),O.current=null);M&&console.log("[TabStrip] Closing tab (optimistic):",e,"previous active:",_);try{const y=await Promise.race([A.tabs.close({id:e}),new Promise(V=>setTimeout(()=>V({success:!1,error:"Timeout"}),2e3))]);M&&console.log("[TabStrip] tabs.close result:",y),!y||!y.success?(M&&console.warn("[TabStrip] Tab close failed or timed out, reverting:",e,y?.error),D(P),j.current=P,ie.current=P.map(V=>V.id).sort().join(","),n(Z(P)),_&&(i(_),O.current=_),await je()):b&&setTimeout(()=>{We()},50)}catch(y){M&&console.error("[TabStrip] Tab close error:",y),D(P),j.current=P,ie.current=P.map(V=>V.id).sort().join(","),n(Z(P)),_&&(i(_),O.current=_),await je()}},Le=s.useCallback(e=>{const a=e.groupId?Be.get(e.groupId):null,d=a?{boxShadow:`inset 0 0 0 1px ${a.color}40`}:void 0,u=ue.find(r=>r.tabId===e.id);return t.jsx(yr,{tabId:e.id,children:t.jsxs(T.div,{id:`tab-${e.id}`,"data-tab":e.id,role:"tab","aria-selected":e.active,"aria-controls":`tabpanel-${e.id}`,"aria-label":`Tab: ${e.title||"Untitled"}${e.mode==="ghost"?" (Ghost tab)":e.mode==="private"?" (Private tab)":""}${e.sleeping?" (Hibernating)":""}${a?` (Group: ${a.name})`:""}`,tabIndex:e.active?0:-1,layout:!1,initial:!1,animate:!1,exit:!1,className:`
            relative flex items-center gap-2 ${e.pinned?"px-2 py-1.5":"px-4 py-2"} rounded-lg
            ${e.pinned?"min-w-[40px] max-w-[40px]":"min-w-[100px] max-w-[220px]"} cursor-pointer group
            transition-all duration-200
            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
            ${e.active?"bg-purple-600/20 border border-purple-500/40 shadow-lg shadow-purple-500/20":"bg-gray-800/30 hover:bg-gray-800/50 border border-transparent"}
            ${e.mode==="ghost"?"ring-1 ring-purple-500/40":""}
            ${e.mode==="private"?"ring-1 ring-emerald-500/40":""}
            ${e.sleeping?"ring-1 ring-amber-400/40":""}
            ${e.pinned?"border-l-2 border-l-blue-500":""}
          `,style:{pointerEvents:"auto",zIndex:1,userSelect:"none",...d,...a?{borderLeft:`2px solid ${a.color}`}:{}},draggable:!0,onDragStart:r=>{try{r.ctrlKey||r.metaKey?(r.dataTransfer?.setData(Je,e.id),e.title&&r.dataTransfer?.setData("text/plain",e.title),r.dataTransfer&&(r.dataTransfer.effectAllowed="copy")):(Q.current=e.id,r.dataTransfer&&(r.dataTransfer.effectAllowed="move"))}catch(p){M&&console.warn("[TabStrip] Drag start failed",p)}},onDragEnd:()=>{Q.current===null&&window.dispatchEvent(new CustomEvent("tabgraph:dragend")),Q.current=null,me.current=null,ve(null)},onClick:r=>{r.preventDefault(),H(r),fe(e.id)},onKeyDown:r=>{if(r.key==="Enter"||r.key===" "){r.preventDefault(),r.stopPropagation(),fe(e.id);return}if(["ArrowLeft","ArrowRight","Home","End"].includes(r.key)){if(r.preventDefault(),r.stopPropagation(),!le||!Array.isArray(le))return;const p=le.filter(y=>y&&y.id),b=p.findIndex(y=>y.id===e.id);if(b===-1)return;let P=b;switch(r.key){case"Home":P=0;break;case"End":P=p.length-1;break;case"ArrowLeft":P=(b-1+p.length)%p.length;break;case"ArrowRight":P=(b+1)%p.length;break}const _=p[P];_&&_.id&&fe(_.id)}},onAuxClick:r=>{r.button===1&&(r.preventDefault(),H(r),Pe(e.id))},onContextMenu:r=>{r.preventDefault(),window.__lastContextMenuPos={x:r.clientX,y:r.clientY},Se({tabId:e.id,url:e.url,containerId:e.containerId,containerName:e.containerName,containerColor:e.containerColor,mode:e.mode,sleeping:e.sleeping,x:r.clientX,y:r.clientY})},onMouseEnter:()=>{if(!le||!Array.isArray(le))return;const r=le.filter(p=>p&&p.id);r.length>0&&e===r[r.length-1]&&F(e.id)},onMouseLeave:()=>{re===e.id&&F(null)},children:[u&&t.jsx("span",{className:"absolute top-1 right-2 text-emerald-300 text-[11px] font-semibold",title:`Suggested follow-up: ${u.reason}`,children:"âš¡"}),ze!==!1&&re===e.id&&t.jsxs(T.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},className:"absolute -bottom-9 left-1/2 flex -translate-x-1/2 items-center gap-2",children:[t.jsxs(T.button,{type:"button",className:"flex items-center gap-1 rounded-full border border-cyan-400/40 bg-cyan-500/15 px-3 py-1 text-[10px] text-cyan-100 shadow-lg backdrop-blur transition-colors hover:bg-cyan-500/25",onClick:r=>{r.preventDefault(),r.stopPropagation(),he({platform:"xr",lastSentAt:Date.now()}),window.dispatchEvent(new CustomEvent("tab:holographic-preview",{detail:{tabId:e.id}})),A.crossReality.handoff(e.id,"xr")},children:[t.jsx(lr,{size:12})," XR Hologram"]}),t.jsxs(T.button,{type:"button",className:"flex items-center gap-1 rounded-full border border-amber-400/40 bg-amber-500/15 px-2.5 py-1 text-[10px] text-amber-100 shadow-lg backdrop-blur transition-colors hover:bg-amber-500/25",onClick:r=>{r.preventDefault(),r.stopPropagation(),he({platform:"mobile",lastSentAt:Date.now()}),A.crossReality.handoff(e.id,"mobile")},children:[t.jsx("span",{role:"img","aria-label":"mobile",children:"ðŸ“±"})," ","Send"]})]}),t.jsx("div",{className:"flex-shrink-0 w-4 h-4 bg-gray-600 rounded-full flex items-center justify-center",children:e.favicon?t.jsx("img",{src:e.favicon,alt:"",className:"w-full h-full rounded-full"}):t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"})}),e.mode&&e.mode!=="normal"&&t.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-[10px] font-medium border ${e.mode==="ghost"?"bg-purple-500/20 text-purple-200 border-purple-400/40":"bg-emerald-500/20 text-emerald-200 border-emerald-400/40"}`,children:e.mode==="ghost"?"Ghost":"Private"}),e.containerId&&e.containerId!=="default"&&t.jsx("div",{className:"w-2.5 h-2.5 rounded-full border border-gray-700/60",style:{backgroundColor:e.containerColor||"#6366f1"},title:`${e.containerName||"Custom"} container`}),a&&t.jsx("span",{className:"w-2 h-2 rounded-full border border-white/20",style:{backgroundColor:a.color},title:`Group: ${a.name}`}),e.sleeping&&t.jsx("span",{className:"flex items-center",title:"Tab is hibernating",children:t.jsx(T.span,{className:"w-2 h-2 rounded-full bg-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.55)]",animate:{scale:[1,1.25,1],opacity:[.7,1,.7]},transition:{repeat:1/0,duration:1.8,ease:"easeInOut"}})}),!e.pinned&&t.jsx("span",{className:`flex-1 text-sm truncate ${e.active?"text-gray-100":"text-gray-400"}`,children:e.title}),t.jsx(T.button,{type:"button",onClick:r=>{r.preventDefault(),H(r),$(e.id)},onMouseDown:r=>{H(r)},"aria-label":e.pinned?`Unpin tab: ${e.title}`:`Pin tab: ${e.title}`,className:`${e.pinned?"opacity-100":"opacity-0 group-hover:opacity-100"} p-0.5 rounded hover:bg-gray-700/50 transition-opacity text-gray-400 hover:text-blue-400 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 no-drag ml-1`,style:{pointerEvents:"auto",zIndex:10011,isolation:"isolate"},whileHover:{scale:1.05},whileTap:{scale:.96},title:e.pinned?"Unpin tab":"Pin tab",children:e.pinned?t.jsx(cr,{size:14,className:"text-blue-400"}):t.jsx(dr,{size:14})}),!e.pinned&&t.jsx(T.button,{type:"button",onClick:r=>{r.preventDefault(),H(r),I(e)},onMouseDown:r=>{H(r)},"aria-label":`Peek preview: ${e.title}`,className:"opacity-0 group-hover:opacity-100 p-0.5 rounded hover:bg-gray-700/50 transition-opacity text-gray-400 hover:text-gray-100 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 no-drag ml-1",style:{pointerEvents:"auto",zIndex:10011,isolation:"isolate"},whileHover:{scale:1.05},whileTap:{scale:.96},title:"Peek preview",children:t.jsx(Tt,{size:14})}),!e.pinned&&t.jsx(T.button,{type:"button",onClick:r=>{r.preventDefault(),H(r),Pe(e.id)},onAuxClick:r=>{r.button===1&&(r.preventDefault(),H(r),Pe(e.id))},onMouseDown:r=>{H(r)},onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),r.stopPropagation(),Pe(e.id))},"aria-label":`Close tab: ${e.title}`,className:"opacity-0 group-hover:opacity-100 p-0.5 rounded hover:bg-gray-700/50 transition-opacity ml-1 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 no-drag",style:{pointerEvents:"auto",zIndex:2},whileHover:{scale:1.1},whileTap:{scale:.9},title:"Close tab (Middle click)",children:t.jsx(Ve,{size:14,className:"text-gray-400"})})]})},e.id)},[Be,ue,le,re,ze,fe,Pe,$,I]),pt=s.useMemo(()=>{if(!Ke||!Le)return[];const e=[],a=new Set,d=new Map;return le.forEach(r=>{const p=r.groupId||"ungrouped";d.has(p)||d.set(p,[]),d.get(p).push(r)}),ne.forEach(r=>{const p=d.get(r.id)||[];if(p.length>0&&!a.has(r.id)){a.add(r.id);try{e.push(Ke(r)),r.collapsed||p.forEach(b=>{try{e.push(Le(b))}catch(P){console.error("[TabStrip] Error rendering tab:",P,b)}})}catch(b){console.error("[TabStrip] Error rendering group:",b,r)}}}),(d.get("ungrouped")||[]).forEach(r=>{try{e.push(Le(r))}catch(p){console.error("[TabStrip] Error rendering ungrouped tab:",p,r)}}),e},[le,ne,Be,Ke,Le]),de=s.useRef(null),Ee=s.useRef(null),ft=s.useRef(""),Q=s.useRef(null),me=s.useRef(null);s.useEffect(()=>{O.current=o},[o]);const mt=s.useCallback(async e=>{if(!Te){e?.force&&(ce([]),se([]),q(null));return}if(Ee.current&&!e?.force)return Ee.current;const a=j.current.map(u=>`${u.id}:${u.lastActiveAt??0}`).sort().join("|");if(!e?.force&&a&&a===ft.current&&Y.length>0)return;const d=(async()=>{try{const u=await A.tabs.predictiveGroups(e?.force?{force:!0}:{});if(ft.current=a,!u){ce([]),se([]),q(null);return}ce(Array.isArray(u.groups)?u.groups:[]),se(Array.isArray(u.prefetch)?u.prefetch:[]),q(u.summary?.explanation??null)}catch(u){M&&console.warn("[TabStrip] Predictive suggestions failed",u),e?.force&&(ce([]),se([]),q(null))}finally{Ee.current===d&&(Ee.current=null)}})();return Ee.current=d,d},[Y.length]);s.useEffect(()=>{De.current=mt},[mt]),s.useEffect(()=>{l&&De.current?.({force:!0})},[l]),s.useEffect(()=>{(()=>{const a=typeof navigator<"u"&&"xr"in navigator;He(a),a&&he(d=>({...d,platform:"xr-ready"}))})()},[]),s.useEffect(()=>{Ie.lastSentAt&&A.crossReality.sendHandoffStatus(Ie)},[Ie]),s.useEffect(()=>{if(!Te){let N=!0;const R=X=>{if(!N)return;const E=X.length?X:[{id:"local-initial",title:"Welcome",url:"about:blank",active:!0,mode:"normal"}];D(E),j.current=E,ie.current=E.map(C=>C.id).sort().join(","),n(Z(E));const w=E.find(C=>C.active)??E[0];i(w?w.id:null),O.current=w?w.id:null,z(!0)};R(j.current.length>0?j.current:g);const v=we.on("tabs:updated",X=>{if(!N)return;if(!Array.isArray(X)||X.length===0){R([]);return}const E=X.map(w=>{const C=c.find(Xe=>Xe.id===w.id),S=C?.appMode||G,Ne=C?.pinned??!!w.pinned,Ge=C?.groupId??w.groupId;return{id:w.id,title:w.title||"New Tab",url:w.url||"about:blank",active:!!w.active,appMode:S,mode:w.mode||"normal",containerId:w.containerId,containerName:w.containerName,containerColor:w.containerColor,createdAt:w.createdAt,lastActiveAt:w.lastActiveAt,sessionId:w.sessionId,profileId:w.profileId,sleeping:w.sleeping,pinned:Ne,groupId:Ge}});R(E)});return()=>{N=!1,v()}}let e=!0,a=!1;const d=()=>new Promise(N=>{if(window.ipc&&typeof window.ipc.invoke=="function"){a=!0,N();return}const R=()=>{window.ipc&&typeof window.ipc.invoke=="function"&&(a=!0,N())};window.addEventListener("ipc:ready",R,{once:!0});const v=setInterval(()=>{window.ipc&&typeof window.ipc.invoke=="function"&&(clearInterval(v),a=!0,N())},100);setTimeout(()=>{clearInterval(v),a||(console.warn("IPC not ready after 5 seconds, proceeding anyway"),N())},5e3)}),u=async(N=!1)=>{if(e&&!(ae.current&&!N)&&(a||await d(),!!e))try{const R=await A.tabs.list();if(!e)return;if(Array.isArray(R)&&R.length>0){const v=R.map(C=>{const Ne=c.find(Ge=>Ge.id===C.id)?.appMode||G;return{id:C.id,title:C.title||"New Tab",url:C.url||"about:blank",active:C.active||!1,mode:C.mode||"normal",appMode:Ne,containerId:C.containerId,containerName:C.containerName,containerColor:C.containerColor,createdAt:C.createdAt,lastActiveAt:C.lastActiveAt,sessionId:C.sessionId,profileId:C.profileId}}),X=v.map(C=>C.id).sort().join(",");ie.current!==X&&(ie.current=X,D(v),n(Z(v)));const E=v.find(C=>C.active),w=O.current;E&&E.id!==w?i(E.id):v.length>0&&!E&&v[0]&&v[0].id!==w&&(await A.tabs.activate({id:v[0].id}),i(v[0].id)),N&&z(!0)}else N&&!l&&!ye.current&&!ae.current?setTimeout(async()=>{if(!(!e||l||ye.current||ae.current)){try{const v=await A.tabs.list();if(Array.isArray(v)&&v.length>0){z(!0);return}}catch{}ae.current=!0,z(!0);try{(!window.ipc||typeof window.ipc.invoke!="function")&&await new Promise(X=>setTimeout(X,200));const v=await A.tabs.create("about:blank");v&&v.id&&M&&console.log("[TabStrip] Initial tab created after wait:",v.id)}catch(v){M&&console.error("[TabStrip] Failed to create initial tab:",v)}finally{setTimeout(()=>{ae.current=!1},1e3)}}},300):e&&(D([]),n([]),i(null),l||z(!0))}catch{N&&e&&!l&&z(!0)}},r=N=>{e&&(ye.current=N)},p=we.on("session:restoring",r),b=async N=>{if(!(!e||ae.current)){ae.current=!0;try{await A.tabs.create({url:N.url||"about:blank",containerId:N.containerId,mode:N.mode,profileId:N.profileId,tabId:N.id,activate:!!N.activate,createdAt:N.createdAt,lastActiveAt:N.lastActiveAt,sessionId:N.sessionId,fromSessionRestore:!0})}catch(R){M&&console.error("Failed to restore tab from session:",R)}finally{setTimeout(()=>{ae.current=!1},500)}}},P=we.on("session:restore-tab",b),_=setTimeout(()=>{u(!0)},100),y=N=>{if(!e)return;if(!Array.isArray(N)){M&&console.warn("[TabStrip] handleTabUpdate: Invalid data",{tabList:N});return}const R=N.map(S=>{const Ge=c.find(Xe=>Xe.id===S.id)?.appMode||G;return{id:S.id,title:S.title||"New Tab",url:S.url||"about:blank",active:S.active||!1,containerId:S.containerId,containerName:S.containerName,containerColor:S.containerColor,mode:S.mode,appMode:Ge,createdAt:S.createdAt,lastActiveAt:S.lastActiveAt,sessionId:S.sessionId,profileId:S.profileId,sleeping:!!S.sleeping}}),v=R.map(S=>S.id).sort().join(","),X=ie.current,w=R.find(S=>S.active)?.id||null;if(v===X&&w===O.current){j.current=R;return}const C=_e.getState();if(C.visible&&C.tab){const S=R.find(Ne=>Ne.id===C.tab?.id);S&&_e.getState().sync(S)}if(D(R),j.current=R,n(Z(R)),ie.current=v,w&&w!==O.current)i(w),O.current=w;else if(R.length>0&&!w){const S=R[0].id;S!==O.current&&(i(S),O.current=S,Te&&A.tabs.activate({id:S}).catch(()=>{}))}else R.length===0&&O.current!==null&&(i(null),O.current=null)},V=we.on("tabs:updated",y),Me=setInterval(()=>{e&&a&&l&&!ae.current&&!Re.current&&u(!1).catch(()=>{})},5e3);return()=>{e=!1,V(),p(),P(),clearInterval(Me),clearTimeout(_)}},[]);const We=async()=>{if(!Te){const e=(j.current.length>0?j.current:g).map(u=>({...u,active:!1})),a={id:`local-${Date.now()}`,title:"New Tab",url:"about:blank",active:!0,mode:"normal"},d=[...e,a];D(d),j.current=d,ie.current=d.map(u=>u.id).sort().join(","),n(Z(d)),i(a.id),O.current=a.id,we.emit("tabs:updated",Z(d));return}if(ae.current){M&&console.log("[TabStrip] Tab creation already in progress, skipping");return}ae.current=!0;try{let e=!1;for(let d=0;d<3;d++){if(window.ipc&&typeof window.ipc.invoke=="function"){e=!0;break}await new Promise(u=>setTimeout(u,200))}e||M&&console.warn("[TabStrip] IPC not ready after retries, but attempting tab creation anyway");const a=await A.tabs.create({url:"about:blank",containerId:L||void 0});if(a&&a.id){const d=typeof a=="object"&&"id"in a?a.id:a;k(d,{appMode:G}),M&&console.log("[TabStrip] Tab created via addTab:",d),setTimeout(async()=>{try{await je()}catch{}},100)}else M&&console.warn("[TabStrip] Tab creation returned no ID:",a)}catch(e){M&&console.error("Failed to create tab:",e)}finally{setTimeout(()=>{ae.current=!1},200)}},bt=s.useCallback(async e=>{await gr(e)},[]),Ht=s.useCallback(e=>{const a=Y.find(b=>b.id===e);if(!a||!a.tabIds.length)return;const u=j.current.filter(b=>a.tabIds.includes(b.id));if(u.length<=1)return;let r="workspace";try{u[0]?.url&&(r=new URL(u[0].url).hostname.replace(/^www\./,"")||"workspace")}catch{r="workspace"}const p=u.length>=3?`${r} cluster`:a.label;A.tabs.create({url:"about:blank",containerId:r,activate:!0}).then(async b=>{if(b?.id){for(const P of u)try{await A.tabs.moveToWorkspace({tabId:P.id,workspaceId:b.id,label:p})}catch(_){M&&console.warn("[TabStrip] Failed to regroup tab",_)}setTimeout(()=>{hr.getState().refresh()},300),De.current?.({force:!0})}})},[Y]),Bt=s.useCallback(e=>{e?.url&&A.tabs.create({url:e.url,activate:!0}).then(()=>{De.current?.({force:!0})})},[]);s.useEffect(()=>{!o||!de.current||requestAnimationFrame(()=>{try{const e=de.current?.querySelector(`[data-tab="${CSS.escape(o)}"]`);e&&e.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})}catch{}})},[o]);const qe=s.useRef(o);s.useEffect(()=>{j.current=g,qe.current=o},[g,o]),s.useEffect(()=>{!de.current||!o||requestAnimationFrame(()=>{const e=de.current?.querySelector(`[data-tab="${CSS.escape(o)}"]`);e&&e.scrollIntoView({block:"nearest",inline:"nearest",behavior:"auto"})})},[o,g.length]),s.useEffect(()=>{if(!de.current||!o)return;const e=de.current.querySelector(`[data-tab="${CSS.escape(o)}"]`);e&&document.activeElement!==e&&e.focus({preventScroll:!0})},[o,g.length]);const Ut=s.useCallback(e=>{if(!["ArrowLeft","ArrowRight","Home","End"].includes(e.key))return;const a=j.current.length>0?j.current:g,d=qe.current||o,u=a.findIndex(b=>b.id===d);if(u===-1||a.length===0)return;e.preventDefault(),e.stopPropagation();let r=u;switch(e.key){case"Home":r=0;break;case"End":r=a.length-1;break;case"ArrowLeft":r=(u-1+a.length)%a.length;break;case"ArrowRight":r=(u+1)%a.length;break}const p=a[r];p&&fe(p.id)},[g,o,fe]);return s.useEffect(()=>{const e=a=>{if(!(navigator.platform.toUpperCase().includes("MAC")?a.metaKey:a.ctrlKey)||a.key!=="Tab")return;const r=j.current,p=qe.current;if(!r.length||!p)return;a.preventDefault();const b=r.findIndex(y=>y.id===p);if(b===-1)return;const P=a.shiftKey?(b-1+r.length)%r.length:(b+1)%r.length,_=r[P];_&&fe(_.id)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[fe]),Array.isArray(h)?t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:de,role:"tablist","aria-label":"Browser tabs",className:"no-drag flex items-center gap-2 px-3 py-2 bg-[#1A1D28] border-b border-gray-700/30 overflow-x-auto scrollbar-hide relative",style:{pointerEvents:"auto",position:"relative",zIndex:9999},onKeyDown:Ut,"data-onboarding":"tabstrip",onDragOver:e=>{if(Q.current&&!e.dataTransfer.types.includes(Je)){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move";const a=de.current?.getBoundingClientRect();if(!a)return;const d=e.clientX-a.left,u=de.current?.querySelectorAll("[data-tab]");if(!u||u.length===0)return;let r=g.length;for(let p=0;p<u.length;p++){const P=u[p].getBoundingClientRect(),_=P.left-a.left+P.width/2;if(d<_){r=p;break}}me.current=r}},onDrop:async e=>{if(Q.current&&!e.dataTransfer.types.includes(Je)){e.preventDefault(),e.stopPropagation();const a=Q.current,d=me.current??g.length-1,u=g.findIndex(b=>b.id===a);if(u===-1||u===d){Q.current=null,me.current=null;return}const r=[...g],[p]=r.splice(u,1);r.splice(d,0,p),D(r),j.current=r,n(Z(r));try{const b=await A.tabs.reorder(a,d);b.success||(D(g),j.current=g,n(Z(g)),M&&console.warn("[TabStrip] Reorder failed:",b.error))}catch(b){D(g),j.current=g,n(Z(g)),M&&console.error("[TabStrip] Reorder error:",b)}Q.current=null,me.current=null}},onDragLeave:e=>{de.current?.contains(e.relatedTarget)||(me.current=null)},children:[t.jsx(jr,{entry:ue[0]??null,onOpen:Bt}),t.jsx(Tr,{clusters:Y,onApply:Ht,summary:f}),t.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",style:{pointerEvents:"auto"},children:[t.jsx(ke,{mode:"popLayout",children:pt.length>0?pt:null}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t.jsxs(T.button,{type:"button",onClick:e=>{H(e),Ae(!0)},onMouseDown:e=>{H(e)},onDragOver:e=>{Q.current&&(e.preventDefault(),e.stopPropagation(),ve(Qe))},onDragLeave:()=>{Fe===Qe&&ve(null)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),_t()},className:`hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm transition-colors ${Fe===Qe?"border-blue-500/70 text-blue-200 bg-blue-500/10":"border-gray-700/40 text-gray-300 hover:bg-gray-800/50"}`,children:[t.jsx(nt,{size:14}),"Group"]}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(vr,{compact:!0,showLabel:!1})}),t.jsxs(Cr,{children:[t.jsx(kr,{asChild:!0,children:t.jsx(T.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:K.length===0,className:`
                    p-2 rounded-lg border transition
                    ${K.length===0?"border-transparent text-gray-600 cursor-not-allowed":"border-gray-700/40 hover:bg-gray-800/50 text-gray-300 hover:text-gray-100"}
                  `,title:K.length===0?"No recently closed tabs":"Reopen closed tab (Ctrl+Shift+T / âŒ˜â‡§T)",children:t.jsx(gt,{size:16})})}),t.jsxs(Lt,{align:"end",className:"w-72",children:[t.jsx(Ot,{children:"Recently closed"}),t.jsx(et,{}),K.length===0?t.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No tabs to reopen"}):K.map(e=>{let a="about:blank";if(e.url)try{a=new URL(e.url).hostname}catch{a=e.url}return t.jsxs(Ze,{className:"flex flex-col items-start gap-1 py-2",onClick:()=>bt(e),children:[t.jsx("span",{className:"text-sm text-slate-100",children:e.title||e.url||"Untitled tab"}),t.jsxs("span",{className:"text-[11px] text-slate-500",children:[a," â€¢ ",new Date(e.closedAt).toLocaleTimeString()]})]},e.closedId)}),t.jsx(et,{}),t.jsxs(Ze,{disabled:K.length===0,onClick:()=>bt(),className:"gap-2",children:[t.jsx(gt,{size:14}),"Reopen last tab"]})]})]}),t.jsx(T.button,{onClick:e=>{H(e),We()},onMouseDown:e=>{H(e)},onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),H(e),We())},"aria-label":"New tab",className:"p-2 rounded-lg hover:bg-gray-800/50 border border-transparent hover:border-gray-700/30 text-gray-400 hover:text-gray-200 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{zIndex:10011,isolation:"isolate"},whileHover:{scale:1.05},whileTap:{scale:.95},title:"New Tab (Ctrl+T / âŒ˜T)",children:t.jsx(kt,{size:18})})]})]}),J&&t.jsx($t,{children:t.jsx(wr,{tabId:J.tabId,url:J.url,containerId:J.containerId??g.find(e=>e.id===J.tabId)?.containerId,containerName:J.containerName??g.find(e=>e.id===J.tabId)?.containerName,containerColor:J.containerColor??g.find(e=>e.id===J.tabId)?.containerColor,mode:J.mode??g.find(e=>e.id===J.tabId)?.mode,sleeping:J.sleeping??g.find(e=>e.id===J.tabId)?.sleeping,onClose:()=>Se(null)})})]}),t.jsx(Nr,{open:$e,onClose:()=>Ae(!1)})]}):null}function dn(){const{mode:n}=zt();return n==="Research"||n==="Trade"?null:t.jsx(Gr,{})}export{Gr as TabStrip,dn as default};
//# sourceMappingURL=TabStrip-DwWt0XPA.js.map
