{"version":3,"file":"formFiller-CRt4dSj3.js","sources":["../../src/core/wispr/formFiller.ts"],"sourcesContent":["/**\n * WISPR Form Auto-Fill System\n * Saves and fills user profile data in forms\n */\n\nexport interface UserProfile {\n  name?: string;\n  email?: string;\n  phone?: string;\n  address?: string;\n  city?: string;\n  state?: string;\n  pincode?: string;\n  country?: string;\n  aadhaar?: string;\n  pan?: string;\n  dob?: string;\n  gender?: string;\n  [key: string]: string | undefined;\n}\n\nconst PROFILE_STORAGE_KEY = 'wispr:userProfile';\n\n/**\n * Save user profile to localStorage\n */\nexport function saveUserProfile(profile: Partial<UserProfile>): void {\n  try {\n    const existing = getUserProfile();\n    const updated = { ...existing, ...profile };\n    localStorage.setItem(PROFILE_STORAGE_KEY, JSON.stringify(updated));\n  } catch (error) {\n    console.error('[WISPR] Failed to save profile:', error);\n    throw new Error('Failed to save profile');\n  }\n}\n\n/**\n * Get saved user profile\n */\nexport function getUserProfile(): UserProfile {\n  try {\n    const saved = localStorage.getItem(PROFILE_STORAGE_KEY);\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (error) {\n    console.warn('[WISPR] Failed to load profile:', error);\n  }\n  return {};\n}\n\n/**\n * Clear saved profile\n */\nexport function clearUserProfile(): void {\n  localStorage.removeItem(PROFILE_STORAGE_KEY);\n}\n\n/**\n * Fill a form with profile data\n */\nexport function fillForm(form: HTMLFormElement, profile: UserProfile): number {\n  let filledCount = 0;\n  const inputs = form.querySelectorAll('input, textarea, select');\n\n  inputs.forEach((input: any) => {\n    const name = input.name?.toLowerCase() || '';\n    const id = input.id?.toLowerCase() || '';\n    const placeholder = input.placeholder?.toLowerCase() || '';\n    const type = input.type?.toLowerCase() || 'text';\n    const label = input.labels?.[0]?.textContent?.toLowerCase() || '';\n\n    // Skip hidden, submit, and button inputs\n    if (type === 'hidden' || type === 'submit' || type === 'button' || type === 'reset') {\n      return;\n    }\n\n    // Match input fields to profile data\n    let value: string | undefined;\n\n    // Name matching\n    if (\n      name.includes('name') ||\n      id.includes('name') ||\n      placeholder.includes('name') ||\n      label.includes('name')\n    ) {\n      value = profile.name;\n    }\n    // Email matching\n    else if (\n      name.includes('email') ||\n      id.includes('email') ||\n      placeholder.includes('email') ||\n      label.includes('email')\n    ) {\n      value = profile.email;\n    }\n    // Phone matching\n    else if (\n      name.includes('phone') ||\n      id.includes('phone') ||\n      placeholder.includes('phone') ||\n      name.includes('mobile') ||\n      label.includes('phone') ||\n      label.includes('mobile')\n    ) {\n      value = profile.phone;\n    }\n    // Address matching\n    else if (\n      name.includes('address') ||\n      id.includes('address') ||\n      placeholder.includes('address') ||\n      label.includes('address')\n    ) {\n      value = profile.address;\n    }\n    // City matching\n    else if (\n      name.includes('city') ||\n      id.includes('city') ||\n      placeholder.includes('city') ||\n      label.includes('city')\n    ) {\n      value = profile.city;\n    }\n    // State matching\n    else if (\n      name.includes('state') ||\n      id.includes('state') ||\n      placeholder.includes('state') ||\n      label.includes('state')\n    ) {\n      value = profile.state;\n    }\n    // Pincode/ZIP matching\n    else if (\n      name.includes('pincode') ||\n      id.includes('pincode') ||\n      placeholder.includes('pincode') ||\n      name.includes('zip') ||\n      name.includes('postal') ||\n      label.includes('pincode') ||\n      label.includes('zip')\n    ) {\n      value = profile.pincode;\n    }\n    // Country matching\n    else if (\n      name.includes('country') ||\n      id.includes('country') ||\n      placeholder.includes('country') ||\n      label.includes('country')\n    ) {\n      value = profile.country;\n    }\n    // Aadhaar matching\n    else if (\n      name.includes('aadhaar') ||\n      id.includes('aadhaar') ||\n      placeholder.includes('aadhaar') ||\n      label.includes('aadhaar') ||\n      name.includes('aadhar')\n    ) {\n      value = profile.aadhaar;\n    }\n    // PAN matching\n    else if (\n      name.includes('pan') ||\n      id.includes('pan') ||\n      placeholder.includes('pan') ||\n      label.includes('pan')\n    ) {\n      value = profile.pan;\n    }\n    // Date of birth matching\n    else if (\n      name.includes('dob') ||\n      id.includes('dob') ||\n      placeholder.includes('dob') ||\n      name.includes('birth') ||\n      label.includes('birth') ||\n      label.includes('dob')\n    ) {\n      value = profile.dob;\n    }\n    // Gender matching\n    else if (\n      name.includes('gender') ||\n      id.includes('gender') ||\n      placeholder.includes('gender') ||\n      label.includes('gender')\n    ) {\n      value = profile.gender;\n    }\n\n    if (value) {\n      // Handle different input types\n      if (input.tagName === 'SELECT') {\n        // Try to find matching option\n        const options = Array.from(input.options) as HTMLOptionElement[];\n        const matchingOption = options.find(\n          opt =>\n            opt.value.toLowerCase() === value.toLowerCase() ||\n            opt.text.toLowerCase().includes(value.toLowerCase())\n        );\n        if (matchingOption) {\n          input.value = matchingOption.value;\n        }\n      } else if (type === 'checkbox' || type === 'radio') {\n        // For checkboxes/radios, check if value matches\n        if (input.value === value || input.value.toLowerCase() === value.toLowerCase()) {\n          input.checked = true;\n        }\n      } else {\n        input.value = value;\n      }\n\n      // Trigger events to notify form handlers\n      input.dispatchEvent(new Event('input', { bubbles: true }));\n      input.dispatchEvent(new Event('change', { bubbles: true }));\n      filledCount++;\n    }\n  });\n\n  return filledCount;\n}\n\n/**\n * Fill all forms on the page\n */\nexport function fillAllForms(profile?: UserProfile): number {\n  const forms = document.querySelectorAll('form');\n  if (forms.length === 0) {\n    return 0;\n  }\n\n  const userProfile = profile || getUserProfile();\n  if (Object.keys(userProfile).length === 0) {\n    return 0;\n  }\n\n  let totalFilled = 0;\n  forms.forEach(form => {\n    totalFilled += fillForm(form as HTMLFormElement, userProfile);\n  });\n\n  return totalFilled;\n}\n"],"names":["PROFILE_STORAGE_KEY","saveUserProfile","profile","updated","getUserProfile","error","saved","fillForm","form","filledCount","input","name","id","placeholder","type","label","value","matchingOption","opt","fillAllForms","forms","userProfile","totalFilled"],"mappings":"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"}