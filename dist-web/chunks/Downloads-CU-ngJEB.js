import{r as d,j as e,X as V,b4 as te,b5 as se,b6 as G,as as W,b7 as re,b8 as ae,b9 as ne,ba as le,bb as Z,bc as oe,bd as ie,be as ce,bf as D,ac as de,D as Q,a0 as _,bg as ue,an as me,v as X,bh as xe}from"./vendor-react-gmX1Lmvt.js";import{i as h,j as pe}from"./core-ai-yFIunLTZ.js";import{i as K}from"../assets/index-D9cF9G1U.js";import{r as he}from"./vendor-react-dom-Bkb6jJ_S.js";import{A as be,m as p}from"./vendor-framer-motion-DDE19Uim.js";function ge({children:i,containerId:l="portal-root"}){const[b,j]=d.useState(null);return d.useEffect(()=>{if(typeof document>"u")return;let c=document.getElementById(l),x=!1;return c||(c=document.createElement("div"),c.id=l,document.body.appendChild(c),x=!0),j(c),()=>{x&&c?.parentNode&&c.parentNode.removeChild(c)}},[l]),b?he.createPortal(i,b):null}const fe=["mp4","m4v","mov","webm","mkv","avi","mpg","mpeg","ogv"],ye=["mp3","m4a","aac","wav","flac","ogg","opus","aiff","oga"];function je(i){if(!i)return"";if(i.startsWith("file://"))return i;let l=i.replace(/\\/g,"/");return/^[a-zA-Z]:/.test(l)?l=`/${l}`:l.startsWith("/")||(l=`/${l}`),encodeURI(`file://${l}`)}function J(i){if(!i)return null;const l=i.split(".").pop()?.toLowerCase();return l?fe.includes(l)?"video":ye.includes(l)?"audio":null:null}function ve({filePath:i,fileName:l,autoPlay:b=!0,onClose:j}){const c=d.useMemo(()=>J(l||i),[l,i]),x=d.useMemo(()=>je(i),[i]),m=d.useRef(null),[z,v]=d.useState(b),[k,I]=d.useState(0),[g,q]=d.useState(0),[A,L]=d.useState(1),[T,C]=d.useState(!1),[R,t]=d.useState(!1),[r,a]=d.useState(!1),[u,M]=d.useState(!1);d.useEffect(()=>{const s=n=>{n.key==="Escape"&&j()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[j]),d.useEffect(()=>{const s=m.current;if(!s)return;const n=()=>{q(s.duration||0),L(s.volume),C(s.muted)},y=()=>I(s.currentTime||0),F=()=>v(!0),P=()=>v(!1),$=()=>{L(s.volume),C(s.muted)};if(s.addEventListener("loadedmetadata",n),s.addEventListener("timeupdate",y),s.addEventListener("play",F),s.addEventListener("pause",P),s.addEventListener("volumechange",$),b){const O=s.play();O&&typeof O.then=="function"&&O.catch(()=>{v(!1)})}return M(c==="video"&&typeof document<"u"?!!document.pictureInPictureEnabled:!1),()=>{s.removeEventListener("loadedmetadata",n),s.removeEventListener("timeupdate",y),s.removeEventListener("play",F),s.removeEventListener("pause",P),s.removeEventListener("volumechange",$),s.pause()}},[b,c,x]);const w=d.useCallback(()=>{const s=m.current;if(s)if(s.paused){const n=s.play();n&&typeof n.then=="function"&&n.catch(()=>v(!1))}else s.pause()},[]),o=d.useCallback(()=>{const s=m.current;s&&(s.muted=!s.muted)},[]),S=s=>{const n=m.current;if(!n)return;const y=Math.min(1,Math.max(0,s));n.volume=y,n.muted=y===0},N=s=>{const n=m.current;!n||!Number.isFinite(g)||g<=0||(n.currentTime=s/100*g,I(n.currentTime))},E=s=>{const n=m.current;n&&(n.currentTime=Math.min(Math.max(0,n.currentTime+s),g||n.currentTime))},f=async()=>{if(c!=="video")return;const s=m.current;if(!(!s||typeof s.requestPictureInPicture!="function"))try{const n=document;n.pictureInPictureElement?await n.exitPictureInPicture?.():await s.requestPictureInPicture()}catch(n){pe()&&console.warn("[MediaPlayer] Failed to request Picture-in-Picture:",n)}},B=()=>{const s=document.getElementById("ob-media-player-container");if(!s)return;r?document.exitFullscreen?.().then(()=>a(!1)).catch(()=>{}):s.requestFullscreen?.().then(()=>a(!0)).catch(()=>{})};d.useEffect(()=>{const s=()=>{a(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",s),()=>document.removeEventListener("fullscreenchange",s)},[]);const U=()=>{i&&h.downloads.openFile(i).catch(()=>{})},Y=()=>{i&&h.downloads.showInFolder(i).catch(()=>{})},H=s=>{if(!Number.isFinite(s))return"0:00";const n=Math.max(0,Math.round(s)),y=Math.floor(n/60),F=n%60,P=Math.floor(y/60);if(P>0){const $=y%60;return`${P}:${$.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`}return`${y}:${F.toString().padStart(2,"0")}`},ee=g>0?Math.min(100,Math.max(0,k/g*100)):0;return e.jsx(ge,{children:e.jsx(be,{children:e.jsx(p.div,{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/70 backdrop-blur-sm px-6 py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j,children:e.jsxs(p.div,{id:"ob-media-player-container",className:"relative w-full max-w-4xl overflow-hidden rounded-2xl border border-gray-700/60 bg-gray-950/90 shadow-2xl",initial:{y:40,opacity:0},animate:{y:0,opacity:1},exit:{y:40,opacity:0},transition:{type:"spring",damping:22,stiffness:180},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-800/60 bg-gray-900/70 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-100",children:l||i.split(/[\\/]/).pop()||"Media file"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[c?c.toUpperCase():"Unknown"," • ",H(g)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:U,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300",children:"Open"}),e.jsx("button",{onClick:Y,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 px-3 py-1.5 text-xs text-gray-200 transition hover:border-blue-500/60 hover:text-blue-300",children:"Reveal"}),e.jsx("button",{onClick:j,className:"rounded-lg border border-gray-700/70 bg-gray-800/70 p-1.5 text-gray-300 transition hover:border-red-500/60 hover:text-red-300",children:e.jsx(V,{size:16})})]})]}),e.jsxs("div",{className:`relative flex flex-col items-center justify-center bg-black ${c==="audio"?"py-12":"py-4"}`,onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:[c==="video"&&x?e.jsx("video",{ref:m,src:x,className:"max-h-[60vh] w-full bg-black object-contain",autoPlay:b,controls:!1}):null,c==="audio"&&x?e.jsxs("div",{className:"flex w-full flex-col items-center gap-6 px-8",children:[e.jsx("div",{className:"mt-4 flex h-32 w-32 items-center justify-center rounded-3xl bg-gradient-to-br from-blue-500/30 to-purple-500/30 text-blue-200",children:e.jsx(te,{size:64})}),e.jsx("audio",{ref:m,src:x,autoPlay:b,controls:!1})]}):null,!c||!x?e.jsxs("div",{className:"flex h-48 w-full flex-col items-center justify-center gap-3 text-center text-gray-400",children:[e.jsx(se,{size:40,className:"text-gray-600"}),e.jsx("p",{className:"text-sm",children:"Unable to load media preview"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Unsupported format or missing file reference."})]}):null,c&&x?e.jsx(p.div,{className:"absolute bottom-3 left-1/2 z-10 w-[92%] -translate-x-1/2 rounded-xl border border-gray-800/80 bg-gray-900/95 px-4 py-3 shadow-xl backdrop-blur",animate:{opacity:R||!z?1:.85},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:w,className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600/90 text-white transition hover:bg-blue-500",children:z?e.jsx(G,{size:18}):e.jsx(W,{size:18})}),e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-400",children:[e.jsx("span",{className:"font-mono text-sm text-gray-100",children:H(k)}),e.jsxs("span",{className:"font-mono text-[11px] text-gray-500",children:[H(g-k)," remaining"]})]}),e.jsx("input",{type:"range",min:0,max:100,value:ee,onChange:s=>N(Number(s.target.value)),className:"flex-1 accent-blue-500"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>E(-10),className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Back 10 seconds",children:e.jsx(re,{size:16})}),e.jsx("button",{onClick:()=>E(10),className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Forward 10 seconds",children:e.jsx(ae,{size:16})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",children:T||A===0?e.jsx(ne,{size:16}):e.jsx(le,{size:16})}),e.jsx("input",{type:"range",min:0,max:100,value:T?0:Math.round(A*100),onChange:s=>S(Number(s.target.value)/100),className:"w-24 accent-blue-500"})]}),u?e.jsx("button",{onClick:f,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:"Toggle picture-in-picture",children:e.jsx(Z,{size:16})}):null,e.jsx("button",{onClick:B,className:"rounded-full border border-gray-700/60 p-2 text-gray-300 transition hover:border-blue-500/60 hover:text-blue-300",title:r?"Exit fullscreen":"Enter fullscreen",children:r?e.jsx(oe,{size:16}):e.jsx(ie,{size:16})})]})]})}):null]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-800/60 bg-gray-900/70 px-4 py-3 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:14,className:"text-blue-300"}),e.jsx("span",{children:"Secure local playback"})]}),e.jsx("span",{children:i})]})]})})})})}function we(){const[i,l]=d.useState([]),[b,j]=d.useState(!0),[c,x]=d.useState(null),[m,z]=d.useState(null);d.useEffect(()=>{(async()=>{try{const o=await h.downloads.list();Array.isArray(o)&&l(o.sort((S,N)=>N.createdAt-S.createdAt))}catch(o){console.error("Failed to load downloads:",o)}finally{j(!1)}})();const r=async()=>{try{const o=await h.downloads.getQueue?.();o&&z(o)}catch(o){console.error("Failed to load queue status:",o)}};r();const a=setInterval(r,2e3),u=o=>{o?.id&&l(S=>{const N=S.findIndex(f=>f.id===o.id),E={id:o.id,url:o.url,filename:o.filename,status:o.status||"downloading",path:o.path,checksum:o.checksum,createdAt:o.createdAt||Date.now(),progress:o.progress,receivedBytes:o.receivedBytes,totalBytes:o.totalBytes,safety:o.safety,speedBytesPerSec:o.speedBytesPerSec,etaSeconds:o.etaSeconds};if(N>=0){const f=[...S];return f[N]={...f[N],...E,createdAt:f[N].createdAt||E.createdAt},f.sort((B,U)=>U.createdAt-B.createdAt)}return[E,...S].sort((f,B)=>B.createdAt-f.createdAt)})},M=K.on("downloads:progress",u),w=K.on("downloads:done",u);return()=>{M(),w(),clearInterval(a)}},[]);const v=t=>{if(!t)return"Unknown";if(t===0)return"0 Bytes";const r=1024,a=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(t)/Math.log(r));return Math.round(t/Math.pow(r,u)*100)/100+" "+a[u]},k=t=>typeof t.progress=="number"?Math.min(100,Math.max(0,Math.round(t.progress*100))):t.totalBytes&&t.totalBytes>0?Math.min(100,Math.round((t.receivedBytes||0)/t.totalBytes*100)):t.status==="completed"||t.status==="verifying"?100:0,I=t=>{if(!t||!Number.isFinite(t)||t<=0)return"—";const r=["B/s","KB/s","MB/s","GB/s"],a=Math.min(r.length-1,Math.floor(Math.log(t)/Math.log(1024))),u=t/Math.pow(1024,a);return`${u>=100?Math.round(u):Math.round(u*10)/10} ${r[a]}`},g=t=>{if(t===void 0||!Number.isFinite(t)||t<=0)return"—";const r=Math.max(0,Math.round(t)),a=Math.floor(r/3600),u=Math.floor(r%3600/60),M=r%60,w=[];return a>0&&w.push(`${a}h`),(u>0||a>0)&&w.push(`${u}m`),w.push(`${M}s`),w.join(" ")},q=t=>!t?.path||t.status!=="completed"?!1:!!J(t.filename||t.path),A=t=>{switch(t){case"completed":return e.jsx(xe,{size:16,className:"text-green-400"});case"failed":case"blocked":return e.jsx(X,{size:16,className:"text-red-400"});case"downloading":case"paused":case"verifying":return e.jsx(D,{size:16,className:"text-blue-400 animate-spin"});case"cancelled":return e.jsx(X,{size:16,className:"text-gray-500"});default:return e.jsx(_,{size:16,className:"text-gray-400"})}},L=t=>{t&&h.downloads.openFile?.(t).catch(console.error)},T=t=>{t&&h.downloads.showInFolder?.(t).catch(console.error)},C=t=>{if(!t)return null;const r="px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide border";switch(t.status){case"clean":return e.jsx("span",{className:`${r} bg-emerald-500/15 border-emerald-500/30 text-emerald-200`,children:"Scanned Clean"});case"warning":return e.jsx("span",{className:`${r} bg-amber-500/15 border-amber-500/30 text-amber-200`,children:"Review Recommended"});case"blocked":return e.jsx("span",{className:`${r} bg-red-500/15 border-red-500/40 text-red-200`,children:"Quarantined"});case"pending":return e.jsx("span",{className:`${r} bg-blue-500/15 border-blue-500/30 text-blue-200`,children:"Scanning…"});default:return e.jsx("span",{className:`${r} bg-gray-500/15 border-gray-600/40 text-gray-300`,children:"Scan Unavailable"})}},R=t=>t?e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[C(t),t.threatLevel&&e.jsxs("span",{className:"text-[10px] uppercase text-gray-400",children:["Threat level: ",t.threatLevel]})]}),t.details&&e.jsx("div",{children:t.details}),t.recommendations&&t.recommendations.length>0&&e.jsx("ul",{className:"list-disc list-inside text-[11px] space-y-0.5",children:t.recommendations.slice(0,3).map((r,a)=>e.jsx("li",{children:r},`${t.scannedAt}-${a}`))}),t.status==="blocked"&&t.quarantinePath&&e.jsxs("div",{className:"text-[11px] text-red-300",children:["File moved to quarantine: ",e.jsx("span",{className:"font-mono",children:t.quarantinePath})]})]}):null;return b?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-[#1A1D28]",children:e.jsx(D,{size:24,className:"text-blue-400 animate-spin"})}):e.jsxs("div",{className:"h-full w-full bg-[#1A1D28] text-gray-100 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Downloads"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[i.length," ",i.length===1?"download":"downloads"]})]}),m&&e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[e.jsx(D,{size:14,className:"text-blue-400 animate-spin"}),e.jsx("span",{className:"text-blue-300",children:"Active:"}),e.jsxs("span",{className:"text-blue-200 font-semibold",children:[m.active,"/",m.maxConcurrent]})]}),m.queued>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-amber-500/10 border border-amber-500/30",children:[e.jsx(de,{size:14,className:"text-amber-400"}),e.jsx("span",{className:"text-amber-300",children:"Queued:"}),e.jsx("span",{className:"text-amber-200 font-semibold",children:m.queued})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(Q,{size:48,className:"text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No downloads yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Files you download will appear here"})]}):e.jsx("div",{className:"space-y-3",children:i.map(t=>e.jsx(p.div,{"data-testid":"download-card","data-download-id":t.id,"data-filename":t.filename||"",initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-900/60 backdrop-blur-sm border border-gray-800/50 rounded-lg p-4 hover:bg-gray-900/80 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A(t.status),e.jsx("span",{className:"font-medium text-gray-200 truncate",children:t.filename||t.url.split("/").pop()||"Download"}),C(t.safety)]}),t.status==="downloading"||t.status==="paused"?e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-300 mb-1.5",children:[e.jsxs("span",{className:"font-medium",children:[v(t.receivedBytes)," / ",v(t.totalBytes)]}),e.jsxs("span",{className:"font-semibold text-blue-400",children:[k(t),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2.5 overflow-hidden mb-2",children:e.jsx(p.div,{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500",initial:{width:0},animate:{width:`${k(t)}%`},transition:{duration:.3}})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-blue-500/10 border border-blue-500/30",children:[e.jsx("span",{className:"text-blue-300",children:"Speed:"}),e.jsx("span",{className:"text-blue-200 font-semibold",children:I(t.speedBytesPerSec)})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-purple-500/10 border border-purple-500/30",children:[e.jsx(_,{size:12,className:"text-purple-300"}),e.jsx("span",{className:"text-purple-300",children:"ETA:"}),e.jsx("span",{className:"text-purple-200 font-semibold",children:g(t.etaSeconds)})]})]})]}):null,t.status==="verifying"&&e.jsxs("div",{className:"mb-2 text-xs text-blue-300 flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Verifying download integrity…"})]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"truncate",children:t.url}),t.totalBytes&&t.totalBytes>1024*1024*1024&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-purple-500/15 border border-purple-500/30 text-purple-200 text-[10px] font-semibold",children:["Large File (",v(t.totalBytes),")"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{children:new Date(t.createdAt).toLocaleString()}),e.jsx("span",{className:"capitalize",children:t.status}),t.path&&e.jsx("span",{className:"truncate max-w-xs",title:t.path,children:t.path.replace(/^.*[\\\/]/,"")})]}),t.checksum&&e.jsxs("div",{className:"text-xs text-gray-500 truncate",title:`SHA-256: ${t.checksum}`,children:["SHA-256: ",t.checksum.slice(0,12),"…"]}),R(t.safety)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="downloading"&&e.jsxs(e.Fragment,{children:[e.jsxs(p.button,{onClick:async()=>{try{await h.downloads.pause(t.id),l(r=>r.map(a=>a.id===t.id?{...a,status:"paused"}:a))}catch(r){console.error("Failed to pause download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/40 text-amber-200 font-medium text-xs transition-colors",title:"Pause download",children:[e.jsx(G,{size:16}),e.jsx("span",{children:"Pause"})]}),e.jsxs(p.button,{onClick:async()=>{try{await h.downloads.cancel(t.id),l(r=>r.map(a=>a.id===t.id?{...a,status:"cancelled"}:a))}catch(r){console.error("Failed to stop download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-200 font-medium text-xs transition-colors",title:"Stop download",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"Stop"})]})]}),t.status==="paused"&&e.jsxs(e.Fragment,{children:[e.jsxs(p.button,{onClick:async()=>{try{await h.downloads.resume(t.id),l(r=>r.map(a=>a.id===t.id?{...a,status:"downloading"}:a))}catch(r){console.error("Failed to resume download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 border border-green-500/40 text-green-200 font-medium text-xs transition-colors",title:"Resume download",children:[e.jsx(W,{size:16}),e.jsx("span",{children:"Resume"})]}),e.jsxs(p.button,{onClick:async()=>{try{await h.downloads.cancel(t.id),l(r=>r.map(a=>a.id===t.id?{...a,status:"cancelled"}:a))}catch(r){console.error("Failed to stop download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 text-red-200 font-medium text-xs transition-colors",title:"Stop download",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"Stop"})]})]}),(t.status==="failed"||t.status==="cancelled")&&e.jsxs(p.button,{onClick:async()=>{try{await h.downloads.retry?.(t.id),l(a=>a.map(u=>u.id===t.id?{...u,status:"pending"}:u));const r=await h.downloads.getQueue?.();r&&z(r)}catch(r){console.error("Failed to retry download:",r)}},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/40 text-blue-200 font-medium text-xs transition-colors",title:"Retry download",children:[e.jsx(ue,{size:16}),e.jsx("span",{children:"Retry"})]}),(t.status==="completed"||t.status==="failed"||t.status==="cancelled"||t.status==="blocked")&&t.path&&e.jsxs(e.Fragment,{children:[t.status!=="blocked"&&t.status==="completed"&&e.jsx(p.button,{onClick:()=>L(t.path),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors",title:"Open file",children:e.jsx(Q,{size:18})}),t.status==="completed"&&t.path&&q(t)&&e.jsx(p.button,{onClick:()=>x(t),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-purple-400 transition-colors",title:"Preview media",children:e.jsx(Z,{size:18})}),e.jsx(p.button,{onClick:()=>T(t.path),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 rounded-lg bg-gray-800/60 hover:bg-gray-800 border border-gray-700/50 text-gray-300 hover:text-blue-400 transition-colors",title:"Show in folder",children:e.jsx(me,{size:18})})]})]})]})},t.id))})}),c&&c.path&&e.jsx(ve,{filePath:c.path,fileName:c.filename,onClose:()=>x(null)})]})}const ze=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));export{we as D,ge as P,ze as a};
//# sourceMappingURL=Downloads-CU-ngJEB.js.map
