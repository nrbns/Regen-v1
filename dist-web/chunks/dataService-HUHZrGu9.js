const h="https://www.alphavantage.co/query",m="demo";async function b(e){try{const t=`${h}?function=GLOBAL_QUOTE&symbol=${encodeURIComponent(e)}&apikey=${m}`,o=await fetch(t);if(!o.ok)throw new Error(`Trade API error: ${o.statusText}`);const n=(await o.json())["Global Quote"];if(!n)throw new Error("No quote data returned");const a=Number.parseFloat(n["05. price"]),s=Number.parseFloat(n["08. previous close"]),c=Number.parseFloat(n["09. change"]),u=Number.parseFloat((n["10. change percent"]||"0%").replace("%","")),l=Number.parseFloat(n["06. volume"]);return{symbol:n["01. symbol"]||e,price:a,change:c,changePercent:u,previousClose:s,volume:l,updatedAt:Date.now(),sparkline:i(a,c),sentiment:p(u)}}catch(t){return console.warn("[TradeData] Falling back to synthetic quote:",t),d(e)}}function i(e,t){const r=e-t,n=[];for(let a=0;a<20;a++){const s=(Math.random()-.5)*(Math.abs(t)*.1);n.push(Math.max(r*.9,e+s-t*((20-a)/20)))}return n}function p(e){return e>1?"bullish":e<-1?"bearish":"neutral"}function d(e){const t=100+Math.random()*50,o=(Math.random()-.5)*4,r=t*o/100;return{symbol:e,price:t,change:r,changePercent:o,previousClose:t-r,volume:Math.round(1e6+Math.random()*5e6),updatedAt:Date.now(),sparkline:i(t,r),sentiment:p(o)}}export{b as fetchTradeQuote};
//# sourceMappingURL=dataService-HUHZrGu9.js.map
