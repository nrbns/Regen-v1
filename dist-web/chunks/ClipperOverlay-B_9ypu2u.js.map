{"version":3,"file":"ClipperOverlay-B_9ypu2u.js","sources":["../../src/components/Overlays/ClipperOverlay.tsx"],"sourcesContent":["import { motion, AnimatePresence } from 'framer-motion';\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport { ResearchHighlight } from '../../types/research';\r\n\r\nconst colors = ['#facc15', '#22d3ee', '#f472b6', '#a855f7', '#34d399'];\r\n\r\ninterface ClipperOverlayProps {\r\n  active: boolean;\r\n  onCancel: () => void;\r\n  onCreateHighlight: (highlight: ResearchHighlight) => void;\r\n}\r\n\r\nexport function ClipperOverlay({ active, onCancel, onCreateHighlight }: ClipperOverlayProps) {\r\n  const [selection, setSelection] = useState<string>('');\r\n  const [color, setColor] = useState<string>(colors[0]);\r\n\r\n  useEffect(() => {\r\n    if (!active) return;\r\n    const handleMouseUp = () => {\r\n      const selection = window.getSelection();\r\n      const text = selection?.toString().trim() || '';\r\n      setSelection(text);\r\n    };\r\n\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n    return () => {\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n      setSelection('');\r\n      setColor(colors[0]);\r\n    };\r\n  }, [active]);\r\n\r\n  const previewStyle = useMemo(\r\n    () => ({\r\n      backgroundColor: `${color}25`,\r\n      color,\r\n      borderColor: `${color}66`,\r\n    }),\r\n    [color],\r\n  );\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {active && (\r\n        <>\r\n          <motion.div\r\n            key=\"clipper-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 0.45 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-[70] bg-black/70 backdrop-blur-sm\"\r\n            onClick={onCancel}\r\n          />\r\n\r\n          <motion.div\r\n            key=\"clipper-toolbar\"\r\n            initial={{ opacity: 0, y: 24 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 12 }}\r\n            className=\"fixed bottom-12 left-1/2 -translate-x-1/2 z-[71] w-[520px] max-w-[90vw] px-5 py-4 bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-xl shadow-2xl\"\r\n          >\r\n            <div className=\"flex items-start gap-4\">\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <span className=\"text-sm font-medium text-gray-200\">Web Clipper</span>\r\n                  <span className=\"text-[11px] uppercase tracking-wide text-gray-500\">\r\n                    Ctrl ⌃ / Cmd ⌘ + Shift ⇧ + H\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-xs text-gray-400 mb-3\">\r\n                  Highlight text on the current page and save it as a note. We’ll store it with the page so you can\r\n                  revisit later.\r\n                </p>\r\n                {selection ? (\r\n                  <div\r\n                    className=\"text-xs border rounded-lg px-3 py-2 max-h-28 overflow-y-auto transition-colors\"\r\n                    style={previewStyle}\r\n                  >\r\n                    {selection}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-xs text-gray-500 border border-dashed border-gray-700 rounded-lg px-3 py-6 text-center\">\r\n                    Select text on the page to capture it.\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex flex-col items-end gap-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {colors.map((swatch) => (\r\n                    <button\r\n                      key={swatch}\r\n                      type=\"button\"\r\n                      className={`w-6 h-6 rounded-full border-2 transition-transform ${\r\n                        color === swatch ? 'scale-110 border-gray-200' : 'border-transparent'\r\n                      }`}\r\n                      style={{ backgroundColor: swatch }}\r\n                      onClick={() => setColor(swatch)}\r\n                      aria-label={`Highlight ${swatch}`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={onCancel}\r\n                    className=\"px-3 py-1.5 text-sm text-gray-300 hover:text-gray-100 bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50 rounded transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      if (!selection) return;\r\n                      onCreateHighlight({\r\n                        id: crypto.randomUUID?.() ?? `clip-${Date.now()}`,\r\n                        text: selection,\r\n                        color,\r\n                        createdAt: Date.now(),\r\n                      });\r\n                      setSelection('');\r\n                      setColor(colors[0]);\r\n                    }}\r\n                    disabled={!selection}\r\n                    className=\"px-3 py-1.5 text-sm font-semibold text-emerald-200 disabled:text-gray-500 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/40 rounded transition-colors\"\r\n                  >\r\n                    Save highlight\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n"],"names":["colors","ClipperOverlay","active","onCancel","onCreateHighlight","selection","setSelection","useState","color","setColor","useEffect","handleMouseUp","text","previewStyle","useMemo","jsx","AnimatePresence","jsxs","Fragment","motion","swatch"],"mappings":"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"}