{"version":3,"file":"TabGraphOverlay-DdEVCPFr.js","sources":["../../src/state/workflowWeaverStore.ts","../../src/components/layout/TabGraphOverlay.tsx"],"sourcesContent":["import { create } from 'zustand';\r\nimport { ipc } from '../lib/ipc-typed';\r\n\r\nexport interface WorkflowStep {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  tabIds: string[];\r\n  recommendedActions: string[];\r\n  primaryDomain?: string;\r\n  confidence?: number;\r\n}\r\n\r\nexport interface WorkflowPlan {\r\n  planId: string;\r\n  goal: string;\r\n  summary: string;\r\n  generatedAt: number;\r\n  confidence: number;\r\n  steps: WorkflowStep[];\r\n  sources: Array<{ domain: string; tabIds: string[] }>;\r\n}\r\n\r\ninterface WorkflowWeaverState {\r\n  plan: WorkflowPlan | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  lastFetchedAt: number | null;\r\n  fetch: (options?: { maxSteps?: number; force?: boolean }) => Promise<void>;\r\n  setPlan: (plan: WorkflowPlan | null) => void;\r\n}\r\n\r\nexport const useWorkflowWeaverStore = create<WorkflowWeaverState>((set, get) => ({\r\n  plan: null,\r\n  loading: false,\r\n  error: null,\r\n  lastFetchedAt: null,\r\n  async fetch(options) {\r\n    const { loading, lastFetchedAt } = get();\r\n    if (loading) return;\r\n    if (!options?.force && lastFetchedAt && Date.now() - lastFetchedAt < 10_000) {\r\n      return;\r\n    }\r\n    set({ loading: true, error: null });\r\n    try {\r\n      const response = await ipc.graph.workflow({ maxSteps: options?.maxSteps ?? 5 });\r\n      if (!response || typeof response !== 'object') {\r\n        throw new Error('Workflow weaver unavailable.');\r\n      }\r\n      set({\r\n        plan: response as WorkflowPlan,\r\n        loading: false,\r\n        lastFetchedAt: Date.now(),\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : String(error),\r\n        loading: false,\r\n      });\r\n    }\r\n  },\r\n  setPlan(plan) {\r\n    set({ plan });\r\n  },\r\n}));\r\n","import { useMemo, useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { X, RefreshCw, Share2, Wand2 } from 'lucide-react';\r\nimport { useTabGraphStore, TabGraphNode } from '../../state/tabGraphStore';\r\nimport { useWorkflowWeaverStore } from '../../state/workflowWeaverStore';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\nconst EDGE_COLORS: Record<string, string> = {\r\n  domain: '#60a5fa',\r\n  container: '#34d399',\r\n  mode: '#a855f7',\r\n  timeline: '#f97316',\r\n};\r\n\r\nconst CANVAS_SIZE = { width: 680, height: 520 };\r\nconst NODE_RADIUS = 28;\r\n\r\nconst getPosition = (index: number, total: number) => {\r\n  if (total === 0) {\r\n    return { x: CANVAS_SIZE.width / 2, y: CANVAS_SIZE.height / 2 };\r\n  }\r\n  const angle = (2 * Math.PI * index) / total;\r\n  const radius = Math.min(CANVAS_SIZE.width, CANVAS_SIZE.height) / 2 - 70;\r\n  const cx = CANVAS_SIZE.width / 2 + radius * Math.cos(angle);\r\n  const cy = CANVAS_SIZE.height / 2 + radius * Math.sin(angle);\r\n  return { x: cx, y: cy };\r\n};\r\n\r\nexport function TabGraphOverlay() {\r\n  const { visible, data, loading, error, close, refresh, focusedTabId, setFocusedTab } = useTabGraphStore((state) => ({\r\n    visible: state.visible,\r\n    data: state.data,\r\n    loading: state.loading,\r\n    error: state.error,\r\n    close: state.close,\r\n    refresh: state.refresh,\r\n    focusedTabId: state.focusedTabId,\r\n    setFocusedTab: state.setFocusedTab,\r\n  }));\r\n  const {\r\n    plan,\r\n    loading: planLoading,\r\n    error: planError,\r\n    fetch: fetchPlan,\r\n  } = useWorkflowWeaverStore((state) => ({\r\n    plan: state.plan,\r\n    loading: state.loading,\r\n    error: state.error,\r\n    fetch: state.fetch,\r\n  }));\r\n  const [hovered, setHovered] = useState<TabGraphNode | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n    if (!data && !loading) {\r\n      void refresh();\r\n    }\r\n    const interval = setInterval(() => {\r\n      void refresh();\r\n    }, 15000);\r\n    return () => clearInterval(interval);\r\n  }, [visible, data, loading, refresh]);\r\n\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n    void fetchPlan({ maxSteps: 5, force: true });\r\n    const interval = setInterval(() => {\r\n      void fetchPlan({ maxSteps: 5 });\r\n    }, 20000);\r\n    return () => clearInterval(interval);\r\n  }, [visible, fetchPlan]);\r\n\r\n  const graph = useMemo(() => {\r\n    if (!data) {\r\n      return null;\r\n    }\r\n    const positions = data.nodes.map((node, index) => ({\r\n      node,\r\n      ...getPosition(index, data.nodes.length),\r\n    }));\r\n    const nodeLookup = new Map(positions.map((item) => [item.node.id, item]));\r\n    const edges = data.edges\r\n      .map((edge) => {\r\n        const source = nodeLookup.get(edge.source);\r\n        const target = nodeLookup.get(edge.target);\r\n        if (!source || !target) {\r\n          return null;\r\n        }\r\n        return { edge, source, target };\r\n      })\r\n      .filter((entry): entry is NonNullable<typeof entry> => Boolean(entry));\r\n    return { positions, edges };\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    if (!graph || !focusedTabId) {\r\n      return;\r\n    }\r\n    const target = graph.positions.find((item) => item.node.id === focusedTabId);\r\n    if (target) {\r\n      setHovered(target.node);\r\n    }\r\n  }, [graph, focusedTabId]);\r\n\r\n  const handleClose = () => {\r\n    setHovered(null);\r\n    setFocusedTab(null);\r\n    close();\r\n  };\r\n\r\n  if (!visible) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.95 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        exit={{ opacity: 0, scale: 0.95 }}\r\n        transition={{ duration: 0.15 }}\r\n        className=\"relative w-[820px] max-w-[92vw] rounded-3xl border border-slate-700/70 bg-slate-950/95 shadow-2xl shadow-black/50\"\r\n      >\r\n        <div className=\"flex items-start justify-between gap-4 border-b border-slate-800/60 px-6 py-4\">\r\n          <div className=\"flex flex-col gap-1\">\r\n            <div className=\"flex items-center gap-2 text-sm text-emerald-300\">\r\n              <Share2 size={16} />\r\n              Dynamic Tab Graph\r\n            </div>\r\n            <div className=\"text-lg font-semibold text-gray-100\">Browse DNA Overlay</div>\r\n            <div className=\"text-xs text-gray-400\">\r\n              {data?.summary.totalTabs ?? 0} tabs ¬∑ {data?.summary.domains ?? 0} domains ¬∑ {data?.summary.containers ?? 0}{' '}\r\n              containers\r\n              {data?.updatedAt && (\r\n                <span className=\"ml-2 text-gray-500\">\r\n                  Updated{' '}\r\n                  {formatDistanceToNow(new Date(data.updatedAt), {\r\n                    addSuffix: true,\r\n                  })}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                void refresh();\r\n                void fetchPlan({ maxSteps: 5, force: true });\r\n              }}\r\n              disabled={loading}\r\n              className=\"rounded-xl border border-slate-700/60 bg-slate-900/70 px-3 py-2 text-xs font-medium text-gray-200 hover:bg-slate-900/90 transition-colors disabled:cursor-wait disabled:opacity-50\"\r\n            >\r\n              <div className=\"flex items-center gap-2\">\r\n                <RefreshCw size={14} className={loading ? 'animate-spin' : ''} />\r\n                Refresh\r\n              </div>\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClose}\r\n              className=\"rounded-full border border-slate-700/60 bg-slate-900/70 p-2 text-gray-300 hover:bg-slate-900/90 transition-colors\"\r\n              aria-label=\"Close tab graph overlay\"\r\n            >\r\n              <X size={16} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"px-6 pb-6\">\r\n          {error && (\r\n            <div className=\"mb-3 rounded-lg border border-rose-500/40 bg-rose-500/10 px-4 py-2 text-xs text-rose-100\">\r\n              {error}\r\n            </div>\r\n          )}\r\n          <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-[auto_220px]\">\r\n            <div className=\"relative flex items-center justify-center rounded-2xl border border-slate-800/60 bg-slate-900/60 p-4\">\r\n              <svg\r\n                width={CANVAS_SIZE.width}\r\n                height={CANVAS_SIZE.height}\r\n                className=\"text-gray-500\"\r\n              >\r\n                {graph?.edges.map(({ edge, source, target }) => {\r\n                  const primaryReason = edge.reasons[0] ?? 'domain';\r\n                  const stroke = EDGE_COLORS[primaryReason] ?? '#94a3b8';\r\n                  const strokeWidth = 1 + Math.min(edge.weight, 4);\r\n                  return (\r\n                    <line\r\n                      key={edge.id}\r\n                      x1={source.x}\r\n                      y1={source.y}\r\n                      x2={target.x}\r\n                      y2={target.y}\r\n                      stroke={stroke}\r\n                      strokeOpacity={0.4}\r\n                      strokeWidth={strokeWidth}\r\n                    />\r\n                  );\r\n                })}\r\n\r\n                {graph?.positions.map(({ node, x, y }) => {\r\n                  const isFocused = focusedTabId === node.id;\r\n                  return (\r\n                    <g key={node.id} transform={`translate(${x}, ${y})`}>\r\n                      {isFocused && (\r\n                        <motion.circle\r\n                          r={NODE_RADIUS + 14}\r\n                          className=\"fill-transparent stroke-purple-400/70\"\r\n                          strokeWidth={1.5}\r\n                          animate={{ scale: [1, 1.08, 1] }}\r\n                          transition={{ duration: 1.5, repeat: Infinity }}\r\n                        />\r\n                      )}\r\n                      <motion.circle\r\n                        r={NODE_RADIUS}\r\n                        className={`stroke-2 ${isFocused ? 'stroke-purple-400' : node.active ? 'stroke-emerald-400' : 'stroke-slate-700/70'}`}\r\n                        fill={isFocused ? '#a855f73d' : node.active ? '#10b98133' : '#1f293733'}\r\n                        whileHover={{ scale: 1.05 }}\r\n                        onMouseEnter={() => setHovered(node)}\r\n                        onMouseLeave={() => setHovered(null)}\r\n                      />\r\n                      <text\r\n                        textAnchor=\"middle\"\r\n                        dominantBaseline=\"middle\"\r\n                        className=\"pointer-events-none select-none text-[10px] font-medium fill-gray-200\"\r\n                      >\r\n                        {node.mode === 'ghost' ? 'üëª' : node.mode === 'private' ? 'üõ°Ô∏è' : 'üóÇÔ∏è'}\r\n                      </text>\r\n                      <text\r\n                        y={NODE_RADIUS + 14}\r\n                        textAnchor=\"middle\"\r\n                        className=\"pointer-events-none select-none text-[10px] fill-gray-300\"\r\n                      >\r\n                        {node.title.slice(0, 24)}\r\n                      </text>\r\n                    </g>\r\n                  );\r\n                })}\r\n              </svg>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-3\">\r\n              <div className=\"rounded-xl border border-slate-800/60 bg-slate-900/60 p-3 text-xs text-gray-300\">\r\n                <div className=\"mb-2 font-semibold text-sm text-gray-100\">Legend</div>\r\n                <div className=\"flex flex-col gap-2\">\r\n                  {Object.entries(EDGE_COLORS).map(([reason, color]) => (\r\n                    <div key={reason} className=\"flex items-center gap-2\">\r\n                      <span className=\"inline-flex h-2.5 w-8 rounded-full\" style={{ background: color, opacity: 0.5 }} />\r\n                      <span className=\"capitalize text-gray-300\">{reason} affinity</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex-1 overflow-hidden rounded-xl border border-slate-800/60 bg-slate-900/60 p-3 text-xs text-gray-300\">\r\n                <div className=\"mb-2 flex items-center justify-between\">\r\n                  <span className=\"font-semibold text-sm text-gray-100\">Tab Details</span>\r\n                  {hovered && (\r\n                    <a\r\n                      href={hovered.url}\r\n                      className=\"text-[11px] text-blue-300 hover:text-blue-200\"\r\n                      target=\"_blank\"\r\n                      rel=\"noreferrer\"\r\n                    >\r\n                      Open\r\n                    </a>\r\n                  )}\r\n                </div>\r\n                {hovered ? (\r\n                  <div className=\"space-y-1 text-[11px] leading-snug text-gray-300\">\r\n                    <div className=\"font-medium text-gray-100\">{hovered.title}</div>\r\n                    <div className=\"text-gray-400 break-all\">{hovered.url}</div>\r\n                    <div>Domain: <span className=\"text-gray-200\">{hovered.domain}</span></div>\r\n                    {hovered.containerName && (\r\n                      <div>\r\n                        Container: <span className=\"text-gray-200\">{hovered.containerName}</span>\r\n                      </div>\r\n                    )}\r\n                    {hovered.mode && <div>Mode: <span className=\"text-gray-200\">{hovered.mode}</span></div>}\r\n                    {typeof hovered.lastActiveAt === 'number' && (\r\n                      <div>\r\n                        Last active{' '}\r\n                        {formatDistanceToNow(new Date(hovered.lastActiveAt), {\r\n                          addSuffix: true,\r\n                        })}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-[11px] text-gray-500\">Hover a node to inspect metadata.</div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"overflow-hidden rounded-xl border border-purple-500/30 bg-purple-500/5 p-3 text-xs text-gray-200\">\r\n                <div className=\"mb-2 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2 text-sm font-semibold text-purple-200\">\r\n                    <Wand2 size={14} /> Neural Workflow Weaver\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => void fetchPlan({ maxSteps: 5, force: true })}\r\n                    className=\"rounded-lg border border-purple-400/40 bg-purple-500/10 px-2 py-1 text-[11px] text-purple-100 hover:bg-purple-500/20 transition-colors\"\r\n                    disabled={planLoading}\r\n                  >\r\n                    {planLoading ? 'Generating‚Ä¶' : 'Regenerate'}\r\n                  </button>\r\n                </div>\r\n                {planError && (\r\n                  <div className=\"mb-2 rounded border border-rose-500/40 bg-rose-500/10 px-2 py-1 text-[11px] text-rose-100\">\r\n                    {planError}\r\n                  </div>\r\n                )}\r\n                {planLoading && !plan && (\r\n                  <div className=\"text-[11px] text-purple-200/70\">Analyzing your open tabs‚Ä¶</div>\r\n                )}\r\n                {!planLoading && plan && (\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"text-[11px] text-purple-100/80\">{plan.summary}</div>\r\n                    <div className=\"space-y-2\">\r\n                      {plan.steps.length === 0 ? (\r\n                        <div className=\"text-[11px] text-purple-200/70\">Open a few research tabs to generate a workflow.</div>\r\n                      ) : (\r\n                        plan.steps.map((step, index) => (\r\n                          <div key={step.id} className=\"rounded-lg border border-purple-400/30 bg-purple-500/10 p-2 text-[11px] text-purple-100/90\">\r\n                            <div className=\"flex items-center justify-between text-[10px] uppercase tracking-wide text-purple-200/80\">\r\n                              <span>Step {index + 1}</span>\r\n                              {typeof step.confidence === 'number' && (\r\n                                <span>{Math.round(step.confidence * 100)}% confidence</span>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"mt-1 text-[12px] font-semibold text-purple-50\">{step.title}</div>\r\n                            <div className=\"mt-1 text-[11px] text-purple-100/80\">{step.description}</div>\r\n                            {step.recommendedActions?.length > 0 && (\r\n                              <ul className=\"mt-2 list-disc space-y-0.5 pl-4 text-[11px] text-purple-100/70\">\r\n                                {step.recommendedActions.map((action, actionIdx) => (\r\n                                  <li key={`${step.id}-action-${actionIdx}`}>{action}</li>\r\n                                ))}\r\n                              </ul>\r\n                            )}\r\n                          </div>\r\n                        ))\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useWorkflowWeaverStore","create","set","get","options","loading","lastFetchedAt","response","ipc","error","plan","EDGE_COLORS","CANVAS_SIZE","NODE_RADIUS","getPosition","index","total","angle","radius","cx","cy","TabGraphOverlay","visible","data","close","refresh","focusedTabId","setFocusedTab","useTabGraphStore","state","planLoading","planError","fetchPlan","hovered","setHovered","useState","useEffect","interval","graph","useMemo","positions","node","nodeLookup","item","edges","edge","source","target","entry","handleClose","jsx","jsxs","motion","Share2","formatDistanceToNow","RefreshCw","X","primaryReason","stroke","strokeWidth","x","y","isFocused","reason","color","Wand2","step","action","actionIdx"],"mappings":"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"}