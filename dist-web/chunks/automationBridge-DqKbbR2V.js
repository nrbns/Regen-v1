import{m as a,t as r}from"./core-ai-yFIunLTZ.js";import"./vendor-zustand-BWsgwsXr.js";import"./vendor-react-gmX1Lmvt.js";import"./vendor-react-dom-Bkb6jJ_S.js";import"./vendor-Vl2WtvH-.js";import"./mode-manager.ts-DwguZmJt.js";import"./core-memory-DmK-uh9X.js";let n=null;const s=new Set;async function w(t){const o=`auto-${Date.now()}-${Math.random().toString(36).slice(2)}`;n={id:o,playbookId:t.id||o,status:"running",startTime:Date.now(),progress:0},i();try{typeof window<"u"&&window.dispatchEvent(new CustomEvent("navigate-to-agent-console"));const e=a.getState();e.setRun(o,t.goal),e.setStatus("connecting");const u={goal:t.goal,steps:t.steps,output:t.output};return window.dispatchEvent(new CustomEvent("agent:execute",{detail:{runId:o,dsl:u,playbookTitle:t.title}})),r.success(`Starting automation: ${t.title}`),o}catch(e){throw n={...n,status:"error",endTime:Date.now(),error:e instanceof Error?e.message:"Unknown error"},i(),r.error(`Automation failed: ${e instanceof Error?e.message:"Unknown error"}`),e}}function S(){return n}function A(t){return s.add(t),()=>{s.delete(t)}}function E(t,o){n&&n.id===t&&(n={...n,...o},i())}function h(t,o,e){n&&n.id===t&&(n={...n,status:e?"error":"success",endTime:Date.now(),result:o,error:e,progress:100},i(),e?r.error(`Automation failed: ${e}`):r.success("Automation completed successfully"))}function i(){s.forEach(t=>{try{t(n)}catch(o){console.error("[AutomationBridge] Error in listener:",o)}})}export{h as completeAutomation,w as executeAutomation,S as getAutomationStatus,A as onAutomationStatusUpdate,E as updateAutomationStatus};
//# sourceMappingURL=automationBridge-DqKbbR2V.js.map
