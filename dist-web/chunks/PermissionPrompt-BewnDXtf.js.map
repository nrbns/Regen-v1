{"version":3,"file":"PermissionPrompt-BewnDXtf.js","sources":["../../src/components/Overlays/PermissionPrompt.tsx"],"sourcesContent":["/**\r\n * PermissionPrompt - Request permission modal with TTL\r\n */\r\n\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Camera, Mic, HardDrive, Bell, X, Check, Clock } from 'lucide-react';\r\nimport { PermissionRequest } from '../../lib/ipc-events';\r\nimport { useState } from 'react';\r\n\r\ninterface PermissionPromptProps {\r\n  request: PermissionRequest | null;\r\n  onClose: () => void;\r\n}\r\n\r\nconst permissionIcons = {\r\n  camera: Camera,\r\n  microphone: Mic,\r\n  filesystem: HardDrive,\r\n  notifications: Bell,\r\n};\r\n\r\nexport function PermissionPrompt({ request, onClose }: PermissionPromptProps) {\r\n  const [remember, setRemember] = useState(false);\r\n\r\n  if (!request) return null;\r\n\r\n  const Icon = permissionIcons[request.permission];\r\n\r\n  const handleResponse = (granted: boolean) => {\r\n    request.callback(granted, remember);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {request && (\r\n        <>\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-overlayBackdrop bg-black/60 backdrop-blur-sm\"\r\n            onClick={onClose}\r\n          />\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-modalContent w-96 bg-gray-900/95 backdrop-blur-xl border border-gray-700/50 rounded-xl shadow-2xl overflow-hidden\"\r\n          >\r\n            <div className=\"p-6\">\r\n              <div className=\"flex items-start gap-4 mb-4\">\r\n                <div className=\"flex-shrink-0 w-12 h-12 bg-blue-600/20 rounded-lg flex items-center justify-center\">\r\n                  <Icon size={24} className=\"text-blue-400\" />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-200 mb-1\">\r\n                    Permission Request\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-400\">\r\n                    <span className=\"font-medium text-gray-300\">{new URL(request.origin).hostname}</span> wants to access your {request.permission}.\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-1 rounded-lg hover:bg-gray-800/60 text-gray-400 hover:text-gray-200 transition-colors\"\r\n                >\r\n                  <X size={18} />\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2 p-3 bg-gray-800/40 rounded-lg\">\r\n                  <Clock size={16} className=\"text-gray-500\" />\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"text-xs font-medium text-gray-300\">Remember this choice</div>\r\n                    <div className=\"text-xs text-gray-500\">Allow this site to access {request.permission} automatically</div>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => setRemember(!remember)}\r\n                    className={`\r\n                      relative w-11 h-6 rounded-full transition-colors\r\n                      ${remember ? 'bg-blue-600' : 'bg-gray-700'}\r\n                    `}\r\n                  >\r\n                    <motion.div\r\n                      className=\"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-sm\"\r\n                      animate={{ x: remember ? 20 : 0 }}\r\n                      transition={{ type: 'spring', stiffness: 500, damping: 30 }}\r\n                    />\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 pt-2\">\r\n                  <motion.button\r\n                    onClick={() => handleResponse(false)}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                    className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-800/60 hover:bg-gray-800/80 border border-gray-700/50 rounded-lg text-gray-300 hover:text-gray-100 transition-colors\"\r\n                  >\r\n                    <X size={18} />\r\n                    Deny\r\n                  </motion.button>\r\n                  <motion.button\r\n                    onClick={() => handleResponse(true)}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                    className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600/60 hover:bg-blue-600/80 border border-blue-500/30 rounded-lg text-blue-200 hover:text-blue-100 transition-colors\"\r\n                  >\r\n                    <Check size={18} />\r\n                    Allow\r\n                  </motion.button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n"],"names":["permissionIcons","Camera","Mic","HardDrive","Bell","PermissionPrompt","request","onClose","remember","setRemember","useState","Icon","handleResponse","granted","jsx","AnimatePresence","jsxs","Fragment","motion","X","Clock","Check"],"mappings":"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"}