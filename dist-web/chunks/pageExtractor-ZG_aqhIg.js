function h(t){const o=t.cloneNode(!0);o.querySelectorAll("script, style, noscript, iframe, embed, object").forEach(r=>r.remove());let e=o.textContent||"";return e=e.replace(/\s+/g," ").trim(),e=e.replace(/\[.*?\]/g,""),e=e.replace(/\(.*?\)/g,""),e=e.replace(/\s+/g," "),e.trim()}function m(t){const o=[],c=t.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const e of Array.from(c)){const r=parseInt(e.tagName.charAt(1)),s=h(e);s&&o.push({level:r,text:s})}return o}function g(t){const o=[],c=t.querySelectorAll("table");for(const e of Array.from(c)){const r=[],s=[],n=e.querySelector("thead");if(n){const l=n.querySelector("tr");if(l){const a=l.querySelectorAll("th, td");for(const u of Array.from(a))r.push(h(u))}}else{const l=e.querySelector("tr");if(l){const a=l.querySelectorAll("th, td");for(const u of Array.from(a))r.push(h(u))}}const f=(e.querySelector("tbody")||e).querySelectorAll("tr");for(const l of Array.from(f)){if(n&&l.parentElement===n)continue;const a=l.querySelectorAll("td");if(a.length>0){const u=Array.from(a).map(d=>h(d));s.push(u)}}(r.length>0||s.length>0)&&o.push({headers:r,rows:s})}return o}function y(t){const o=[],c=t.querySelectorAll("a[href]");for(const e of Array.from(c)){const r=e.getAttribute("href"),s=h(e);if(r&&s)try{const n=new URL(r,t.location.href).href;o.push({text:s,url:n})}catch{}}return o}function p(t){const o=[],c=t.querySelectorAll("img[src]");for(const e of Array.from(c)){const r=e.getAttribute("src"),s=e.getAttribute("alt")||void 0;if(r)try{const n=new URL(r,t.location.href).href;o.push({alt:s,src:n})}catch{}}return o}function b(t){const o=["main","article",'[role="main"]',".content",".main-content",".post-content",".entry-content","#content","#main-content"];for(const n of o){const i=t.querySelector(n);if(i)return i}const c=t.body;if(!c)return null;let e=null,r=0;const s=c.querySelectorAll("div, section");for(const n of Array.from(s)){const i=n.getAttribute("role"),f=n.className.toLowerCase(),l=n.id.toLowerCase();if(i==="navigation"||i==="footer"||i==="header"||f.includes("nav")||f.includes("footer")||f.includes("header")||l.includes("nav")||l.includes("footer")||l.includes("header"))continue;const a=h(n);a.length>r&&(r=a.length,e=n)}return e||c}function A(t){const o={},c=t.querySelector('meta[name="description"], meta[property="og:description"]');c&&(o.description=c.getAttribute("content")||void 0);const e=t.querySelector('meta[name="author"], meta[name="article:author"]');e&&(o.author=e.getAttribute("content")||void 0);const r=t.querySelector('meta[name="article:published_time"], meta[property="article:published_time"], time[datetime]');return r&&(o.publishedDate=r.getAttribute("datetime")||r.getAttribute("content")||void 0),o}function S(t){return Math.max(1,Math.ceil(t/200))}function q(t,o){const c=o||t.location?.href||"",e=t.title||"",r=A(t),s=m(t),n=b(t),i=h(n||t.body||t),f=g(t),l=y(t),a=p(t),u=i.split(/\s+/).filter(Boolean).length,d=S(u);return{title:e,description:r.description,url:c,headings:s,mainContent:i,tables:f.length>0?f:void 0,links:l.length>0?l:void 0,images:a.length>0?a:void 0,author:r.author,publishedDate:r.publishedDate,wordCount:u,estimatedReadTime:d}}export{q as extractPageContent};
//# sourceMappingURL=pageExtractor-ZG_aqhIg.js.map
