import{u as n}from"./AppShell-CJtR0Pw4.js";import"./core-ai-yFIunLTZ.js";import"./vendor-zustand-BWsgwsXr.js";import"./vendor-react-gmX1Lmvt.js";import"./vendor-react-dom-Bkb6jJ_S.js";import"./vendor-Vl2WtvH-.js";import"./mode-manager.ts-DwguZmJt.js";import"./core-memory-DmK-uh9X.js";import"../assets/index-D9cF9G1U.js";import"./mode-research-BclgCwOH.js";import"./vendor-utils-5Vdoy44w.js";import"./mode-docs-FcsoolLb.js";import"./vendor-pdf-ejcqEZLU.js";import"./vendor-mammoth-BPQIafDs.js";import"./vendor-framer-motion-DDE19Uim.js";import"@tauri-apps/api/core";import"./History-kg0LrAO3.js";import"./Downloads-CU-ngJEB.js";import"./OmniDesk-C5fSodZ1.js";import"./WorkspacesPanel-3geKynW_.js";import"./bookmarksStore-CAScveEF.js";import"./workspacesStore-BSqEl-CQ.js";import"./tradeStore-CHfkU4NA.js";import"./dataService-HUHZrGu9.js";import"./registry-CG5fPtjR.js";import"./trustDashboardStore-BRaGSCcb.js";let r=!1;async function U(){if(!(r||typeof window>"u")){if(r=!0,"getBattery"in navigator&&typeof navigator.getBattery=="function")try{const e=await navigator.getBattery();o(e),a(e);return}catch(e){console.warn("[BatteryManager] navigator.getBattery failed",e)}n.getState().setBattery({supported:!1,level:null,charging:null})}}function o(e){const i=()=>a(e);["chargingchange","levelchange","dischargingtimechange","chargingtimechange"].forEach(t=>{try{e.addEventListener(t,i)}catch{}}),window.addEventListener("beforeunload",()=>{["chargingchange","levelchange","dischargingtimechange","chargingtimechange"].forEach(t=>{try{e.removeEventListener(t,i)}catch{}})},{once:!0})}function a(e){n.getState().setBattery({supported:!0,level:typeof e.level=="number"?e.level:null,charging:typeof e.charging=="boolean"?e.charging:null,chargingTime:Number.isFinite(e.chargingTime)?e.chargingTime:null,dischargingTime:Number.isFinite(e.dischargingTime)?e.dischargingTime:null,lastUpdated:Date.now()})}export{U as initBatteryManager};
//# sourceMappingURL=battery-manager-DeaBgtPF.js.map
