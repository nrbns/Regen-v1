{"version":3,"file":"AgentOverlay-BLctF3fX.js","sources":["../../src/components/AgentOverlay.tsx"],"sourcesContent":["/**\r\n * AgentOverlay - Enhanced floating right panel with full tabs\r\n * Tabs: Plan, Actions, Logs, Memory, Ledger\r\n */\r\n\r\nimport { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Bot,\r\n  Square,\r\n  Clock,\r\n  Zap,\r\n  FileText,\r\n  Shield,\r\n  Brain,\r\n  ScrollText,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Sparkles,\r\n  MessageSquareText,\r\n  ShieldAlert,\r\n} from 'lucide-react';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { useIPCEvent } from '../lib/use-ipc-event';\r\nimport { ipc } from '../lib/ipc-typed';\r\nimport { getEnvVar, isElectronRuntime } from '../lib/env';\r\nimport { useAgentStreamStore, StreamStatus, AgentStreamEvent } from '../state/agentStreamStore';\r\n\r\ntype TabType = 'responses' | 'plan' | 'actions' | 'logs' | 'memory' | 'ledger';\r\n\r\ninterface AgentStep {\r\n  id: string;\r\n  tool: string;\r\n  args: any;\r\n  result?: any;\r\n  status: 'pending' | 'running' | 'completed' | 'error';\r\n  timestamp: number;\r\n}\r\n\r\nconst STATUS_LABELS: Record<StreamStatus, string> = {\r\n  idle: 'Idle',\r\n  connecting: 'Connecting',\r\n  live: 'Streaming',\r\n  complete: 'Complete',\r\n  error: 'Error',\r\n};\r\n\r\nconst STATUS_STYLES: Record<StreamStatus, string> = {\r\n  idle: 'bg-slate-800/60 text-slate-300',\r\n  connecting: 'border border-blue-500/40 bg-blue-500/20 text-blue-100',\r\n  live: 'border border-emerald-500/40 bg-emerald-500/20 text-emerald-100',\r\n  complete: 'border border-purple-500/40 bg-purple-500/20 text-purple-100',\r\n  error: 'border border-rose-500/40 bg-rose-500/20 text-rose-100',\r\n};\r\n\r\nconst SparkleTrail = () => (\r\n  <span className=\"flex items-center gap-1 text-purple-300/80\">\r\n    <Sparkles size={14} />\r\n  </span>\r\n);\r\n\r\nconst LoaderDots = () => (\r\n  <span className=\"flex items-center gap-1\">\r\n    {[0, 0.2, 0.4].map((delay) => (\r\n      <motion.span\r\n        key={delay}\r\n        className=\"h-1.5 w-1.5 rounded-full bg-blue-200/80\"\r\n        animate={{ opacity: [0.2, 1, 0.2], y: [0, -3, 0] }}\r\n        transition={{ duration: 1.2, repeat: Infinity, delay }}\r\n      />\r\n    ))}\r\n  </span>\r\n);\r\n\r\ninterface AgentPlan {\r\n  taskId: string;\r\n  steps: Array<{ id: string; description: string; tool?: string }>;\r\n  goal: string;\r\n  budget: { tokens: number; seconds: number; requests: number };\r\n  remaining: { tokens: number; seconds: number; requests: number };\r\n}\r\n\r\ninterface ConsentEntry {\r\n  id: string;\r\n  timestamp: number;\r\n  action: {\r\n    type: string;\r\n    description: string;\r\n    risk: 'low' | 'medium' | 'high';\r\n  };\r\n  approved: boolean;\r\n  origin: string;\r\n}\r\n\r\nexport function AgentOverlay() {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<TabType>('responses');\r\n  const [plan, setPlan] = useState<AgentPlan | null>(null);\r\n  const [actions, setActions] = useState<AgentStep[]>([]);\r\n  const [logs, setLogs] = useState<string[]>([]);\r\n  const [consentLedger, setConsentLedger] = useState<ConsentEntry[]>([]);\r\n  const [memory, setMemory] = useState<any[]>([]);\r\n  const [currentStep, setCurrentStep] = useState<string | null>(null);\r\n  const [tokens, setTokens] = useState(0);\r\n  const [requests, setRequests] = useState(0);\r\n  const [startTime, setStartTime] = useState<number | null>(null);\r\n  const [dryRun, setDryRun] = useState(false);\r\n  const isElectron = useMemo(() => isElectronRuntime(), []);\r\n  const apiBaseUrl = useMemo(\r\n    () => getEnvVar('API_BASE_URL') ?? getEnvVar('OMNIBROWSER_API_URL') ?? getEnvVar('OB_API_BASE_URL') ?? null,\r\n    [],\r\n  );\r\n  const eventSourceRef = useRef<EventSource | null>(null);\r\n  const runId = useAgentStreamStore((state) => state.runId);\r\n  const streamStatus = useAgentStreamStore((state) => state.status);\r\n  const streamError = useAgentStreamStore((state) => state.error);\r\n  const streamTranscript = useAgentStreamStore((state) => state.transcript);\r\n  const streamEvents = useAgentStreamStore((state) => state.events);\r\n  const lastGoal = useAgentStreamStore((state) => state.lastGoal);\r\n  const setRun = useAgentStreamStore((state) => state.setRun);\r\n  const setStreamStatus = useAgentStreamStore((state) => state.setStatus);\r\n  const setStreamError = useAgentStreamStore((state) => state.setError);\r\n  const appendStreamEvent = useAgentStreamStore((state) => state.appendEvent);\r\n  const appendTranscript = useAgentStreamStore((state) => state.appendTranscript);\r\n  const resetAgentStream = useAgentStreamStore((state) => state.reset);\r\n\r\n  const appendMessage = useCallback(\r\n    (text: string) => {\r\n      const current = useAgentStreamStore.getState().transcript;\r\n      appendTranscript(current ? `\\n${text}` : text);\r\n    },\r\n    [appendTranscript],\r\n  );\r\n\r\n  const pushStreamEvent = useCallback(\r\n    (event: Partial<AgentStreamEvent> & { type: AgentStreamEvent['type'] }) => {\r\n      const timestamp = event.timestamp ?? Date.now();\r\n      const id = event.id ?? `${event.type}-${timestamp}-${Math.random().toString(36).slice(2, 8)}`;\r\n      appendStreamEvent({ id, timestamp, ...event } as AgentStreamEvent);\r\n    },\r\n    [appendStreamEvent],\r\n  );\r\n\r\n  const stopStream = useCallback(() => {\r\n    if (eventSourceRef.current) {\r\n      eventSourceRef.current.close();\r\n      eventSourceRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  const resetStream = useCallback(() => {\r\n    stopStream();\r\n    resetAgentStream();\r\n  }, [stopStream, resetAgentStream]);\r\n\r\n  const startStream = useCallback(\r\n    async (goal: string, planId?: string) => {\r\n      if (!apiBaseUrl) {\r\n        setStreamStatus('error');\r\n        setStreamError('API_BASE_URL environment variable is not configured.');\r\n        return;\r\n      }\r\n\r\n      stopStream();\r\n      resetAgentStream();\r\n\r\n      try {\r\n        const response = await fetch(`${apiBaseUrl}/agent/run`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ goal, plan_id: planId }),\r\n          credentials: 'include',\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Agent API responded with status ${response.status}`);\r\n        }\r\n\r\n        const payload = await response.json();\r\n        const newRunId: string | undefined = payload?.id || payload?.run_id || payload?.runId;\r\n        if (!newRunId) {\r\n          throw new Error('Agent API did not return a run identifier.');\r\n        }\r\n\r\n        setRun(newRunId, goal ?? null);\r\n        setStreamStatus('live');\r\n\r\n        const source = new EventSource(`${apiBaseUrl}/agent/runs/${newRunId}`);\r\n        eventSourceRef.current = source;\r\n\r\n        source.onmessage = (event) => {\r\n          if (!event.data) return;\r\n          try {\r\n            const data = JSON.parse(event.data);\r\n            const timestamp = Date.now();\r\n\r\n            if (typeof data.delta === 'string' && data.delta.length > 0) {\r\n              appendTranscript(data.delta);\r\n            }\r\n\r\n            if (typeof data.message === 'string' && data.message.length > 0) {\r\n              appendMessage(data.message);\r\n              pushStreamEvent({ type: 'log', content: data.message, timestamp });\r\n            }\r\n\r\n            if (data.type === 'start') {\r\n              pushStreamEvent({ type: 'start', timestamp });\r\n            }\r\n\r\n            if (data.type === 'step') {\r\n              pushStreamEvent({\r\n                type: 'step',\r\n                step: data.step,\r\n                status: data.status,\r\n                content: data.log || data.message,\r\n                timestamp,\r\n              });\r\n            }\r\n\r\n            if (data.type === 'consent') {\r\n              pushStreamEvent({\r\n                type: 'consent',\r\n                content: data.description,\r\n                risk: data.risk,\r\n                approved: data.approved,\r\n                timestamp,\r\n              });\r\n            }\r\n\r\n            if (data.type === 'done') {\r\n              pushStreamEvent({ type: 'done', timestamp });\r\n              setStreamStatus('complete');\r\n              source.close();\r\n              eventSourceRef.current = null;\r\n            }\r\n\r\n            if (typeof data.tokens === 'number') {\r\n              setTokens((prev) => prev + data.tokens);\r\n            }\r\n\r\n            if (data.type === 'step') {\r\n              setRequests((prev) => prev + 1);\r\n            }\r\n          } catch (error) {\r\n            console.warn('[agent] Unable to parse stream payload', error);\r\n          }\r\n        };\r\n\r\n        source.onerror = () => {\r\n          setStreamStatus('error');\r\n          setStreamError('Agent stream disconnected.');\r\n          pushStreamEvent({ type: 'error', content: 'Stream disconnected', timestamp: Date.now() });\r\n          source.close();\r\n          eventSourceRef.current = null;\r\n        };\r\n      } catch (error) {\r\n        console.error('[agent] Failed to start agent stream', error);\r\n        setStreamStatus('error');\r\n        setStreamError(error instanceof Error ? error.message : 'Failed to start agent run');\r\n      }\r\n    },\r\n    [apiBaseUrl, appendTranscript, appendMessage, pushStreamEvent, setRun, setStreamError, setStreamStatus, stopStream],\r\n  );\r\n\r\n  // Listen for agent events\r\n  useIPCEvent<AgentPlan>('agent:plan', (data) => {\r\n    resetStream();\r\n    setIsActive(true);\r\n    setActiveTab('responses');\r\n    setPlan(data);\r\n    setStartTime(Date.now());\r\n    setTokens(0);\r\n    setRequests(0);\r\n    setLogs([]);\r\n    setActions([]);\r\n    setConsentLedger([]);\r\n    setMemory([]);\r\n    pushStreamEvent({ type: 'start', timestamp: Date.now() });\r\n    if (isElectron) {\r\n      setStreamStatus('live');\r\n    }\r\n  }, [resetStream, pushStreamEvent, isElectron, setStreamStatus]);\r\n\r\n  useIPCEvent('agent:step', (data: any) => {\r\n    const stepId = data.stepId || data.id;\r\n    setCurrentStep(stepId);\r\n    \r\n    if (data.tool) {\r\n      const step: AgentStep = {\r\n        id: stepId || crypto.randomUUID(),\r\n        tool: data.tool,\r\n        args: data.args || {},\r\n        result: data.result,\r\n        status: data.status || 'running',\r\n        timestamp: data.timestamp || Date.now(),\r\n      };\r\n      setActions(prev => {\r\n        const existing = prev.findIndex(s => s.id === step.id);\r\n        if (existing >= 0) {\r\n          const updated = [...prev];\r\n          updated[existing] = step;\r\n          return updated;\r\n        }\r\n        return [...prev, step];\r\n      });\r\n    }\r\n    \r\n    if (data.log) {\r\n      const message = `[${new Date().toLocaleTimeString()}] ${data.log}`;\r\n      setLogs(prev => [...prev, message]);\r\n      appendMessage(data.log);\r\n      pushStreamEvent({\r\n        type: 'log',\r\n        content: data.log,\r\n        timestamp: data.timestamp || Date.now(),\r\n      });\r\n    }\r\n    if (data.tokens) {\r\n      setTokens(prev => prev + data.tokens);\r\n    }\r\n    setRequests(prev => prev + 1);\r\n    if (data.status) {\r\n      pushStreamEvent({\r\n        type: 'step',\r\n        step: data.sequence ?? data.step ?? undefined,\r\n        status: data.status,\r\n        content: data.log || data.tool || data.status,\r\n        timestamp: data.timestamp || Date.now(),\r\n      });\r\n      if (streamStatus === 'idle') {\r\n        setStreamStatus('live');\r\n      }\r\n    }\r\n  }, [streamStatus, pushStreamEvent, appendMessage]);\r\n\r\n  useIPCEvent('agent:log', (data: any) => {\r\n    if (data.message) {\r\n      const message = `[${new Date().toLocaleTimeString()}] ${data.message}`;\r\n      setLogs(prev => [...prev, message]);\r\n      appendMessage(data.message);\r\n      pushStreamEvent({ type: 'log', content: data.message, timestamp: data.timestamp || Date.now() });\r\n    }\r\n  }, [appendMessage, pushStreamEvent]);\r\n\r\n  useIPCEvent('agent:consent:request', (data: any) => {\r\n    if (data.entry) {\r\n      setConsentLedger(prev => [...prev, data.entry]);\r\n      pushStreamEvent({\r\n        type: 'consent',\r\n        content: data.entry.action?.description,\r\n        risk: data.entry.action?.risk,\r\n        approved: data.entry.approved !== false,\r\n        timestamp: data.entry.timestamp || Date.now(),\r\n      });\r\n    }\r\n  }, [pushStreamEvent]);\r\n\r\n  useIPCEvent('agent:memory', (data: any) => {\r\n    if (data.memory) {\r\n      setMemory(prev => [...prev, data.memory]);\r\n    }\r\n  }, []);\r\n\r\n  useIPCEvent('agent:complete', () => {\r\n    setStreamStatus('complete');\r\n    stopStream();\r\n    setCurrentStep(null);\r\n  }, [setStreamStatus, stopStream]);\r\n\r\n  useEffect(() => {\r\n    if (!isActive) {\r\n      stopStream();\r\n    }\r\n  }, [isActive, stopStream]);\r\n\r\n  useEffect(() => () => stopStream(), [stopStream]);\r\n\r\n  useEffect(() => {\r\n    if (!isActive) return;\r\n    if (!plan?.goal) return;\r\n    if (isElectron) return;\r\n    if (!apiBaseUrl) {\r\n      setStreamStatus('error');\r\n      setStreamError('API_BASE_URL environment variable is not configured.');\r\n      return;\r\n    }\r\n    if (lastGoal === plan.goal && streamStatus !== 'error') return;\r\n    void startStream(plan.goal, plan.taskId);\r\n  }, [isActive, plan?.goal, plan?.taskId, isElectron, apiBaseUrl, startStream, setStreamError, setStreamStatus, lastGoal, streamStatus]);\r\n\r\n  useEffect(() => {\r\n    // Load consent ledger from consent API\r\n    const loadLedger = async () => {\r\n      try {\r\n        const ledger = await ipc.consent.list() as any;\r\n        if (Array.isArray(ledger)) {\r\n          setConsentLedger(ledger.map((entry: any) => ({\r\n            id: entry.id?.toString() || crypto.randomUUID(),\r\n            timestamp: entry.timestamp || Date.now(),\r\n            action: {\r\n              type: entry.action?.type || 'unknown',\r\n              description: entry.action?.description || 'Unknown action',\r\n              risk: entry.action?.risk || 'medium',\r\n            },\r\n            approved: entry.approved !== false,\r\n            origin: entry.origin || 'agent',\r\n          })));\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load ledger:', error);\r\n      }\r\n    };\r\n    if (isActive && activeTab === 'ledger') {\r\n      loadLedger();\r\n    }\r\n  }, [isActive, activeTab]);\r\n\r\n  const elapsedTime = startTime ? Math.floor((Date.now() - startTime) / 1000) : 0;\r\n\r\n  if (!isActive) return null;\r\n\r\n  const tabs = [\r\n    { id: 'responses' as TabType, label: 'Responses', icon: MessageSquareText },\r\n    { id: 'plan' as TabType, label: 'Plan', icon: FileText },\r\n    { id: 'actions' as TabType, label: 'Actions', icon: Zap },\r\n    { id: 'logs' as TabType, label: 'Logs', icon: ScrollText },\r\n    { id: 'memory' as TabType, label: 'Memory', icon: Brain },\r\n    { id: 'ledger' as TabType, label: 'Ledger', icon: Shield },\r\n  ];\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ x: 400, opacity: 0 }}\r\n      animate={{ x: 0, opacity: 1 }}\r\n      exit={{ x: 400, opacity: 0 }}\r\n      className=\"fixed right-0 top-0 bottom-0 w-96 bg-gray-900/95 backdrop-blur-xl border-l border-gray-700/50 shadow-2xl z-50 flex flex-col\"\r\n    >\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-gray-700/50\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Bot className=\"text-blue-400\" size={20} />\r\n            <h3 className=\"font-semibold text-gray-200\">Agent Console</h3>\r\n          </div>\r\n          <button\r\n            onClick={() => {\r\n              stopStream();\r\n              setIsActive(false);\r\n            }}\r\n            className=\"p-1 rounded hover:bg-gray-800 text-gray-400 hover:text-gray-200\"\r\n          >\r\n            <Square size={16} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Meters */}\r\n        <div className=\"grid grid-cols-3 gap-2 text-xs\">\r\n          <div className=\"bg-gray-800/50 rounded p-2\">\r\n            <div className=\"flex items-center gap-1 text-gray-400 mb-1\">\r\n              <Zap size={12} />\r\n              <span>Tokens</span>\r\n            </div>\r\n            <div className=\"text-gray-200 font-mono\">{tokens.toLocaleString()}</div>\r\n            {plan?.remaining && (\r\n              <div className=\"text-gray-500 text-xs\">/ {plan.remaining.tokens}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"bg-gray-800/50 rounded p-2\">\r\n            <div className=\"flex items-center gap-1 text-gray-400 mb-1\">\r\n              <Clock size={12} />\r\n              <span>Time</span>\r\n            </div>\r\n            <div className=\"text-gray-200 font-mono\">{elapsedTime}s</div>\r\n            {plan?.budget && (\r\n              <div className=\"text-gray-500 text-xs\">/ {plan.budget.seconds}s</div>\r\n            )}\r\n          </div>\r\n          <div className=\"bg-gray-800/50 rounded p-2\">\r\n            <div className=\"flex items-center gap-1 text-gray-400 mb-1\">\r\n              <FileText size={12} />\r\n              <span>Requests</span>\r\n            </div>\r\n            <div className=\"text-gray-200 font-mono\">{requests}</div>\r\n            {plan?.remaining && (\r\n              <div className=\"text-gray-500 text-xs\">/ {plan.remaining.requests}</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Dry-run Toggle */}\r\n        <div className=\"mt-3 flex items-center gap-2\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"dryrun\"\r\n            checked={dryRun}\r\n            onChange={(e) => setDryRun(e.target.checked)}\r\n            className=\"rounded\"\r\n          />\r\n          <label htmlFor=\"dryrun\" className=\"text-xs text-gray-400\">\r\n            Dry-run mode\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-gray-700/50 overflow-x-auto\">\r\n        {tabs.map((tab) => {\r\n          const Icon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={`flex items-center gap-1.5 px-4 py-2 text-sm font-medium transition-colors ${\r\n                activeTab === tab.id\r\n                  ? 'text-blue-400 border-b-2 border-blue-400'\r\n                  : 'text-gray-400 hover:text-gray-200'\r\n              }`}\r\n            >\r\n              <Icon size={14} />\r\n              <span>{tab.label}</span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-auto p-4\">\r\n        <AnimatePresence mode=\"wait\">\r\n          {activeTab === 'responses' && (\r\n            <motion.div\r\n              key=\"responses\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-4\"\r\n            >\r\n              <div className=\"flex flex-wrap items-center gap-3 text-xs\">\r\n                <span\r\n                  className={`inline-flex items-center gap-2 rounded-full px-3 py-1 font-medium ${STATUS_STYLES[streamStatus]}`}\r\n                >\r\n                  <span className=\"h-1.5 w-1.5 rounded-full bg-current\" />\r\n                  {STATUS_LABELS[streamStatus]}\r\n                </span>\r\n                {runId && (\r\n                  <span className=\"font-mono text-[11px] text-gray-500\">Run #{runId.slice(-6)}</span>\r\n                )}\r\n                {!isElectron && !apiBaseUrl && (\r\n                  <span className=\"text-[11px] text-amber-300\">\r\n                    Set API_BASE_URL to enable live streaming outside Electron.\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              {streamTranscript && (\r\n                <div className=\"rounded-lg border border-slate-700/60 bg-slate-900/70 p-3 text-sm text-slate-200 whitespace-pre-wrap\">\r\n                  {streamTranscript}\r\n                </div>\r\n              )}\r\n\r\n              {streamError && (\r\n                <div className=\"rounded-lg border border-rose-500/40 bg-rose-500/10 p-3 text-xs text-rose-100\">\r\n                  {streamError}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-3\">\r\n                {streamEvents.map((event) => (\r\n                  <div\r\n                    key={event.id}\r\n                    className=\"rounded-lg border border-slate-700/60 bg-slate-900/60 p-3 text-sm text-slate-200\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between text-[11px] uppercase tracking-[0.2em] text-slate-500\">\r\n                      <span>{event.type}</span>\r\n                      <span>{formatDistanceToNow(new Date(event.timestamp), { addSuffix: true })}</span>\r\n                    </div>\r\n                    {event.content && (\r\n                      <div className=\"mt-2 whitespace-pre-wrap text-slate-200\">\r\n                        {event.content}\r\n                      </div>\r\n                    )}\r\n                    {event.type === 'consent' && (\r\n                      <div className=\"mt-2 flex items-center gap-2 text-xs text-slate-300\">\r\n                        <ShieldAlert\r\n                          size={14}\r\n                          className={\r\n                            event.risk === 'high'\r\n                              ? 'text-rose-400'\r\n                              : event.risk === 'medium'\r\n                              ? 'text-amber-400'\r\n                              : 'text-emerald-400'\r\n                          }\r\n                        />\r\n                        <span>\r\n                          {event.approved ? 'Approved' : 'Denied'}\r\n                          {event.risk ? ` • ${event.risk.toUpperCase()}` : ''}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n\r\n                {streamEvents.length === 0 && (\r\n                  <div className=\"rounded-lg border border-dashed border-slate-700/60 bg-slate-900/50 p-4 text-xs text-slate-400\">\r\n                    {streamStatus === 'connecting' && 'Connecting to Redix agent…'}\r\n                    {streamStatus === 'live' && 'Awaiting first tokens from the agent…'}\r\n                    {streamStatus === 'complete' && 'Run complete. Review the transcript above.'}\r\n                    {streamStatus === 'idle' && 'Trigger an agent action to see responses in real time.'}\r\n                    {streamStatus === 'error' && (streamError || 'Agent stream unavailable.')}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {consentLedger.length > 0 && (\r\n                <div className=\"pt-2\">\r\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-2\">Recent consent checks</h4>\r\n                  <div className=\"space-y-2 text-xs text-slate-300\">\r\n                    {consentLedger.slice(-5).map((entry) => (\r\n                      <div\r\n                        key={entry.id}\r\n                        className=\"rounded-lg border border-slate-700/60 bg-slate-900/60 p-3\"\r\n                      >\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <span className=\"text-slate-200\">{entry.action.description}</span>\r\n                          <span className={`font-medium ${entry.approved ? 'text-emerald-300' : 'text-rose-300'}`}>\r\n                            {entry.approved ? 'Approved' : 'Denied'}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"mt-1 flex items-center justify-between text-[11px] text-slate-500\">\r\n                          <span>{entry.action.type}</span>\r\n                          <span>{new Date(entry.timestamp).toLocaleTimeString()}</span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n          )}\r\n          {activeTab === 'plan' && plan && (\r\n            <motion.div\r\n              key=\"plan\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-4\"\r\n            >\r\n              <div>\r\n                <h4 className=\"text-sm font-semibold text-gray-300 mb-2\">Goal</h4>\r\n                <p className=\"text-sm text-gray-400\">{plan.goal}</p>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"text-sm font-semibold text-gray-300 mb-2\">Budget</h4>\r\n                <div className=\"bg-gray-800/50 rounded p-3 text-xs space-y-1\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-400\">Tokens:</span>\r\n                    <span className=\"text-gray-200\">{plan.remaining.tokens} / {plan.budget.tokens}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-400\">Time:</span>\r\n                    <span className=\"text-gray-200\">{plan.remaining.seconds}s / {plan.budget.seconds}s</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-400\">Requests:</span>\r\n                    <span className=\"text-gray-200\">{plan.remaining.requests} / {plan.budget.requests}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {plan.steps.length > 0 && (\r\n                <div className=\"mb-4\">\r\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-2 flex items-center gap-2\">\r\n                    <SparkleTrail />\r\n                    Redix thinking\r\n                  </h4>\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    {plan.steps.map((step, idx) => {\r\n                      const action = actions.find((a) => a.id === step.id);\r\n                      let status: 'pending' | 'running' | 'completed' | 'error' = 'pending';\r\n                      if (action?.status === 'completed') status = 'completed';\r\n                      else if (action?.status === 'error') status = 'error';\r\n                      else if (action?.status === 'running' || currentStep === step.id) status = 'running';\r\n\r\n                      return (\r\n                        <motion.div\r\n                          key={`bubble-${step.id}`}\r\n                          className=\"flex flex-col items-center gap-1\"\r\n                          initial={{ opacity: 0, y: 6 }}\r\n                          animate={{ opacity: 1, y: 0 }}\r\n                          transition={{ delay: idx * 0.05 }}\r\n                        >\r\n                          <div\r\n                            className={`relative flex h-12 w-12 items-center justify-center rounded-full border transition-all ${\r\n                              status === 'completed'\r\n                                ? 'border-emerald-400/60 bg-emerald-500/15 text-emerald-200'\r\n                                : status === 'error'\r\n                                ? 'border-rose-400/60 bg-rose-500/15 text-rose-200'\r\n                                : status === 'running'\r\n                                ? 'border-blue-400/70 bg-blue-500/15 text-blue-100'\r\n                                : 'border-slate-600/70 bg-slate-800/60 text-slate-300'\r\n                            } ${status === 'pending' ? 'opacity-70' : ''}`}\r\n                          >\r\n                            {status === 'running' && (\r\n                              <motion.div\r\n                                className=\"absolute inset-[3px] rounded-full bg-gradient-to-r from-blue-400/40 via-purple-400/40 to-blue-400/40\"\r\n                                animate={{ rotate: 360 }}\r\n                                transition={{ duration: 3, repeat: Infinity, ease: 'linear' }}\r\n                              />\r\n                            )}\r\n                            <span className=\"relative z-10 text-xs font-semibold text-white/90\">{idx + 1}</span>\r\n                          </div>\r\n                          <span className=\"w-20 text-center text-[10px] text-gray-400 line-clamp-2\">\r\n                            {step.tool || step.description}\r\n                          </span>\r\n                        </motion.div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <h4 className=\"text-sm font-semibold text-gray-300 mb-2\">Steps ({plan.steps.length})</h4>\r\n                <div className=\"space-y-2\">\r\n                  {plan.steps.map((step, idx) => {\r\n                    const isCurrent = step.id === currentStep;\r\n                    const action = actions.find(a => a.id === step.id);\r\n                    return (\r\n                      <motion.div\r\n                        key={step.id}\r\n                        initial={{ opacity: 0, x: -10 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        className={`p-3 rounded-lg border ${\r\n                          isCurrent\r\n                            ? 'border-blue-500/50 bg-blue-500/10'\r\n                            : action?.status === 'completed'\r\n                            ? 'border-green-500/30 bg-green-500/5'\r\n                            : action?.status === 'error'\r\n                            ? 'border-red-500/30 bg-red-500/5'\r\n                            : 'border-gray-700/50 bg-gray-800/30'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                          <span className=\"text-xs font-mono text-gray-500\">#{idx + 1}</span>\r\n                          <span className=\"text-sm font-medium text-gray-200\">{step.tool || step.description}</span>\r\n                          {isCurrent && (\r\n                            <motion.div\r\n                              animate={{ opacity: [1, 0.5, 1] }}\r\n                              transition={{ repeat: Infinity, duration: 1.5 }}\r\n                              className=\"w-2 h-2 bg-blue-400 rounded-full\"\r\n                            />\r\n                          )}\r\n                          {action?.status === 'completed' && (\r\n                            <CheckCircle2 size={14} className=\"text-green-400\" />\r\n                          )}\r\n                          {action?.status === 'error' && (\r\n                            <XCircle size={14} className=\"text-red-400\" />\r\n                          )}\r\n                        </div>\r\n                        {step.description && (\r\n                          <div className=\"text-xs text-gray-400 mt-1\">{step.description}</div>\r\n                        )}\r\n                        {action?.result && (\r\n                          <div className=\"text-xs text-gray-500 font-mono mt-2 truncate\">\r\n                            {JSON.stringify(action.result).slice(0, 100)}...\r\n                          </div>\r\n                        )}\r\n                      </motion.div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n\r\n          {activeTab === 'actions' && (\r\n            <motion.div\r\n              key=\"actions\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-2\"\r\n            >\r\n              {actions.length === 0 ? (\r\n                <div className=\"space-y-2\">\r\n                  {plan?.steps.slice(0, 3).map((step) => (\r\n                    <div\r\n                      key={`skeleton-${step.id}`}\r\n                      className=\"overflow-hidden rounded-lg border border-blue-500/30 bg-blue-500/5 p-3\"\r\n                    >\r\n                      <div className=\"mb-2 flex items-center gap-2 text-sm text-blue-200/80\">\r\n                        <div className=\"h-2 w-2 animate-ping rounded-full bg-blue-400/80\" />\r\n                        <span>{step.tool || step.description}</span>\r\n                      </div>\r\n                        <div className=\"flex flex-col gap-2 text-xs text-blue-100/70\">\r\n                          <div className=\"h-1.5 w-full animate-pulse rounded bg-blue-300/30\" />\r\n                          <div className=\"h-1.5 w-3/4 animate-pulse rounded bg-blue-300/20\" />\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                  <div className=\"flex items-center justify-center gap-2 rounded-lg border border-blue-500/30 bg-blue-500/10 py-3 text-xs text-blue-200/80\">\r\n                    <LoaderDots />\r\n                    Waiting for Redix to execute actions…\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                actions.map((action) => (\r\n                  <div\r\n                    key={action.id}\r\n                    className={`p-3 rounded-lg border ${\r\n                      action.status === 'completed'\r\n                        ? 'border-green-500/30 bg-green-500/5'\r\n                        : action.status === 'error'\r\n                        ? 'border-red-500/30 bg-red-500/5'\r\n                        : action.status === 'running'\r\n                        ? 'border-blue-500/50 bg-blue-500/10'\r\n                        : 'border-gray-700/50 bg-gray-800/30'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      <span className=\"text-sm font-medium text-gray-200\">{action.tool}</span>\r\n                      {action.status === 'completed' && <CheckCircle2 size={14} className=\"text-green-400\" />}\r\n                      {action.status === 'error' && <XCircle size={14} className=\"text-red-400\" />}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-400 font-mono mb-2\">\r\n                      Args: {JSON.stringify(action.args).slice(0, 100)}\r\n                    </div>\r\n                    {action.result && (\r\n                      <div className=\"text-xs text-gray-500 font-mono\">\r\n                        Result: {JSON.stringify(action.result).slice(0, 200)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))\r\n              )}\r\n            </motion.div>\r\n          )}\r\n\r\n          {activeTab === 'logs' && (\r\n            <motion.div\r\n              key=\"logs\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-1\"\r\n            >\r\n              {logs.length === 0 ? (\r\n                <div className=\"text-center text-gray-500 py-8\">\r\n                  <ScrollText size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                  <p className=\"text-sm\">No logs yet</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"font-mono text-xs text-gray-400 space-y-1 max-h-[500px] overflow-y-auto\">\r\n                  {logs.map((log, idx) => (\r\n                    <div key={idx} className=\"hover:bg-gray-800/30 rounded px-2 py-1\">\r\n                      {log}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n          )}\r\n\r\n          {activeTab === 'memory' && (\r\n            <motion.div\r\n              key=\"memory\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-2\"\r\n            >\r\n              {memory.length === 0 ? (\r\n                <div className=\"text-center text-gray-500 py-8\">\r\n                  <Brain size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                  <p className=\"text-sm\">No memory entries yet</p>\r\n                </div>\r\n              ) : (\r\n                memory.map((entry, idx) => (\r\n                  <div key={idx} className=\"p-3 rounded-lg border border-gray-700/50 bg-gray-800/30\">\r\n                    <div className=\"text-xs text-gray-400 font-mono\">\r\n                      {JSON.stringify(entry, null, 2)}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </motion.div>\r\n          )}\r\n\r\n          {activeTab === 'ledger' && (\r\n            <motion.div\r\n              key=\"ledger\"\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              className=\"space-y-2\"\r\n            >\r\n              {consentLedger.length === 0 ? (\r\n                <div className=\"text-center text-gray-500 py-8\">\r\n                  <Shield size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                  <p className=\"text-sm\">No consent entries yet</p>\r\n                </div>\r\n              ) : (\r\n                consentLedger.map((entry) => (\r\n                  <div\r\n                    key={entry.id}\r\n                    className={`p-3 rounded-lg border ${\r\n                      entry.approved\r\n                        ? 'border-green-500/30 bg-green-500/5'\r\n                        : 'border-red-500/30 bg-red-500/5'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                      {entry.approved ? (\r\n                        <CheckCircle2 size={14} className=\"text-green-400\" />\r\n                      ) : (\r\n                        <XCircle size={14} className=\"text-red-400\" />\r\n                      )}\r\n                      <span className=\"text-sm font-medium text-gray-200\">{entry.action.type}</span>\r\n                      <span className={`text-xs px-1.5 py-0.5 rounded ${\r\n                        entry.action.risk === 'high'\r\n                          ? 'bg-red-500/20 text-red-400'\r\n                          : entry.action.risk === 'medium'\r\n                          ? 'bg-yellow-500/20 text-yellow-400'\r\n                          : 'bg-green-500/20 text-green-400'\r\n                      }`}>\r\n                        {entry.action.risk}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-400 mb-1\">{entry.action.description}</div>\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      {new Date(entry.timestamp).toLocaleString()} • {entry.origin}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":["STATUS_LABELS","STATUS_STYLES","SparkleTrail","jsx","Sparkles","LoaderDots","delay","motion","AgentOverlay","isActive","setIsActive","useState","activeTab","setActiveTab","plan","setPlan","actions","setActions","logs","setLogs","consentLedger","setConsentLedger","memory","setMemory","currentStep","setCurrentStep","tokens","setTokens","requests","setRequests","startTime","setStartTime","dryRun","setDryRun","isElectron","useMemo","isElectronRuntime","apiBaseUrl","getEnvVar","eventSourceRef","useRef","runId","useAgentStreamStore","state","streamStatus","streamError","streamTranscript","streamEvents","lastGoal","setRun","setStreamStatus","setStreamError","appendStreamEvent","appendTranscript","resetAgentStream","appendMessage","useCallback","text","current","pushStreamEvent","event","timestamp","id","stopStream","resetStream","startStream","goal","planId","response","payload","newRunId","source","data","prev","error","useIPCEvent","stepId","step","existing","s","updated","message","useEffect","ledger","ipc","entry","elapsedTime","tabs","MessageSquareText","FileText","Zap","ScrollText","Brain","Shield","jsxs","Bot","Square","Clock","tab","Icon","AnimatePresence","formatDistanceToNow","ShieldAlert","idx","action","a","status","isCurrent","CheckCircle2","XCircle","log"],"mappings":"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"}