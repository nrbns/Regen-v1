{"version":3,"file":"RedixDebugPanel-B__gR_cw.js","sources":["../../src/components/redix/RedixDebugPanel.tsx"],"sourcesContent":["/**\r\n * Redix Debug Panel\r\n * Time-travel debugging UI for Redix event log\r\n */\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  X, \r\n  SkipBack, \r\n  SkipForward, \r\n  RotateCcw, \r\n  RotateCw,\r\n  Download,\r\n  Upload,\r\n  Search,\r\n  Clock,\r\n  Activity,\r\n} from 'lucide-react';\r\nimport {\r\n  getEventLog,\r\n  getCurrentState,\r\n  getStateAtEventIndex,\r\n  undo,\r\n  redo,\r\n  exportEventLog,\r\n  importEventLog,\r\n  getEventsByType,\r\n  RedixEvent,\r\n  RedixState,\r\n} from '../../core/redix/event-log';\r\n\r\ninterface RedixDebugPanelProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function RedixDebugPanel({ open, onClose }: RedixDebugPanelProps) {\r\n  const [events, setEvents] = useState<RedixEvent[]>([]);\r\n  const [currentState, setCurrentState] = useState<RedixState>({});\r\n  const [selectedEventIndex, setSelectedEventIndex] = useState<number | null>(null);\r\n  const [timeTravelState, setTimeTravelState] = useState<RedixState | null>(null);\r\n  const [filterType, setFilterType] = useState<string>('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  // Playback controls (for future enhancement)\r\n  // const [isPlaying, setIsPlaying] = useState(false);\r\n  // const [playbackSpeed, setPlaybackSpeed] = useState(1);\r\n\r\n  // Load events and state\r\n  useEffect(() => {\r\n    if (!open) return;\r\n\r\n    const loadData = () => {\r\n      const allEvents = getEventLog();\r\n      setEvents(allEvents);\r\n      setCurrentState(getCurrentState());\r\n      \r\n      if (selectedEventIndex === null && allEvents.length > 0) {\r\n        setSelectedEventIndex(allEvents.length - 1);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n    const interval = setInterval(loadData, 1000); // Refresh every second\r\n    return () => clearInterval(interval);\r\n  }, [open, selectedEventIndex]);\r\n\r\n  // Update time-travel state when selected event changes\r\n  useEffect(() => {\r\n    if (selectedEventIndex !== null && selectedEventIndex >= 0 && selectedEventIndex < events.length) {\r\n      try {\r\n        const state = getStateAtEventIndex(selectedEventIndex);\r\n        setTimeTravelState(state);\r\n      } catch (error) {\r\n        console.error('[RedixDebug] Failed to get state at index:', error);\r\n        setTimeTravelState(null);\r\n      }\r\n    } else {\r\n      setTimeTravelState(null);\r\n    }\r\n  }, [selectedEventIndex, events.length]);\r\n\r\n  // Filtered events\r\n  const filteredEvents = useMemo(() => {\r\n    let filtered = events;\r\n\r\n    if (filterType) {\r\n      filtered = getEventsByType(filterType);\r\n    }\r\n\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(e => \r\n        e.type.toLowerCase().includes(query) ||\r\n        JSON.stringify(e.payload).toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [events, filterType, searchQuery]);\r\n\r\n  // Unique event types\r\n  const eventTypes = useMemo(() => {\r\n    const types = new Set(events.map(e => e.type));\r\n    return Array.from(types).sort();\r\n  }, [events]);\r\n\r\n  const handleUndo = () => {\r\n    const newState = undo();\r\n    if (newState) {\r\n      setCurrentState(newState);\r\n      const allEvents = getEventLog();\r\n      setEvents(allEvents);\r\n      if (allEvents.length > 0) {\r\n        setSelectedEventIndex(allEvents.length - 1);\r\n      } else {\r\n        setSelectedEventIndex(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRedo = () => {\r\n    const newState = redo();\r\n    if (newState) {\r\n      setCurrentState(newState);\r\n      const allEvents = getEventLog();\r\n      setEvents(allEvents);\r\n      if (allEvents.length > 0) {\r\n        setSelectedEventIndex(allEvents.length - 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleExport = () => {\r\n    try {\r\n      const exported = exportEventLog();\r\n      const blob = new Blob([exported], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `redix-event-log-${Date.now()}.json`;\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error('[RedixDebug] Failed to export:', error);\r\n      alert('Failed to export event log');\r\n    }\r\n  };\r\n\r\n  const handleImport = () => {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = 'application/json';\r\n    input.onchange = async (e) => {\r\n      const file = (e.target as HTMLInputElement).files?.[0];\r\n      if (!file) return;\r\n\r\n      try {\r\n        const text = await file.text();\r\n        importEventLog(text);\r\n        const allEvents = getEventLog();\r\n        setEvents(allEvents);\r\n        setCurrentState(getCurrentState());\r\n        if (allEvents.length > 0) {\r\n          setSelectedEventIndex(allEvents.length - 1);\r\n        }\r\n      } catch (error) {\r\n        console.error('[RedixDebug] Failed to import:', error);\r\n        alert('Failed to import event log');\r\n      }\r\n    };\r\n    input.click();\r\n  };\r\n\r\n  // Jump to event handler (for future enhancement)\r\n  // const handleJumpToEvent = (index: number) => {\r\n  //   const event = filteredEvents[index];\r\n  //   if (event) {\r\n  //     const globalIndex = events.findIndex(e => e.id === event.id);\r\n  //     if (globalIndex >= 0) {\r\n  //       setSelectedEventIndex(globalIndex);\r\n  //     }\r\n  //   }\r\n  // };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {open && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={onClose}\r\n            className=\"fixed inset-0 bg-black/50 z-50\"\r\n          />\r\n\r\n          {/* Panel */}\r\n          <motion.div\r\n            initial={{ x: '100%' }}\r\n            animate={{ x: 0 }}\r\n            exit={{ x: '100%' }}\r\n            className=\"fixed right-0 top-0 bottom-0 w-[800px] bg-gray-900 border-l border-gray-800 z-50 flex flex-col\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-800\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Activity size={20} className=\"text-purple-400\" />\r\n                <h2 className=\"text-lg font-semibold text-white\">Redix Debug Panel</h2>\r\n              </div>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"rounded-lg p-1.5 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors\"\r\n              >\r\n                <X size={18} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Controls */}\r\n            <div className=\"p-4 border-b border-gray-800 space-y-3\">\r\n              {/* Search and Filter */}\r\n              <div className=\"flex gap-2\">\r\n                <div className=\"relative flex-1\">\r\n                  <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search events...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"w-full pl-10 pr-4 py-2 rounded-lg bg-gray-800/50 border border-gray-700 text-white placeholder:text-gray-500 focus:outline-none focus:border-purple-500/50\"\r\n                  />\r\n                </div>\r\n                <select\r\n                  value={filterType}\r\n                  onChange={(e) => setFilterType(e.target.value)}\r\n                  className=\"px-3 py-2 rounded-lg bg-gray-800/50 border border-gray-700 text-white focus:outline-none focus:border-purple-500/50\"\r\n                >\r\n                  <option value=\"\">All Types</option>\r\n                  {eventTypes.map(type => (\r\n                    <option key={type} value={type}>{type}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* Time Travel Controls */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={() => setSelectedEventIndex(0)}\r\n                  disabled={events.length === 0}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50\"\r\n                >\r\n                  <SkipBack size={14} />\r\n                </button>\r\n                <button\r\n                  onClick={() => selectedEventIndex !== null && setSelectedEventIndex(Math.max(0, selectedEventIndex - 1))}\r\n                  disabled={selectedEventIndex === null || selectedEventIndex === 0}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50\"\r\n                >\r\n                  <RotateCcw size={14} />\r\n                </button>\r\n                <div className=\"flex-1 text-center text-sm text-gray-400\">\r\n                  {selectedEventIndex !== null ? `${selectedEventIndex + 1} / ${events.length}` : 'No events'}\r\n                </div>\r\n                <button\r\n                  onClick={() => selectedEventIndex !== null && setSelectedEventIndex(Math.min(events.length - 1, selectedEventIndex + 1))}\r\n                  disabled={selectedEventIndex === null || selectedEventIndex === events.length - 1}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50\"\r\n                >\r\n                  <RotateCw size={14} />\r\n                </button>\r\n                <button\r\n                  onClick={() => setSelectedEventIndex(events.length - 1)}\r\n                  disabled={events.length === 0}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700/50\"\r\n                >\r\n                  <SkipForward size={14} />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Undo/Redo and Export/Import */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={handleUndo}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white hover:bg-gray-700/50\"\r\n                >\r\n                  <RotateCcw size={14} className=\"inline mr-1\" />\r\n                  Undo\r\n                </button>\r\n                <button\r\n                  onClick={handleRedo}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white hover:bg-gray-700/50\"\r\n                >\r\n                  <RotateCw size={14} className=\"inline mr-1\" />\r\n                  Redo\r\n                </button>\r\n                <div className=\"flex-1\" />\r\n                <button\r\n                  onClick={handleExport}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white hover:bg-gray-700/50\"\r\n                >\r\n                  <Download size={14} className=\"inline mr-1\" />\r\n                  Export\r\n                </button>\r\n                <button\r\n                  onClick={handleImport}\r\n                  className=\"px-3 py-1.5 rounded-lg bg-gray-800/50 border border-gray-700 text-white hover:bg-gray-700/50\"\r\n                >\r\n                  <Upload size={14} className=\"inline mr-1\" />\r\n                  Import\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 overflow-hidden flex\">\r\n              {/* Event List */}\r\n              <div className=\"w-1/2 border-r border-gray-800 overflow-y-auto\">\r\n                <div className=\"p-4 space-y-2\">\r\n                  {filteredEvents.length === 0 ? (\r\n                    <div className=\"text-center text-gray-500 py-8\">\r\n                      <Clock size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <p>No events found</p>\r\n                    </div>\r\n                  ) : (\r\n                    filteredEvents.map((event) => {\r\n                      const globalIndex = events.findIndex(e => e.id === event.id);\r\n                      const isSelected = globalIndex === selectedEventIndex;\r\n                      \r\n                      return (\r\n                        <motion.div\r\n                          key={event.id}\r\n                          initial={{ opacity: 0, y: 10 }}\r\n                          animate={{ opacity: 1, y: 0 }}\r\n                          onClick={() => setSelectedEventIndex(globalIndex)}\r\n                          className={`p-3 rounded-lg border cursor-pointer transition-colors ${\r\n                            isSelected\r\n                              ? 'bg-purple-500/20 border-purple-500/40'\r\n                              : 'bg-gray-800/50 border-gray-700/50 hover:border-purple-500/40'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-start justify-between mb-1\">\r\n                            <div className=\"text-xs text-purple-400 font-medium\">\r\n                              {event.type}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500\">\r\n                              {new Date(event.timestamp).toLocaleTimeString()}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-300 line-clamp-2\">\r\n                            {JSON.stringify(event.payload).substring(0, 100)}\r\n                          </div>\r\n                        </motion.div>\r\n                      );\r\n                    })\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* State View */}\r\n              <div className=\"w-1/2 overflow-y-auto\">\r\n                <div className=\"p-4\">\r\n                  <div className=\"text-sm font-semibold text-gray-300 mb-3\">\r\n                    {selectedEventIndex !== null ? `State at Event ${selectedEventIndex + 1}` : 'Current State'}\r\n                  </div>\r\n                  <pre className=\"text-xs text-gray-400 bg-gray-800/50 p-3 rounded-lg border border-gray-700 overflow-auto\">\r\n                    {JSON.stringify(\r\n                      timeTravelState !== null ? timeTravelState : currentState,\r\n                      null,\r\n                      2\r\n                    )}\r\n                  </pre>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n"],"names":["RedixDebugPanel","open","onClose","events","setEvents","useState","currentState","setCurrentState","selectedEventIndex","setSelectedEventIndex","timeTravelState","setTimeTravelState","filterType","setFilterType","searchQuery","setSearchQuery","useEffect","loadData","allEvents","getEventLog","getCurrentState","interval","state","getStateAtEventIndex","error","filteredEvents","useMemo","filtered","getEventsByType","query","e","eventTypes","types","handleUndo","newState","undo","handleRedo","redo","handleExport","exported","exportEventLog","blob","url","a","handleImport","input","file","text","importEventLog","jsx","AnimatePresence","jsxs","Fragment","motion","Activity","X","Search","type","SkipBack","RotateCcw","RotateCw","SkipForward","Download","Upload","Clock","event","globalIndex","isSelected"],"mappings":"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"}