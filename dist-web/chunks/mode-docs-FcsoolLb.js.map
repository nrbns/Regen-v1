{"version":3,"file":"mode-docs-FcsoolLb.js","sources":["../../src/modes/docs/parsers/pdf.ts","../../src/modes/docs/parsers/docx.ts","../../src/components/empty-states/EmptyState.tsx","../../src/modes/docs/DocumentMode.tsx"],"sourcesContent":["import * as pdfjsLib from 'pdfjs-dist';\r\n// @ts-ignore\r\nimport pdfWorker from 'pdfjs-dist/build/pdf.worker.mjs?worker&url';\r\n(pdfjsLib as any).GlobalWorkerOptions.workerSrc = pdfWorker;\r\n\r\nexport async function parsePdfFile(file: File): Promise<string> {\r\n  const buf = await file.arrayBuffer();\r\n  const pdf = await (pdfjsLib as any).getDocument({ data: buf }).promise;\r\n  let out = '';\r\n  for (let i = 1; i <= pdf.numPages; i++) {\r\n    const page = await pdf.getPage(i);\r\n    const content = await page.getTextContent();\r\n    const s = content.items.map((it: any)=> it.str).join(' ');\r\n    out += s + '\\n';\r\n  }\r\n  return out.trim();\r\n}\r\n\r\n\r\n","import mammoth from 'mammoth';\r\n\r\nexport async function parseDocxFile(file: File): Promise<string> {\r\n  const buf = await file.arrayBuffer();\r\n  const res = await mammoth.extractRawText({ arrayBuffer: buf });\r\n  return (res.value || '').trim();\r\n}\r\n\r\n\r\n","/**\n * Empty State Components - Tier 3\n * Helpful empty states instead of dead UI\n */\n\nimport { ReactNode } from 'react';\nimport { motion } from 'framer-motion';\nimport { LucideIcon, FileText, Star, FolderOpen, Sparkles, Search } from 'lucide-react';\n\ninterface EmptyStateProps {\n  icon: LucideIcon;\n  title: string;\n  description: string;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  illustration?: ReactNode;\n}\n\nexport function EmptyState({\n  icon: Icon,\n  title,\n  description,\n  action,\n  illustration,\n}: EmptyStateProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"flex flex-col items-center justify-center py-16 px-6 text-center\"\n    >\n      {illustration ? (\n        <div className=\"mb-6\">{illustration}</div>\n      ) : (\n        <div className=\"mb-6 p-4 rounded-2xl bg-gradient-to-br from-purple-500/10 to-cyan-500/10\">\n          <Icon size={48} className=\"text-purple-300\" />\n        </div>\n      )}\n      <h3 className=\"text-xl font-semibold text-white mb-2\">{title}</h3>\n      <p className=\"text-slate-400 max-w-md mb-6\">{description}</p>\n      {action && (\n        <button\n          onClick={action.onClick}\n          className=\"px-6 py-3 rounded-lg bg-gradient-to-r from-purple-500 to-cyan-500 text-white font-medium hover:from-purple-600 hover:to-cyan-600 transition-all shadow-lg shadow-purple-500/30\"\n        >\n          {action.label}\n        </button>\n      )}\n    </motion.div>\n  );\n}\n\n// Pre-built empty states\nexport const EmptyStates = {\n  NoTabs: () => (\n    <EmptyState\n      icon={FileText}\n      title=\"No tabs open\"\n      description=\"Create a new tab to start browsing. Try Research mode for AI-powered insights.\"\n      action={{\n        label: 'New Tab',\n        onClick: async () => {\n          const { ipc } = await import('../../lib/ipc-typed');\n          const newTab = await ipc.tabs.create('about:blank');\n          if (newTab) {\n            const tabId =\n              typeof newTab === 'object' && 'id' in newTab\n                ? newTab.id\n                : typeof newTab === 'string'\n                  ? newTab\n                  : null;\n            if (tabId && typeof tabId === 'string') {\n              const { useTabsStore } = await import('../../state/tabsStore');\n              useTabsStore.getState().setActive(tabId);\n            }\n          }\n        },\n      }}\n    />\n  ),\n\n  NoBookmarks: () => (\n    <EmptyState\n      icon={Star}\n      title=\"No bookmarks yet\"\n      description=\"Click the star icon in the address bar to bookmark pages you want to revisit.\"\n      action={{\n        label: 'Browse',\n        onClick: async () => {\n          const { ipc } = await import('../../lib/ipc-typed');\n          await ipc.tabs.create('https://www.google.com');\n        },\n      }}\n    />\n  ),\n\n  NoWorkspaces: () => (\n    <EmptyState\n      icon={FolderOpen}\n      title=\"No workspaces saved\"\n      description=\"Save your current tabs as a workspace to quickly restore your work sessions later.\"\n      action={{\n        label: 'Save Current Session',\n        onClick: () => {\n          // This will be handled by WorkspacesPanel\n          const event = new CustomEvent('workspace:save');\n          window.dispatchEvent(event);\n        },\n      }}\n    />\n  ),\n\n  NoAgentRuns: () => (\n    <EmptyState\n      icon={Sparkles}\n      title=\"No agent tasks yet\"\n      description=\"Try asking OmniAgent to explain a page, research a topic, or compare URLs.\"\n      action={{\n        label: 'Try OmniAgent',\n        onClick: async () => {\n          const { useAppStore } = await import('../../state/appStore');\n          await useAppStore.getState().setMode('Research');\n        },\n      }}\n    />\n  ),\n\n  NoDocuments: ({ onUpload }: { onUpload: (files: FileList | null) => void }) => (\n    <EmptyState\n      icon={FileText}\n      title=\"No documents loaded\"\n      description=\"Upload PDF, DOCX, or text files to analyze them with AI.\"\n      action={{\n        label: 'Upload Documents',\n        onClick: () => {\n          const input = document.createElement('input');\n          input.type = 'file';\n          input.multiple = true;\n          input.accept = '.pdf,.docx,.txt,.md';\n          input.onchange = e => {\n            const target = e.target as HTMLInputElement;\n            onUpload(target.files);\n          };\n          input.click();\n        },\n      }}\n    />\n  ),\n\n  NoSearchResults: (query: string) => (\n    <EmptyState\n      icon={Search}\n      title=\"No results found\"\n      description={`We couldn't find anything matching \"${query}\". Try different keywords or check your search settings.`}\n    />\n  ),\n};\n","/**\n * Document Mode - Tier 3 Pillar 2\n * PDF/document upload and AI digestion\n */\n\nimport { useState } from 'react';\nimport { FileText, Upload, Sparkles, FileCheck } from 'lucide-react';\nimport { EmptyStates } from '../../components/empty-states/EmptyState';\n\ntype Document = {\n  id: string;\n  name: string;\n  type: string;\n  size: number;\n  uploadedAt: number;\n  processed?: boolean;\n};\n\nexport function DocumentMode() {\n  const [documents, setDocuments] = useState<Document[]>([]);\n  const [_uploading, setUploading] = useState(false);\n\n  const handleFileUpload = async (files: FileList | null) => {\n    if (!files || files.length === 0) return;\n\n    setUploading(true);\n    try {\n      // TODO: Implement actual upload and processing\n      const newDocs: Document[] = Array.from(files).map(file => ({\n        id: `doc-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`,\n        name: file.name,\n        type: file.type,\n        size: file.size,\n        uploadedAt: Date.now(),\n        processed: false,\n      }));\n\n      setDocuments(prev => [...prev, ...newDocs]);\n    } catch (error) {\n      console.error('Failed to upload documents', error);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  if (documents.length === 0) {\n    return (\n      <div className=\"h-full w-full\">\n        <EmptyStates.NoDocuments onUpload={handleFileUpload} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-full w-full bg-slate-950\">\n      {/* Document List */}\n      <div className=\"w-80 border-r border-slate-800 p-4\">\n        <div className=\"mb-4 flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-white\">Documents</h2>\n          <label className=\"cursor-pointer rounded-lg bg-purple-600 px-3 py-1.5 text-sm text-white transition-colors hover:bg-purple-700\">\n            <Upload size={16} className=\"mr-1 inline\" />\n            Upload\n            <input\n              type=\"file\"\n              multiple\n              accept=\".pdf,.docx,.txt,.md\"\n              onChange={e => handleFileUpload(e.target.files)}\n              className=\"hidden\"\n            />\n          </label>\n        </div>\n\n        <div className=\"space-y-2\">\n          {documents.map(doc => (\n            <div\n              key={doc.id}\n              className=\"cursor-pointer rounded-lg border border-slate-800 bg-slate-900/50 p-3 transition-colors hover:bg-slate-900\"\n            >\n              <div className=\"flex items-center gap-2\">\n                <FileText size={16} className=\"text-purple-400\" />\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"truncate text-sm text-white\">{doc.name}</p>\n                  <p className=\"text-xs text-slate-400\">{(doc.size / 1024).toFixed(1)} KB</p>\n                </div>\n                {doc.processed && <FileCheck size={14} className=\"text-green-400\" />}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Document View */}\n      <div className=\"flex-1 p-4\">\n        <div className=\"h-full rounded-lg border border-slate-800 bg-slate-900/50 p-6\">\n          <div className=\"mb-4 flex items-center gap-3\">\n            <Sparkles size={20} className=\"text-purple-400\" />\n            <h3 className=\"text-lg font-semibold text-white\">AI Analysis</h3>\n          </div>\n          <p className=\"text-slate-400\">\n            Select a document to see AI-powered analysis, summaries, and extracted information.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Add to EmptyStates\nexport const NoDocuments = ({ onUpload }: { onUpload: (files: FileList | null) => void }) => (\n  <div className=\"flex h-full flex-col items-center justify-center\">\n    <div className=\"mb-6 rounded-2xl bg-gradient-to-br from-purple-500/10 to-cyan-500/10 p-4\">\n      <FileText size={48} className=\"text-purple-300\" />\n    </div>\n    <h3 className=\"mb-2 text-xl font-semibold text-white\">No documents yet</h3>\n    <p className=\"mb-6 max-w-md text-center text-slate-400\">\n      Upload PDFs, documents, or text files to get AI-powered summaries and analysis.\n    </p>\n    <label className=\"cursor-pointer rounded-lg bg-gradient-to-r from-purple-500 to-cyan-500 px-6 py-3 font-medium text-white shadow-lg shadow-purple-500/30 transition-all hover:from-purple-600 hover:to-cyan-600\">\n      <Upload size={18} className=\"mr-2 inline\" />\n      Upload Documents\n      <input\n        type=\"file\"\n        multiple\n        accept=\".pdf,.docx,.txt,.md\"\n        onChange={e => onUpload(e.target.files)}\n        className=\"hidden\"\n      />\n    </label>\n  </div>\n);\n"],"names":["pdfjsLib.GlobalWorkerOptions","pdfWorker","parsePdfFile","file","buf","pdf","pdfjsLib.getDocument","out","i","s","it","parseDocxFile","mammoth","EmptyState","Icon","title","description","action","illustration","jsxs","motion","jsx","EmptyStates","onUpload","FileText","input","e","target","DocumentMode","documents","setDocuments","useState","_uploading","setUploading","handleFileUpload","files","newDocs","prev","error","Upload","doc","FileCheck","Sparkles","NoDocuments"],"mappings":"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"}