{"version":3,"file":"ConsentDashboard-CjN7bvtp.js","sources":["../../src/components/Consent/ConsentVaultPanel.tsx","../../src/components/Consent/consentLabels.ts","../../src/components/Consent/ConsentFlowGraph.tsx","../../src/components/Consent/ConsentDashboard.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ShieldCheck, RefreshCw, Download } from 'lucide-react';\r\nimport { ipc } from '../../lib/ipc-typed';\r\n\r\ninterface VaultEntry {\r\n  consentId: string;\r\n  actionType: string;\r\n  approved: boolean;\r\n  timestamp: number;\r\n  signature: string;\r\n  chainHash: string;\r\n  metadata: Record<string, unknown>;\r\n}\r\n\r\ninterface VaultSnapshot {\r\n  entries: VaultEntry[];\r\n  anchor: string;\r\n  updatedAt: number;\r\n}\r\n\r\nexport function ConsentVaultPanel() {\r\n  const [snapshot, setSnapshot] = useState<VaultSnapshot | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchSnapshot = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await ipc.consent.vault.export();\r\n      setSnapshot(response as VaultSnapshot);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : String(err));\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    void fetchSnapshot();\r\n  }, []);\r\n\r\n  const handleExport = () => {\r\n    if (!snapshot) return;\r\n    const blob = new Blob([JSON.stringify(snapshot, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const anchor = document.createElement('a');\r\n    anchor.href = url;\r\n    anchor.download = `consent-vault-${snapshot.updatedAt}.json`;\r\n    anchor.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"rounded-3xl border border-emerald-500/30 bg-emerald-950/20 p-4 text-emerald-100 shadow-[0_20px_60px_rgba(16,185,129,0.25)]\">\r\n      <div className=\"flex items-start justify-between gap-3\">\r\n        <div>\r\n          <div className=\"flex items-center gap-2 text-sm font-semibold text-emerald-200\">\r\n            <ShieldCheck size={16} /> Quantum Consent Vault\r\n          </div>\r\n          <div className=\"text-xs text-emerald-100/70\">Each consent is sealed with a hash-chain signature. Export receipts for audits.</div>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => void fetchSnapshot()}\r\n            className=\"rounded-lg border border-emerald-400/40 bg-emerald-500/10 px-2 py-1 text-[11px] text-emerald-100 hover:bg-emerald-500/20\"\r\n            disabled={loading}\r\n          >\r\n            <div className=\"flex items-center gap-1\">\r\n              <RefreshCw size={12} className={loading ? 'animate-spin' : ''} />\r\n              Refresh\r\n            </div>\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleExport}\r\n            disabled={!snapshot}\r\n            className=\"rounded-lg border border-emerald-400/40 bg-emerald-500/10 px-2 py-1 text-[11px] text-emerald-100 hover:bg-emerald-500/20 disabled:cursor-not-allowed disabled:opacity-60\"\r\n          >\r\n            <div className=\"flex items-center gap-1\">\r\n              <Download size={12} /> Export\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mt-3 rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-[11px] text-rose-100\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {!error && (\r\n        <div className=\"mt-4 max-h-64 overflow-y-auto rounded-2xl border border-emerald-500/15 bg-emerald-900/30\">\r\n          {!snapshot && loading && (\r\n            <div className=\"p-6 text-center text-xs text-emerald-100/70\">Loading quantum receipts…</div>\r\n          )}\r\n          {snapshot && !loading && (\r\n            <div className=\"divide-y divide-emerald-500/10 text-[11px]\">\r\n              {snapshot.entries.map((entry) => {\r\n                const metadata = typeof entry.metadata === 'object' && entry.metadata !== null ? (entry.metadata as Record<string, unknown>) : undefined;\r\n                const risk = typeof metadata?.risk === 'string' ? metadata.risk : undefined;\r\n                const target = typeof metadata?.target === 'string' ? metadata.target : undefined;\r\n                return (\r\n                  <motion.div\r\n                    key={entry.chainHash}\r\n                    initial={{ opacity: 0, y: 8 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ duration: 0.18 }}\r\n                    className=\"space-y-1 px-4 py-3\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between text-emerald-100\">\r\n                      <span className=\"font-medium uppercase tracking-wide text-[10px]\">{entry.actionType}</span>\r\n                      <span className=\"text-emerald-200/70\">{new Date(entry.timestamp).toLocaleString()}</span>\r\n                    </div>\r\n                    <div className=\"text-emerald-100/90 break-all\">Chain hash: {entry.chainHash}</div>\r\n                    <div className=\"text-emerald-100/70 break-all\">Signature: {entry.signature}</div>\r\n                    {risk && <div className=\"text-emerald-100/70\">Risk: {risk}</div>}\r\n                    {target && <div className=\"text-emerald-100/70 break-all\">Target: {target}</div>}\r\n                  </motion.div>\r\n                );\r\n              })}\r\n              {snapshot.entries.length === 0 && (\r\n                <div className=\"p-6 text-center text-xs text-emerald-200/70\">\r\n                  Ledger empty. Approve a consent request to generate the first block.\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {snapshot && (\r\n        <div className=\"mt-3 text-[10px] text-emerald-200/60\">\r\n          Anchor hash: {snapshot.anchor}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import type { ConsentActionType } from '../../types/consent';\r\n\r\nexport const CONSENT_ACTION_LABELS: Record<ConsentActionType, string> = {\r\n  download: 'Download file',\r\n  form_submit: 'Submit form',\r\n  login: 'Login',\r\n  scrape: 'Scrape content',\r\n  export_data: 'Export data',\r\n  access_clipboard: 'Access clipboard',\r\n  access_camera: 'Access camera',\r\n  access_microphone: 'Access microphone',\r\n  access_filesystem: 'Filesystem access',\r\n  ai_cloud: 'Use cloud AI provider',\r\n};\r\n\r\nexport const CONSENT_ACTION_OPTIONS: Array<{ value: ConsentActionType | 'all'; label: string }> = [\r\n  { value: 'all', label: 'All actions' },\r\n  { value: 'download', label: CONSENT_ACTION_LABELS.download },\r\n  { value: 'form_submit', label: CONSENT_ACTION_LABELS.form_submit },\r\n  { value: 'login', label: CONSENT_ACTION_LABELS.login },\r\n  { value: 'scrape', label: CONSENT_ACTION_LABELS.scrape },\r\n  { value: 'export_data', label: CONSENT_ACTION_LABELS.export_data },\r\n  { value: 'access_clipboard', label: CONSENT_ACTION_LABELS.access_clipboard },\r\n  { value: 'access_camera', label: CONSENT_ACTION_LABELS.access_camera },\r\n  { value: 'access_microphone', label: CONSENT_ACTION_LABELS.access_microphone },\r\n  { value: 'access_filesystem', label: CONSENT_ACTION_LABELS.access_filesystem },\r\n  { value: 'ai_cloud', label: CONSENT_ACTION_LABELS.ai_cloud },\r\n];\r\n\r\nexport const CONSENT_STATUS_OPTIONS: Array<{ value: 'all' | 'pending' | 'approved' | 'revoked'; label: string }> = [\r\n  { value: 'all', label: 'All statuses' },\r\n  { value: 'pending', label: 'Pending' },\r\n  { value: 'approved', label: 'Approved' },\r\n  { value: 'revoked', label: 'Revoked' },\r\n];\r\n","import { useEffect, useMemo } from 'react';\r\nimport ReactFlow, { Background, Controls, useNodesState, type Edge, type Node, type NodeProps } from 'reactflow';\r\nimport 'reactflow/dist/style.css';\r\nimport { ShieldAlert, ShieldCheck, AlertTriangle } from 'lucide-react';\r\nimport type { ConsentRecord, ConsentRisk } from '../../types/consent';\r\nimport { CONSENT_ACTION_LABELS } from './consentLabels';\r\nimport type { MouseEvent } from 'react';\r\n\r\ninterface ConsentFlowGraphProps {\r\n  records: ConsentRecord[];\r\n  onApprove: (consentId: string) => Promise<void> | void;\r\n  onRevoke: (consentId: string) => Promise<void> | void;\r\n  loading?: boolean;\r\n}\r\n\r\ntype ConsentNodeStatus = 'pending' | 'approved' | 'revoked';\r\n\r\ntype ConsentNodeData = {\r\n  record: ConsentRecord;\r\n  label: string;\r\n  description: string;\r\n  status: ConsentNodeStatus;\r\n  risk: ConsentRisk;\r\n};\r\n\r\nconst LANE_X: Record<ConsentNodeStatus, number> = {\r\n  pending: 0,\r\n  approved: 260,\r\n  revoked: 520,\r\n};\r\n\r\nconst NODE_Y_START = 80;\r\nconst NODE_Y_GAP = 130;\r\nconst APPROVE_THRESHOLD = (LANE_X.approved + LANE_X.pending) / 2; // midway between pending & approved panes\r\nconst REVOKE_THRESHOLD = (LANE_X.revoked + LANE_X.approved) / 2;\r\n\r\nconst statusClasses: Record<ConsentNodeStatus, string> = {\r\n  pending: 'border-slate-700/60 bg-slate-900/80 text-gray-200',\r\n  approved: 'border-emerald-500/40 bg-emerald-500/10 text-emerald-100',\r\n  revoked: 'border-red-500/40 bg-red-500/10 text-red-100',\r\n};\r\n\r\nfunction renderRiskIcon(risk: ConsentRisk) {\r\n  if (risk === 'high') return <AlertTriangle size={14} className=\"text-red-300\" />;\r\n  if (risk === 'medium') return <ShieldAlert size={14} className=\"text-amber-300\" />;\r\n  return <ShieldCheck size={14} className=\"text-emerald-300\" />;\r\n}\r\n\r\nconst ConsentNode = ({ data }: NodeProps<ConsentNodeData>) => {\r\n  const { label, description, status, risk } = data;\r\n  return (\r\n    <div\r\n      className={`w-56 rounded-2xl border px-4 py-3 shadow-lg shadow-black/30 transition-colors duration-200 ${statusClasses[status]}`}\r\n    >\r\n      <div className=\"flex items-center justify-between gap-2\">\r\n        <span className=\"text-xs font-semibold leading-tight line-clamp-1\">{label}</span>\r\n        {renderRiskIcon(risk)}\r\n      </div>\r\n      <div className=\"mt-2 text-[11px] leading-snug text-gray-300/80 line-clamp-3\">\r\n        {description || 'No additional context provided.'}\r\n      </div>\r\n      {status === 'pending' && (\r\n        <div className=\"mt-3 rounded-lg border border-dashed border-amber-400/60 bg-amber-500/10 px-2 py-1 text-[10px] text-amber-100\">\r\n          Drag into <span className=\"font-semibold\">Approve</span> or <span className=\"font-semibold\">Reject</span> lanes\r\n        </div>\r\n      )}\r\n      {status === 'approved' && (\r\n        <div className=\"mt-3 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-2 py-1 text-[10px] text-emerald-100\">\r\n          Approved and logged in ledger\r\n        </div>\r\n      )}\r\n      {status === 'revoked' && (\r\n        <div className=\"mt-3 rounded-lg border border-red-500/30 bg-red-500/10 px-2 py-1 text-[10px] text-red-100\">\r\n          Revoked – access blocked\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst nodeTypes = { consent: ConsentNode };\r\n\r\nfunction resolveStatus(record: ConsentRecord): ConsentNodeStatus {\r\n  if (record.revokedAt) return 'revoked';\r\n  if (record.approved) return 'approved';\r\n  return 'pending';\r\n}\r\n\r\nfunction buildNodes(records: ConsentRecord[]): Node<ConsentNodeData>[] {\r\n  const grouped: Record<ConsentNodeStatus, ConsentRecord[]> = {\r\n    pending: [],\r\n    approved: [],\r\n    revoked: [],\r\n  };\r\n  records.forEach((record) => {\r\n    const status = resolveStatus(record);\r\n    grouped[status].push(record);\r\n  });\r\n\r\n  return (['pending', 'approved', 'revoked'] as ConsentNodeStatus[]).flatMap((status) => {\r\n    const items = grouped[status];\r\n    return items.slice(0, 6).map((record, index) => ({\r\n      id: record.id,\r\n      type: 'consent',\r\n      position: { x: LANE_X[status], y: NODE_Y_START + index * NODE_Y_GAP },\r\n      data: {\r\n        record,\r\n        label: CONSENT_ACTION_LABELS[record.action.type] ?? record.action.type,\r\n        description: record.action.description ?? '—',\r\n        status,\r\n        risk: record.action.risk,\r\n      },\r\n      draggable: status === 'pending',\r\n    }) as Node<ConsentNodeData>);\r\n  });\r\n}\r\n\r\nexport function ConsentFlowGraph({ records, onApprove, onRevoke, loading }: ConsentFlowGraphProps) {\r\n  const [nodes, setNodes, onNodesChange] = useNodesState<ConsentNodeData>([]);\r\n  const edges = useMemo<Edge[]>(() => [], []);\r\n\r\n  useEffect(() => {\r\n    setNodes(buildNodes(records));\r\n  }, [records, setNodes]);\r\n\r\n  const moveNodeToLane = (nodeId: string, status: ConsentNodeStatus, y: number) => {\r\n    setNodes((current) =>\r\n      current.map((node) =>\r\n        node.id === nodeId\r\n          ? {\r\n              ...node,\r\n              position: { x: LANE_X[status], y },\r\n              data: { ...node.data, status },\r\n              draggable: status === 'pending',\r\n            }\r\n          : node,\r\n      ),\r\n    );\r\n  };\r\n\r\n  const handleNodeDragStop = async (_event: MouseEvent, node: Node<ConsentNodeData>) => {\r\n    const record = node.data?.record;\r\n    if (!record || loading) {\r\n      moveNodeToLane(node.id, 'pending', node.position.y);\r\n      return;\r\n    }\r\n\r\n    const { x, y } = node.position;\r\n\r\n    if (x >= REVOKE_THRESHOLD) {\r\n      moveNodeToLane(node.id, 'revoked', y);\r\n      try {\r\n        await onRevoke(record.id);\r\n      } catch (error) {\r\n        console.warn('[ConsentFlowGraph] revoke failed', error);\r\n        moveNodeToLane(node.id, 'pending', y);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (x >= APPROVE_THRESHOLD) {\r\n      moveNodeToLane(node.id, 'approved', y);\r\n      try {\r\n        await onApprove(record.id);\r\n      } catch (error) {\r\n        console.warn('[ConsentFlowGraph] approve failed', error);\r\n        moveNodeToLane(node.id, 'pending', y);\r\n      }\r\n      return;\r\n    }\r\n\r\n    moveNodeToLane(node.id, 'pending', y);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative h-[360px] w-full overflow-hidden rounded-3xl border border-slate-800/60 bg-slate-950/40\">\r\n      <div className=\"pointer-events-none absolute inset-0 grid grid-cols-3\">\r\n        <div className=\"flex flex-col items-center justify-start gap-2 pt-4\">\r\n          <span className=\"rounded-full border border-slate-700/60 bg-slate-900/70 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-gray-400\">\r\n            Pending\r\n          </span>\r\n          <span className=\"text-[9px] text-gray-500\">Review requested actions</span>\r\n        </div>\r\n        <div className=\"flex flex-col items-center justify-start gap-2 pt-4\">\r\n          <span className=\"rounded-full border border-emerald-500/40 bg-emerald-500/10 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-emerald-200\">\r\n            Approve\r\n          </span>\r\n          <span className=\"text-[9px] text-emerald-200/80\">Drop here to grant consent</span>\r\n        </div>\r\n        <div className=\"flex flex-col items-center justify-start gap-2 pt-4\">\r\n          <span className=\"rounded-full border border-red-500/40 bg-red-500/10 px-3 py-1 text-[10px] uppercase tracking-[0.3em] text-red-200\">\r\n            Reject\r\n          </span>\r\n          <span className=\"text-[9px] text-red-200/80\">Drop here to revoke or deny</span>\r\n        </div>\r\n      </div>\r\n      {records.length === 0 && (\r\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center text-sm text-gray-500\">\r\n          No consent requests yet — drag-to-approve suggestions will appear here.\r\n        </div>\r\n      )}\r\n      <ReactFlow\r\n        nodes={nodes}\r\n        edges={edges}\r\n        onNodesChange={onNodesChange}\r\n        onNodeDragStop={handleNodeDragStop}\r\n        nodeTypes={nodeTypes}\r\n        fitView\r\n        fitViewOptions={{ padding: 0.2 }}\r\n        minZoom={0.85}\r\n        maxZoom={1.4}\r\n        nodesDraggable\r\n        nodesConnectable={false}\r\n        elementsSelectable={false}\r\n        zoomOnDoubleClick={false}\r\n        zoomOnScroll={false}\r\n        zoomOnPinch={false}\r\n        panOnDrag={false}\r\n        preventScrolling={false}\r\n        proOptions={{ hideAttribution: true }}\r\n        className=\"h-full w-full\"\r\n      >\r\n        <Background gap={24} color=\"rgba(148, 163, 184, 0.15)\" />\r\n        <Controls position=\"bottom-right\" showInteractive={false} />\r\n      </ReactFlow>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useMemo, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  X,\n  RefreshCw,\n  Filter,\n  Download,\n  ShieldAlert,\n  ShieldCheck,\n  AlertTriangle,\n} from 'lucide-react';\nimport { useConsentOverlayStore } from '../../state/consentOverlayStore';\nimport { ipc } from '../../lib/ipc-typed';\nimport type { ConsentRecord, ConsentActionType, ConsentRisk } from '../../types/consent';\nimport { formatDistanceToNow } from 'date-fns';\nimport { ConsentVaultPanel } from './ConsentVaultPanel';\nimport {\n  CONSENT_ACTION_LABELS,\n  CONSENT_ACTION_OPTIONS,\n  CONSENT_STATUS_OPTIONS,\n} from './consentLabels';\nimport { ConsentFlowGraph } from './ConsentFlowGraph';\n\nconst statusLabel = (record: ConsentRecord): { label: string; tone: string } => {\n  if (record.revokedAt) {\n    return { label: 'Revoked', tone: 'text-red-400 bg-red-500/10 border-red-500/40' };\n  }\n  if (record.approved) {\n    return { label: 'Approved', tone: 'text-emerald-300 bg-emerald-500/10 border-emerald-500/40' };\n  }\n  return { label: 'Pending', tone: 'text-amber-300 bg-amber-500/10 border-amber-500/40' };\n};\n\nconst riskIcon = (risk: ConsentRisk) => {\n  if (risk === 'high') return <AlertTriangle size={14} className=\"text-red-400\" />;\n  if (risk === 'medium') return <ShieldAlert size={14} className=\"text-amber-400\" />;\n  return <ShieldCheck size={14} className=\"text-emerald-400\" />;\n};\n\nexport function ConsentDashboard() {\n  const { visible, records, loading, error, filter, close, refresh, setFilter, approve, revoke } =\n    useConsentOverlayStore();\n  const [exporting, setExporting] = useState(false);\n\n  useEffect(() => {\n    if (!visible) return;\n    const interval = setInterval(() => {\n      void refresh();\n    }, 20000);\n    return () => clearInterval(interval);\n  }, [visible, refresh]);\n\n  const pendingCount = useMemo(() => records.filter(record => !record.approved).length, [records]);\n  const revokedCount = useMemo(\n    () => records.filter(record => Boolean(record.revokedAt)).length,\n    [records]\n  );\n  const approvedCount = useMemo(\n    () => records.filter(record => record.approved && !record.revokedAt).length,\n    [records]\n  );\n\n  const handleExport = async () => {\n    try {\n      setExporting(true);\n      const json = await ipc.consent.export();\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const anchor = document.createElement('a');\n      anchor.href = url;\n      anchor.download = `regen-consent-ledger-${new Date().toISOString()}.json`;\n      document.body.appendChild(anchor);\n      anchor.click();\n      anchor.remove();\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      console.error('Failed to export consent ledger', err);\n    } finally {\n      setExporting(false);\n    }\n  };\n\n  const renderRecord = (record: ConsentRecord) => {\n    const status = statusLabel(record);\n    const distance = formatDistanceToNow(new Date(record.timestamp), { addSuffix: true });\n    return (\n      <div\n        key={record.id}\n        className=\"rounded-2xl border border-slate-700/60 bg-slate-900/60 p-4 space-y-3\"\n      >\n        <div className=\"flex items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-2 text-sm text-gray-200\">\n            {riskIcon(record.action.risk)}\n            <span>{CONSENT_ACTION_LABELS[record.action.type]}</span>\n          </div>\n          <span className={`rounded-full border px-2 py-0.5 text-[11px] ${status.tone}`}>\n            {status.label}\n          </span>\n        </div>\n        <div className=\"text-xs text-gray-400 leading-relaxed whitespace-pre-wrap\">\n          {record.action.description}\n        </div>\n        <div className=\"grid grid-cols-2 gap-x-4 gap-y-2 text-[11px] text-gray-500\">\n          <div>\n            <span className=\"text-gray-400\">Target:</span>{' '}\n            <span className=\"text-gray-200\">{record.action.target ?? '—'}</span>\n          </div>\n          <div>\n            <span className=\"text-gray-400\">Risk:</span>{' '}\n            <span className=\"text-gray-200 capitalize\">{record.action.risk}</span>\n          </div>\n          <div>\n            <span className=\"text-gray-400\">Requested:</span>{' '}\n            <span className=\"text-gray-200\">{distance}</span>\n          </div>\n          <div>\n            <span className=\"text-gray-400\">Ledger ID:</span>{' '}\n            <span className=\"text-gray-500 font-mono text-[10px]\">{record.id.slice(0, 8)}…</span>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2 text-[11px] text-gray-500\">\n          <span>Signature:</span>\n          <span className=\"font-mono truncate text-gray-600\">{record.signature.slice(0, 24)}…</span>\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-[11px] text-gray-500\">\n            User: <span className=\"text-gray-300\">{record.userId}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {!record.approved && !record.revokedAt && (\n              <>\n                <button\n                  onClick={() => approve(record.id)}\n                  className=\"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-3 py-1 text-xs font-medium text-emerald-200 hover:bg-emerald-500/20\"\n                >\n                  Approve\n                </button>\n                <button\n                  onClick={() => revoke(record.id)}\n                  className=\"rounded-lg border border-red-500/60 bg-red-500/10 px-3 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20\"\n                >\n                  Reject\n                </button>\n              </>\n            )}\n            {record.approved && !record.revokedAt && (\n              <button\n                onClick={() => revoke(record.id)}\n                className=\"rounded-lg border border-amber-500/50 bg-amber-500/10 px-3 py-1 text-xs font-medium text-amber-200 hover:bg-amber-500/20\"\n              >\n                Revoke\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  if (!visible) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-[1100] flex items-center justify-center bg-black/75 backdrop-blur-sm\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.95 }}\n        transition={{ duration: 0.2 }}\n        className=\"relative w-[min(900px,92vw)] max-h-[90vh] overflow-hidden rounded-3xl border border-slate-700/70 bg-slate-950/95 text-gray-100 shadow-2xl\"\n      >\n        <div className=\"flex items-start justify-between border-b border-slate-800/60 px-6 py-4\">\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-2 text-xs uppercase tracking-wide text-emerald-300/80\">\n              <ShieldAlert size={14} /> Consent Playground\n            </div>\n            <div className=\"text-lg font-semibold text-white\">\n              Review & control ethical AI memory\n            </div>\n            <div className=\"text-[11px] text-gray-500\">\n              Pending {pendingCount} · Approved {approvedCount} · Revoked {revokedCount}\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={handleExport}\n              disabled={exporting}\n              className=\"flex items-center gap-2 rounded-xl border border-slate-700/60 bg-slate-900/70 px-3 py-2 text-xs text-gray-200 hover:bg-slate-900/90 disabled:opacity-50\"\n            >\n              <Download size={14} className={exporting ? 'animate-pulse' : ''} /> Export Ledger\n            </button>\n            <button\n              onClick={() => refresh()}\n              disabled={loading}\n              className=\"rounded-xl border border-slate-700/60 bg-slate-900/70 p-2 text-gray-300 hover:bg-slate-900/90 disabled:opacity-50\"\n              aria-label=\"Refresh consent ledger\"\n            >\n              <RefreshCw size={15} className={loading ? 'animate-spin' : ''} />\n            </button>\n            <button\n              onClick={() => close()}\n              className=\"rounded-full border border-slate-700/60 bg-slate-900/70 p-2 text-gray-300 hover:bg-slate-900/90\"\n              aria-label=\"Close consent dashboard\"\n            >\n              <X size={16} />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"flex flex-col gap-4 p-6 overflow-y-auto max-h-[75vh]\">\n          <ConsentFlowGraph\n            records={records}\n            onApprove={approve}\n            onRevoke={revoke}\n            loading={loading}\n          />\n          <div className=\"grid gap-3 sm:grid-cols-[minmax(0,1fr),auto]\">\n            <div className=\"flex flex-wrap items-center gap-2 text-xs text-gray-400\">\n              <Filter size={14} />\n              <select\n                value={filter.type ?? 'all'}\n                onChange={event =>\n                  void setFilter({ type: event.target.value as ConsentActionType | 'all' })\n                }\n                className=\"rounded-lg border border-slate-700/60 bg-slate-900/70 px-2 py-1 text-gray-200\"\n              >\n                {CONSENT_ACTION_OPTIONS.map(option => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n              <select\n                value={filter.status ?? 'all'}\n                onChange={event =>\n                  void setFilter({\n                    status: event.target.value as 'all' | 'pending' | 'approved' | 'revoked',\n                  })\n                }\n                className=\"rounded-lg border border-slate-700/60 bg-slate-900/70 px-2 py-1 text-gray-200\"\n              >\n                {CONSENT_STATUS_OPTIONS.map(option => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"rounded-xl border border-red-500/50 bg-red-500/10 px-4 py-2 text-xs text-red-200\">\n              {error}\n            </div>\n          )}\n\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12 text-sm text-gray-400\">\n              Loading consent ledger…\n            </div>\n          ) : records.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center gap-2 py-16 text-center text-sm text-gray-500\">\n              <ShieldCheck size={32} className=\"text-emerald-400\" />\n              <div>No consent records yet. Run agent actions to populate the ledger.</div>\n            </div>\n          ) : (\n            <div className=\"grid gap-3\">{records.map(renderRecord)}</div>\n          )}\n        </div>\n      </motion.div>\n\n      <ConsentVaultPanel />\n    </div>\n  );\n}\n"],"names":["ConsentVaultPanel","snapshot","setSnapshot","useState","loading","setLoading","error","setError","fetchSnapshot","response","ipc","err","useEffect","handleExport","blob","url","anchor","jsxs","jsx","ShieldCheck","RefreshCw","Download","entry","metadata","risk","target","motion","CONSENT_ACTION_LABELS","CONSENT_ACTION_OPTIONS","CONSENT_STATUS_OPTIONS","LANE_X","NODE_Y_START","NODE_Y_GAP","APPROVE_THRESHOLD","REVOKE_THRESHOLD","statusClasses","renderRiskIcon","AlertTriangle","ShieldAlert","ConsentNode","data","label","description","status","nodeTypes","resolveStatus","record","buildNodes","records","grouped","index","ConsentFlowGraph","onApprove","onRevoke","nodes","setNodes","onNodesChange","useNodesState","edges","useMemo","moveNodeToLane","nodeId","y","current","node","handleNodeDragStop","_event","x","ReactFlow","Background","Controls","statusLabel","riskIcon","ConsentDashboard","visible","filter","close","refresh","setFilter","approve","revoke","useConsentOverlayStore","exporting","setExporting","interval","pendingCount","revokedCount","approvedCount","json","renderRecord","distance","formatDistanceToNow","Fragment","X","Filter","event","option"],"mappings":"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"}