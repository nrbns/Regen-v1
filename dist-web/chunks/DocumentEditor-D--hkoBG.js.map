{"version":3,"file":"DocumentEditor-D--hkoBG.js","sources":["../../src/components/doc-editor/ConsentModal.tsx","../../src/components/doc-editor/DocumentEditor.tsx","../../src/routes/DocumentEditor.tsx"],"sourcesContent":["/**\r\n * Consent Modal for Cloud LLM Usage\r\n * Required before sending documents to cloud APIs\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { AlertTriangle, Lock, X } from 'lucide-react';\r\n\r\ninterface ConsentModalProps {\r\n  isOpen: boolean;\r\n  onAccept: () => void;\r\n  onReject: () => void;\r\n  fileName: string;\r\n}\r\n\r\nexport function ConsentModal({ isOpen, onAccept, onReject, fileName }: ConsentModalProps) {\r\n  const [understood, setUnderstood] = useState(false);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"bg-slate-900 border border-slate-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl\">\r\n        <div className=\"flex items-start gap-3 mb-4\">\r\n          <div className=\"rounded-full bg-yellow-500/20 p-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-yellow-400\" />\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <h2 className=\"text-lg font-semibold text-white mb-1\">Cloud Processing Consent</h2>\r\n            <p className=\"text-sm text-slate-400\">\r\n              You're about to process <span className=\"font-medium text-slate-300\">{fileName}</span> using a cloud AI service.\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onReject}\r\n            className=\"text-slate-400 hover:text-slate-300 transition-colors\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-3 mb-6\">\r\n          <div className=\"bg-slate-800/50 rounded-lg p-4 space-y-2\">\r\n            <div className=\"flex items-start gap-2\">\r\n              <Lock className=\"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0\" />\r\n              <div className=\"text-sm text-slate-300\">\r\n                <p className=\"font-medium mb-1\">What this means:</p>\r\n                <ul className=\"list-disc list-inside space-y-1 text-slate-400\">\r\n                  <li>Your document will be sent to an external AI service (OpenAI/Anthropic)</li>\r\n                  <li>Files are encrypted during transmission</li>\r\n                  <li>Files are automatically deleted after processing</li>\r\n                  <li>No data is stored permanently by the service</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-red-500/10 border border-red-500/20 rounded-lg p-3\">\r\n            <p className=\"text-xs text-red-300\">\r\n              <strong>Warning:</strong> Do not upload sensitive or confidential documents if you're concerned about privacy. \r\n              Use local processing (Ollama) for maximum privacy.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"consent-understood\"\r\n            checked={understood}\r\n            onChange={(e) => setUnderstood(e.target.checked)}\r\n            className=\"w-4 h-4 rounded border-slate-700 bg-slate-800\"\r\n          />\r\n          <label htmlFor=\"consent-understood\" className=\"text-sm text-slate-300 cursor-pointer\">\r\n            I understand and consent to cloud processing of this document\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={onReject}\r\n            className=\"flex-1 px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-white font-medium transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={onAccept}\r\n            disabled={!understood}\r\n            className=\"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 disabled:cursor-not-allowed rounded-lg text-white font-medium transition-colors\"\r\n          >\r\n            Accept & Continue\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","/**\r\n * Document Auto-Edit Component\r\n * Main UI for uploading, editing, and previewing documents\r\n */\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { Upload, FileText, Download, Eye, Loader2, CheckCircle2, AlertCircle } from 'lucide-react';\r\nimport { toast } from '../../utils/toast';\r\nimport { ConsentModal } from './ConsentModal';\r\nimport type { EditTask, EditResult } from '../../types/doc-editor';\r\n\r\n\r\nexport function DocumentEditor() {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [task, setTask] = useState<EditTask>('rewrite');\r\n\r\n  // Listen for command palette commands\r\n  useEffect(() => {\r\n    const handleDocCommand = (e: CustomEvent) => {\r\n      if (e.detail?.task) {\r\n        setTask(e.detail.task as EditTask);\r\n        toast.info(`Task set to: ${e.detail.task}`);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('doc-command', handleDocCommand as EventListener);\r\n    return () => {\r\n      window.removeEventListener('doc-command', handleDocCommand as EventListener);\r\n    };\r\n  }, []);\r\n  const [style, setStyle] = useState<string>('preserve');\r\n  const [language, setLanguage] = useState<string>('en');\r\n  const [cloudLLM, setCloudLLM] = useState(false);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [result, setResult] = useState<EditResult | null>(null);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [showConsentModal, setShowConsentModal] = useState(false);\r\n\r\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedFile = e.target.files?.[0];\r\n    if (selectedFile) {\r\n      // Validate file type\r\n      const validTypes = [\r\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document', // .docx\r\n        'application/pdf',\r\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xlsx\r\n        'text/plain',\r\n        'text/markdown',\r\n      ];\r\n      \r\n      if (!validTypes.includes(selectedFile.type) && !selectedFile.name.match(/\\.(docx|pdf|xlsx|txt|md)$/i)) {\r\n        toast.error('Unsupported file type. Please upload DOCX, PDF, XLSX, TXT, or MD files.');\r\n        return;\r\n      }\r\n\r\n      if (selectedFile.size > 100 * 1024 * 1024) {\r\n        toast.error('File size must be less than 100MB');\r\n        return;\r\n      }\r\n\r\n      setFile(selectedFile);\r\n      setResult(null);\r\n    }\r\n  }, []);\r\n\r\n  const handleEdit = useCallback(async () => {\r\n    if (!file) {\r\n      toast.error('Please select a file first');\r\n      return;\r\n    }\r\n\r\n    // Show consent modal if cloud LLM is selected\r\n    if (cloudLLM) {\r\n      setShowConsentModal(true);\r\n      return;\r\n    }\r\n\r\n    await processDocument();\r\n  }, [file, task, style, language, cloudLLM]);\r\n\r\n  const processDocument = useCallback(async () => {\r\n    if (!file) return;\r\n\r\n    setProcessing(true);\r\n    setResult(null);\r\n    setShowConsentModal(false);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('task', task);\r\n      formData.append('style', style);\r\n      formData.append('language', language);\r\n      formData.append('cloudLLM', cloudLLM.toString());\r\n      formData.append('preserveFormatting', 'true');\r\n\r\n      const response = await fetch('/api/doc/edit', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Document processing failed');\r\n      }\r\n\r\n      const editResult = await response.json();\r\n      setResult(editResult);\r\n      toast.success('Document processed successfully!');\r\n    } catch (error) {\r\n      console.error('[DocumentEditor] Edit failed:', error);\r\n      toast.error(error instanceof Error ? error.message : 'Failed to process document');\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  }, [file, task, style, language, cloudLLM]);\r\n\r\n  const handleConsentAccept = useCallback(() => {\r\n    setShowConsentModal(false);\r\n    processDocument();\r\n  }, [processDocument]);\r\n\r\n  const handleConsentReject = useCallback(() => {\r\n    setShowConsentModal(false);\r\n    setCloudLLM(false);\r\n    toast.info('Switched to local processing. Processing may be slower.');\r\n  }, []);\r\n\r\n  const handleDownload = useCallback(async () => {\r\n    if (!result) return;\r\n\r\n    try {\r\n      const response = await fetch(result.downloadUrl);\r\n      if (!response.ok) throw new Error('Download failed');\r\n\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `edited_${result.originalName}`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n\r\n      toast.success('File downloaded!');\r\n    } catch {\r\n      toast.error('Failed to download file');\r\n    }\r\n  }, [result]);\r\n\r\n  const confidenceColors = {\r\n    high: 'text-green-400',\r\n    medium: 'text-yellow-400',\r\n    low: 'text-red-400',\r\n  };\r\n\r\n  const confidenceIcons = {\r\n    high: CheckCircle2,\r\n    medium: AlertCircle,\r\n    low: AlertCircle,\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-slate-950 text-white\">\r\n      {/* Header */}\r\n      <div className=\"border-b border-slate-800 p-4\">\r\n        <h1 className=\"text-xl font-semibold\">Document Auto-Edit</h1>\r\n        <p className=\"text-sm text-slate-400 mt-1\">\r\n          AI-powered document editing: rewrite, grammar, summarize, translate, and more\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-auto p-6\">\r\n        <div className=\"max-w-4xl mx-auto space-y-6\">\r\n          {/* File Upload */}\r\n          <div className=\"border border-slate-800 rounded-lg p-6 bg-slate-900/50\">\r\n            <label className=\"block text-sm font-medium mb-2\">Upload Document</label>\r\n            <div className=\"flex items-center gap-4\">\r\n              <label className=\"flex-1 cursor-pointer\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\".docx,.pdf,.xlsx,.txt,.md\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                />\r\n                <div className=\"border-2 border-dashed border-slate-700 rounded-lg p-8 text-center hover:border-slate-600 transition-colors\">\r\n                  {file ? (\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <FileText className=\"h-8 w-8 text-blue-400\" />\r\n                      <div className=\"text-left\">\r\n                        <p className=\"font-medium\">{file.name}</p>\r\n                        <p className=\"text-sm text-slate-400\">\r\n                          {(file.size / 1024).toFixed(1)} KB\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div>\r\n                      <Upload className=\"h-12 w-12 mx-auto mb-2 text-slate-500\" />\r\n                      <p className=\"text-slate-400\">Click to upload or drag and drop</p>\r\n                      <p className=\"text-xs text-slate-500 mt-1\">\r\n                        DOCX, PDF, XLSX, TXT, MD (max 100MB)\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Edit Options */}\r\n          {file && (\r\n            <div className=\"border border-slate-800 rounded-lg p-6 bg-slate-900/50 space-y-4\">\r\n              <h2 className=\"text-lg font-semibold\">Edit Options</h2>\r\n\r\n              {/* Task Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Edit Task</label>\r\n                <select\r\n                  value={task}\r\n                  onChange={(e) => setTask(e.target.value as EditTask)}\r\n                  className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white\"\r\n                >\r\n                  <option value=\"rewrite\">Rewrite</option>\r\n                  <option value=\"grammar\">Fix Grammar</option>\r\n                  <option value=\"summarize\">Summarize</option>\r\n                  <option value=\"expand\">Expand</option>\r\n                  <option value=\"translate\">Translate</option>\r\n                  <option value=\"formal\">Make Formal</option>\r\n                  <option value=\"casual\">Make Casual</option>\r\n                  <option value=\"concise\">Make Concise</option>\r\n                  <option value=\"bulletize\">Convert to Bullets</option>\r\n                  <option value=\"normalize\">Normalize (Excel)</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Style (for rewrite) */}\r\n              {task === 'rewrite' && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Style</label>\r\n                  <select\r\n                    value={style}\r\n                    onChange={(e) => setStyle(e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white\"\r\n                  >\r\n                    <option value=\"preserve\">Preserve Original</option>\r\n                    <option value=\"formal\">Formal</option>\r\n                    <option value=\"casual\">Casual</option>\r\n                    <option value=\"concise\">Concise</option>\r\n                    <option value=\"professional\">Professional</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {/* Language (for translate) */}\r\n              {task === 'translate' && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Target Language</label>\r\n                  <select\r\n                    value={language}\r\n                    onChange={(e) => setLanguage(e.target.value)}\r\n                    className=\"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white\"\r\n                  >\r\n                    <option value=\"en\">English</option>\r\n                    <option value=\"hi\">Hindi</option>\r\n                    <option value=\"es\">Spanish</option>\r\n                    <option value=\"fr\">French</option>\r\n                    <option value=\"de\">German</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {/* Cloud LLM Toggle */}\r\n              <div className=\"flex items-center gap-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"cloudLLM\"\r\n                  checked={cloudLLM}\r\n                  onChange={(e) => setCloudLLM(e.target.checked)}\r\n                  className=\"w-4 h-4 rounded border-slate-700 bg-slate-800\"\r\n                />\r\n                <label htmlFor=\"cloudLLM\" className=\"text-sm\">\r\n                  Use Cloud LLM (requires consent - faster, but data sent to external API)\r\n                </label>\r\n              </div>\r\n\r\n              {/* Process Button */}\r\n              <button\r\n                onClick={handleEdit}\r\n                disabled={processing}\r\n                className=\"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 disabled:cursor-not-allowed rounded-lg font-medium flex items-center justify-center gap-2 transition-colors\"\r\n              >\r\n                {processing ? (\r\n                  <>\r\n                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    Processing...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <FileText className=\"h-5 w-5\" />\r\n                    Process Document\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Results */}\r\n          {result && (\r\n            <div className=\"border border-slate-800 rounded-lg p-6 bg-slate-900/50 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-lg font-semibold\">Results</h2>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <button\r\n                    onClick={() => setShowPreview(!showPreview)}\r\n                    className=\"px-3 py-1.5 text-sm bg-slate-800 hover:bg-slate-700 rounded-lg flex items-center gap-2\"\r\n                  >\r\n                    <Eye className=\"h-4 w-4\" />\r\n                    {showPreview ? 'Hide' : 'Show'} Preview\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDownload}\r\n                    className=\"px-3 py-1.5 text-sm bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-2\"\r\n                  >\r\n                    <Download className=\"h-4 w-4\" />\r\n                    Download\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Confidence Badge */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-sm text-slate-400\">Confidence:</span>\r\n                {(() => {\r\n                  const Icon = confidenceIcons[result.confidence];\r\n                  return (\r\n                    <div className={`flex items-center gap-1 ${confidenceColors[result.confidence]}`}>\r\n                      <Icon className=\"h-4 w-4\" />\r\n                      <span className=\"text-sm font-medium capitalize\">{result.confidence}</span>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n\r\n              {/* Metadata */}\r\n              {result.metadata && (\r\n                <div className=\"text-sm text-slate-400 space-y-1\">\r\n                  {result.metadata.model && <p>Model: {result.metadata.model}</p>}\r\n                  {result.metadata.processingTime && (\r\n                    <p>Processing Time: {(result.metadata.processingTime / 1000).toFixed(1)}s</p>\r\n                  )}\r\n                  {result.metadata.wordCount && <p>Word Count: {result.metadata.wordCount}</p>}\r\n                </div>\r\n              )}\r\n\r\n              {/* Changes Summary */}\r\n              <div>\r\n                <p className=\"text-sm text-slate-400 mb-2\">\r\n                  Changes: {result.changes.length} modification(s)\r\n                </p>\r\n                {showPreview && result.changes.length > 0 && (\r\n                  <div className=\"mt-4 space-y-2 max-h-96 overflow-auto\">\r\n                    {result.changes.slice(0, 10).map((change, idx) => (\r\n                      <div\r\n                        key={idx}\r\n                        className=\"p-3 bg-slate-800 rounded-lg text-sm space-y-1\"\r\n                      >\r\n                        {change.original && (\r\n                          <div>\r\n                            <span className=\"text-red-400\">- </span>\r\n                            <span className=\"text-slate-300 line-through\">{change.original}</span>\r\n                          </div>\r\n                        )}\r\n                        {change.edited && (\r\n                          <div>\r\n                            <span className=\"text-green-400\">+ </span>\r\n                            <span className=\"text-slate-200\">{change.edited}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                    {result.changes.length > 10 && (\r\n                      <p className=\"text-xs text-slate-500 text-center\">\r\n                        ... and {result.changes.length - 10} more changes\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Consent Modal */}\r\n      <ConsentModal\r\n        isOpen={showConsentModal}\r\n        onAccept={handleConsentAccept}\r\n        onReject={handleConsentReject}\r\n        fileName={file?.name || 'document'}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n","/**\r\n * Document Editor Route\r\n */\r\n\r\nimport { DocumentEditor } from '../components/doc-editor/DocumentEditor';\r\n\r\nexport default function DocumentEditorPage() {\r\n  return <DocumentEditor />;\r\n}\r\n\r\n"],"names":["ConsentModal","isOpen","onAccept","onReject","fileName","understood","setUnderstood","useState","jsxs","jsx","AlertTriangle","X","Lock","e","DocumentEditor","file","setFile","task","setTask","useEffect","handleDocCommand","toast","style","setStyle","language","setLanguage","cloudLLM","setCloudLLM","processing","setProcessing","result","setResult","showPreview","setShowPreview","showConsentModal","setShowConsentModal","handleFileSelect","useCallback","selectedFile","handleEdit","processDocument","formData","response","error","editResult","handleConsentAccept","handleConsentReject","handleDownload","blob","url","a","confidenceColors","confidenceIcons","CheckCircle2","AlertCircle","FileText","Upload","Fragment","Loader2","Eye","Download","Icon","change","idx","DocumentEditorPage"],"mappings":"wVAeO,SAASA,EAAa,CAAE,OAAAC,EAAQ,SAAAC,EAAU,SAAAC,EAAU,SAAAC,GAA+B,CACxF,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAS,EAAK,EAElD,OAAKN,QAGF,MAAA,CAAI,UAAU,mFACb,SAAAO,EAAAA,KAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oCACb,eAACC,EAAA,CAAc,UAAU,0BAA0B,CAAA,CACrD,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,2BAAwB,EAC9ED,EAAAA,KAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,CAAA,2BACZC,EAAAA,IAAC,OAAA,CAAK,UAAU,6BAA8B,SAAAL,EAAS,EAAO,4BAAA,CAAA,CACxF,CAAA,EACF,EACAK,EAAAA,IAAC,SAAA,CACC,QAASN,EACT,UAAU,wDAEV,SAAAM,EAAAA,IAACE,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAH,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAACG,EAAA,CAAK,UAAU,4CAAA,CAA6C,EAC7DJ,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,mBAAmB,SAAA,mBAAgB,EAChDD,EAAAA,KAAC,KAAA,CAAG,UAAU,iDACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,yEAAA,CAAuE,EAC3EA,EAAAA,IAAC,MAAG,SAAA,yCAAA,CAAuC,EAC3CA,EAAAA,IAAC,MAAG,SAAA,kDAAA,CAAgD,EACpDA,EAAAA,IAAC,MAAG,SAAA,8CAAA,CAA4C,CAAA,CAAA,CAClD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,wDACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,uBACX,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAA,UAAA,CAAQ,EAAS,0IAAA,CAAA,CAE3B,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,GAAG,qBACH,QAASJ,EACT,SAAWQ,GAAMP,EAAcO,EAAE,OAAO,OAAO,EAC/C,UAAU,+CAAA,CAAA,QAEX,QAAA,CAAM,QAAQ,qBAAqB,UAAU,wCAAwC,SAAA,+DAAA,CAEtF,CAAA,EACF,EAEAL,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAASN,EACT,UAAU,uGACX,SAAA,QAAA,CAAA,EAGDM,EAAAA,IAAC,SAAA,CACC,QAASP,EACT,SAAU,CAACG,EACX,UAAU,uJACX,SAAA,mBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EA5EkB,IA8EtB,CCpFO,SAASS,GAAiB,CAC/B,KAAM,CAACC,EAAMC,CAAO,EAAIT,EAAAA,SAAsB,IAAI,EAC5C,CAACU,EAAMC,CAAO,EAAIX,EAAAA,SAAmB,SAAS,EAGpDY,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAoBP,GAAmB,CACvCA,EAAE,QAAQ,OACZK,EAAQL,EAAE,OAAO,IAAgB,EACjCQ,EAAM,KAAK,gBAAgBR,EAAE,OAAO,IAAI,EAAE,EAE9C,EAEA,cAAO,iBAAiB,cAAeO,CAAiC,EACjE,IAAM,CACX,OAAO,oBAAoB,cAAeA,CAAiC,CAC7E,CACF,EAAG,CAAA,CAAE,EACL,KAAM,CAACE,EAAOC,CAAQ,EAAIhB,EAAAA,SAAiB,UAAU,EAC/C,CAACiB,EAAUC,CAAW,EAAIlB,EAAAA,SAAiB,IAAI,EAC/C,CAACmB,EAAUC,CAAW,EAAIpB,EAAAA,SAAS,EAAK,EACxC,CAACqB,EAAYC,CAAa,EAAItB,EAAAA,SAAS,EAAK,EAC5C,CAACuB,EAAQC,CAAS,EAAIxB,EAAAA,SAA4B,IAAI,EACtD,CAACyB,EAAaC,CAAc,EAAI1B,EAAAA,SAAS,EAAK,EAC9C,CAAC2B,EAAkBC,CAAmB,EAAI5B,EAAAA,SAAS,EAAK,EAExD6B,EAAmBC,cAAaxB,GAA2C,CAC/E,MAAMyB,EAAezB,EAAE,OAAO,QAAQ,CAAC,EACvC,GAAIyB,EAAc,CAUhB,GAAI,CARe,CACjB,0EACA,kBACA,oEACA,aACA,eAAA,EAGc,SAASA,EAAa,IAAI,GAAK,CAACA,EAAa,KAAK,MAAM,4BAA4B,EAAG,CACrGjB,EAAM,MAAM,yEAAyE,EACrF,MACF,CAEA,GAAIiB,EAAa,KAAO,IAAM,KAAO,KAAM,CACzCjB,EAAM,MAAM,mCAAmC,EAC/C,MACF,CAEAL,EAAQsB,CAAY,EACpBP,EAAU,IAAI,CAChB,CACF,EAAG,CAAA,CAAE,EAECQ,EAAaF,EAAAA,YAAY,SAAY,CACzC,GAAI,CAACtB,EAAM,CACTM,EAAM,MAAM,4BAA4B,EACxC,MACF,CAGA,GAAIK,EAAU,CACZS,EAAoB,EAAI,EACxB,MACF,CAEA,MAAMK,EAAA,CACR,EAAG,CAACzB,EAAME,EAAMK,EAAOE,EAAUE,CAAQ,CAAC,EAEpCc,EAAkBH,EAAAA,YAAY,SAAY,CAC9C,GAAKtB,EAEL,CAAAc,EAAc,EAAI,EAClBE,EAAU,IAAI,EACdI,EAAoB,EAAK,EAEzB,GAAI,CACF,MAAMM,EAAW,IAAI,SACrBA,EAAS,OAAO,OAAQ1B,CAAI,EAC5B0B,EAAS,OAAO,OAAQxB,CAAI,EAC5BwB,EAAS,OAAO,QAASnB,CAAK,EAC9BmB,EAAS,OAAO,WAAYjB,CAAQ,EACpCiB,EAAS,OAAO,WAAYf,EAAS,SAAA,CAAU,EAC/Ce,EAAS,OAAO,qBAAsB,MAAM,EAE5C,MAAMC,EAAW,MAAM,MAAM,gBAAiB,CAC5C,OAAQ,OACR,KAAMD,CAAA,CACP,EAED,GAAI,CAACC,EAAS,GAAI,CAChB,MAAMC,EAAQ,MAAMD,EAAS,KAAA,EAC7B,MAAM,IAAI,MAAMC,EAAM,SAAW,4BAA4B,CAC/D,CAEA,MAAMC,EAAa,MAAMF,EAAS,KAAA,EAClCX,EAAUa,CAAU,EACpBvB,EAAM,QAAQ,kCAAkC,CAClD,OAASsB,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpDtB,EAAM,MAAMsB,aAAiB,MAAQA,EAAM,QAAU,4BAA4B,CACnF,QAAA,CACEd,EAAc,EAAK,CACrB,EACF,EAAG,CAACd,EAAME,EAAMK,EAAOE,EAAUE,CAAQ,CAAC,EAEpCmB,EAAsBR,EAAAA,YAAY,IAAM,CAC5CF,EAAoB,EAAK,EACzBK,EAAA,CACF,EAAG,CAACA,CAAe,CAAC,EAEdM,EAAsBT,EAAAA,YAAY,IAAM,CAC5CF,EAAoB,EAAK,EACzBR,EAAY,EAAK,EACjBN,EAAM,KAAK,yDAAyD,CACtE,EAAG,CAAA,CAAE,EAEC0B,EAAiBV,EAAAA,YAAY,SAAY,CAC7C,GAAKP,EAEL,GAAI,CACF,MAAMY,EAAW,MAAM,MAAMZ,EAAO,WAAW,EAC/C,GAAI,CAACY,EAAS,GAAI,MAAM,IAAI,MAAM,iBAAiB,EAEnD,MAAMM,EAAO,MAAMN,EAAS,KAAA,EACtBO,EAAM,OAAO,IAAI,gBAAgBD,CAAI,EACrCE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAW,UAAUpB,EAAO,YAAY,GAC1C,SAAS,KAAK,YAAYoB,CAAC,EAC3BA,EAAE,MAAA,EACF,SAAS,KAAK,YAAYA,CAAC,EAC3B,OAAO,IAAI,gBAAgBD,CAAG,EAE9B5B,EAAM,QAAQ,kBAAkB,CAClC,MAAQ,CACNA,EAAM,MAAM,yBAAyB,CACvC,CACF,EAAG,CAACS,CAAM,CAAC,EAELqB,EAAmB,CACvB,KAAM,iBACN,OAAQ,kBACR,IAAK,cAAA,EAGDC,EAAkB,CACtB,KAAMC,EACN,OAAQC,EACR,IAAKA,CAAA,EAGP,OACE9C,EAAAA,KAAC,MAAA,CAAI,UAAU,+CAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,qBAAkB,EACxDA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,+EAAA,CAE3C,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,2BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,kBAAe,QAChE,MAAA,CAAI,UAAU,0BACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,wBACf,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,4BACP,SAAU2B,EACV,UAAU,QAAA,CAAA,EAEZ3B,EAAAA,IAAC,OAAI,UAAU,8GACZ,WACCD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC8C,EAAA,CAAS,UAAU,uBAAA,CAAwB,EAC5C/C,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAAM,EAAK,KAAK,EACtCP,EAAAA,KAAC,IAAA,CAAE,UAAU,yBACT,SAAA,EAAAO,EAAK,KAAO,MAAM,QAAQ,CAAC,EAAE,KAAA,CAAA,CACjC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,SAEC,MAAA,CACC,SAAA,CAAAN,EAAAA,IAAC+C,EAAA,CAAO,UAAU,uCAAA,CAAwC,EAC1D/C,EAAAA,IAAC,IAAA,CAAE,UAAU,iBAAiB,SAAA,mCAAgC,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,sCAAA,CAE3C,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGCM,GACCP,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,eAAY,SAGjD,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,YAAS,EAC3DD,EAAAA,KAAC,SAAA,CACC,MAAOS,EACP,SAAWJ,GAAMK,EAAQL,EAAE,OAAO,KAAiB,EACnD,UAAU,8EAEV,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,cAAW,EACnCA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,YAAS,EACnCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,YAAS,EACnCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,cAAW,EAClCA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,cAAW,EAClCA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,eAAY,EACpCA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,qBAAkB,EAC5CA,EAAAA,IAAC,SAAA,CAAO,MAAM,YAAY,SAAA,mBAAA,CAAiB,CAAA,CAAA,CAAA,CAC7C,EACF,EAGCQ,IAAS,WACRT,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,QAAK,EACvDD,EAAAA,KAAC,SAAA,CACC,MAAOc,EACP,SAAWT,GAAMU,EAASV,EAAE,OAAO,KAAK,EACxC,UAAU,8EAEV,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CAAO,MAAM,WAAW,SAAA,oBAAiB,EAC1CA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,UAAO,EAC/BA,EAAAA,IAAC,SAAA,CAAO,MAAM,eAAe,SAAA,cAAA,CAAY,CAAA,CAAA,CAAA,CAC3C,EACF,EAIDQ,IAAS,aACRT,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,iCAAiC,SAAA,kBAAe,EACjED,EAAAA,KAAC,SAAA,CACC,MAAOgB,EACP,SAAWX,GAAMY,EAAYZ,EAAE,OAAO,KAAK,EAC3C,UAAU,8EAEV,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAK,EACxBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,UAAO,EAC1BA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,SAAM,EACzBA,EAAAA,IAAC,SAAA,CAAO,MAAM,KAAK,SAAA,QAAA,CAAM,CAAA,CAAA,CAAA,CAC3B,EACF,EAIFD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,GAAG,WACH,QAASiB,EACT,SAAWb,GAAMc,EAAYd,EAAE,OAAO,OAAO,EAC7C,UAAU,+CAAA,CAAA,QAEX,QAAA,CAAM,QAAQ,WAAW,UAAU,UAAU,SAAA,0EAAA,CAE9C,CAAA,EACF,EAGAJ,EAAAA,IAAC,SAAA,CACC,QAAS8B,EACT,SAAUX,EACV,UAAU,mLAET,WACCpB,EAAAA,KAAAiD,EAAAA,SAAA,CACE,SAAA,CAAAhD,EAAAA,IAACiD,EAAA,CAAQ,UAAU,sBAAA,CAAuB,EAAE,eAAA,CAAA,CAE9C,EAEAlD,EAAAA,KAAAiD,EAAAA,SAAA,CACE,SAAA,CAAAhD,EAAAA,IAAC8C,EAAA,CAAS,UAAU,SAAA,CAAU,EAAE,kBAAA,CAAA,CAElC,CAAA,CAAA,CAEJ,EACF,EAIDzB,GACCtB,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,UAAO,EAC7CD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMyB,EAAe,CAACD,CAAW,EAC1C,UAAU,yFAEV,SAAA,CAAAvB,EAAAA,IAACkD,EAAA,CAAI,UAAU,SAAA,CAAU,EACxB3B,EAAc,OAAS,OAAO,UAAA,CAAA,CAAA,EAEjCxB,EAAAA,KAAC,SAAA,CACC,QAASuC,EACT,UAAU,yFAEV,SAAA,CAAAtC,EAAAA,IAACmD,EAAA,CAAS,UAAU,SAAA,CAAU,EAAE,UAAA,CAAA,CAAA,CAElC,CAAA,CACF,CAAA,EACF,EAGApD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAAyB,SAAA,cAAW,GAClD,IAAM,CACN,MAAMoD,EAAOT,EAAgBtB,EAAO,UAAU,EAC9C,OACEtB,OAAC,OAAI,UAAW,2BAA2B2C,EAAiBrB,EAAO,UAAU,CAAC,GAC5E,SAAA,CAAArB,EAAAA,IAACoD,EAAA,CAAK,UAAU,SAAA,CAAU,EAC1BpD,EAAAA,IAAC,OAAA,CAAK,UAAU,iCAAkC,WAAO,UAAA,CAAW,CAAA,EACtE,CAEJ,GAAA,CAAG,EACL,EAGCqB,EAAO,UACNtB,OAAC,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAAsB,EAAO,SAAS,OAAStB,EAAAA,KAAC,IAAA,CAAE,SAAA,CAAA,UAAQsB,EAAO,SAAS,KAAA,EAAM,EAC1DA,EAAO,SAAS,gBACftB,EAAAA,KAAC,IAAA,CAAE,SAAA,CAAA,qBAAmBsB,EAAO,SAAS,eAAiB,KAAM,QAAQ,CAAC,EAAE,GAAA,EAAC,EAE1EA,EAAO,SAAS,WAAatB,EAAAA,KAAC,IAAA,CAAE,SAAA,CAAA,eAAasB,EAAO,SAAS,SAAA,CAAA,CAAU,CAAA,EAC1E,SAID,MAAA,CACC,SAAA,CAAAtB,EAAAA,KAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,CAAA,YAC/BsB,EAAO,QAAQ,OAAO,kBAAA,EAClC,EACCE,GAAeF,EAAO,QAAQ,OAAS,GACtCtB,OAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAAsB,EAAO,QAAQ,MAAM,EAAG,EAAE,EAAE,IAAI,CAACgC,EAAQC,IACxCvD,EAAAA,KAAC,MAAA,CAEC,UAAU,gDAET,SAAA,CAAAsD,EAAO,iBACL,MAAA,CACC,SAAA,CAAArD,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,KAAE,EACjCA,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA+B,WAAO,QAAA,CAAS,CAAA,EACjE,EAEDqD,EAAO,QACNtD,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,KAAE,EACnCA,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAkB,WAAO,MAAA,CAAO,CAAA,CAAA,CAClD,CAAA,CAAA,EAbGsD,CAAA,CAgBR,EACAjC,EAAO,QAAQ,OAAS,IACvBtB,EAAAA,KAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,CAAA,WACvCsB,EAAO,QAAQ,OAAS,GAAG,eAAA,CAAA,CACtC,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAGArB,EAAAA,IAACT,EAAA,CACC,OAAQkC,EACR,SAAUW,EACV,SAAUC,EACV,SAAU/B,GAAM,MAAQ,UAAA,CAAA,CAC1B,EACF,CAEJ,CC9YA,SAAwBiD,GAAqB,CAC3C,aAAQlD,EAAA,EAAe,CACzB"}