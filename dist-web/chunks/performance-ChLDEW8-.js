var a=Object.defineProperty,c=(i,e,t)=>e in i?a(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,n=(i,e,t)=>c(i,typeof e!="symbol"?e+"":e,t);class m{constructor(){n(this,"startTime"),n(this,"metrics",{}),n(this,"observers",[]),this.startTime=performance.now(),this.init()}init(){typeof window<"u"&&"requestIdleCallback"in window&&requestIdleCallback(()=>{this.metrics.timeToFirstPaint=performance.now()-this.startTime,this.logMetric("timeToFirstPaint",this.metrics.timeToFirstPaint)}),document.readyState==="complete"?this.measureTTI():window.addEventListener("load",()=>this.measureTTI()),"memory"in performance&&this.monitorMemory(),this.trackNavigationTiming()}measureTTI(){if(document.readyState==="complete"){const e=performance.now()-this.startTime;this.metrics.timeToLoad=e,this.logMetric("timeToLoad",e),typeof window<"u"&&"requestIdleCallback"in window&&requestIdleCallback(()=>{this.metrics.timeToInteractive=performance.now()-this.startTime,this.logMetric("timeToInteractive",this.metrics.timeToInteractive)})}}monitorMemory(){const e=performance.memory;e&&(this.metrics.memoryUsage=e.usedJSHeapSize,setInterval(()=>{const t=e.usedJSHeapSize;if(t>500*1024*1024){const o=(t/1024/1024).toFixed(2);console.warn(`[Perf] High memory usage: ${o} MB`)}},6e4))}trackNavigationTiming(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(t=>{for(const o of t.getEntries())if(o.entryType==="navigation"){const r=o;console.log("[Perf] Navigation timing:",{domContentLoaded:r.domContentLoadedEventEnd-r.domContentLoadedEventStart,load:r.loadEventEnd-r.loadEventStart,total:r.loadEventEnd-r.fetchStart})}});e.observe({entryTypes:["navigation"]}),this.observers.push(e)}catch{}}logMetric(e,t){if(console.log(`[Perf] ${e}: ${t.toFixed(2)}ms`),typeof window<"u"&&window.ipc)try{window.ipc.telemetry?.trackPerf?.(e,Math.round(t))}catch{}}getMetrics(){return{...this.metrics}}cleanup(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}}let s=null;function d(){return s||(s=new m),s}export{d as initPerformanceMonitoring};
//# sourceMappingURL=performance-ChLDEW8-.js.map
