import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Brain, ChevronDown, ChevronUp, TrendingUp, TrendingDown, AlertCircle } from 'lucide-react';
export default function AISignalPanel({ symbol, signal, onApplySignal, onGenerateSignal, isLoading = false, }) {
    const [isExpanded, setIsExpanded] = useState(false);
    const [showExplainability, setShowExplainability] = useState(false);
    const confidenceColor = (signal?.confidence ?? 0) >= 70 ? 'text-green-400' : (signal?.confidence ?? 0) >= 50 ? 'text-yellow-400' : 'text-red-400';
    return (_jsxs("div", { className: "bg-neutral-800 rounded-lg border border-neutral-700", children: [_jsxs("div", { className: "p-4 border-b border-neutral-700", children: [_jsxs("div", { className: "flex items-center justify-between mb-3", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Brain, { className: "w-5 h-5 text-indigo-400" }), _jsx("h3", { className: "font-semibold text-sm", children: "AI Signal" })] }), _jsx("button", { onClick: () => setIsExpanded(!isExpanded), className: "text-neutral-400 hover:text-neutral-200 transition-colors", children: isExpanded ? _jsx(ChevronUp, { className: "w-4 h-4" }) : _jsx(ChevronDown, { className: "w-4 h-4" }) })] }), !signal && (_jsx("button", { onClick: () => onGenerateSignal?.(symbol), disabled: isLoading, className: "w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-neutral-700 disabled:text-neutral-500 text-white py-2 rounded text-sm font-semibold transition-colors", children: isLoading ? 'Generating...' : 'Generate Signal' })), signal && (_jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-2", children: [signal.action === 'buy' ? (_jsx(TrendingUp, { className: "w-5 h-5 text-green-400" })) : signal.action === 'sell' ? (_jsx(TrendingDown, { className: "w-5 h-5 text-red-400" })) : (_jsx(AlertCircle, { className: "w-5 h-5 text-yellow-400" })), _jsxs("span", { className: "font-semibold text-sm", children: [signal.action.toUpperCase(), " ", signal.symbol] })] }), _jsxs("div", { className: `font-bold ${confidenceColor}`, children: [signal.confidence, "%"] })] }), _jsxs("div", { className: "text-xs text-neutral-300 space-y-1", children: [_jsxs("div", { children: ["Entry: ", _jsxs("span", { className: "font-semibold", children: ["$", signal.entryPrice.toFixed(2)] })] }), signal.stopLoss && (_jsxs("div", { children: ["Stop: ", _jsxs("span", { className: "font-semibold text-red-400", children: ["$", signal.stopLoss.toFixed(2)] })] })), signal.takeProfit && (_jsxs("div", { children: ["Target: ", _jsxs("span", { className: "font-semibold text-green-400", children: ["$", signal.takeProfit.toFixed(2)] })] })), _jsxs("div", { children: ["Size: ", _jsxs("span", { className: "font-semibold", children: [signal.positionSize, " shares"] })] })] }), _jsxs("div", { className: "flex gap-2", children: [_jsx("button", { onClick: () => onApplySignal?.(signal), className: "flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded text-xs font-semibold transition-colors", children: "Apply to Order" }), _jsx("button", { onClick: () => setShowExplainability(!showExplainability), className: "flex-1 bg-neutral-700 hover:bg-neutral-600 text-white py-2 rounded text-xs font-semibold transition-colors", children: showExplainability ? 'Hide' : 'Explain' })] })] }))] }), _jsx(AnimatePresence, { children: isExpanded && signal && (_jsx(motion.div, { initial: { height: 0, opacity: 0 }, animate: { height: 'auto', opacity: 1 }, exit: { height: 0, opacity: 0 }, className: "overflow-hidden", children: _jsxs("div", { className: "p-4 space-y-4 border-t border-neutral-700", children: [_jsxs("div", { children: [_jsx("h4", { className: "text-xs font-semibold text-neutral-400 mb-2", children: "Rationale" }), _jsx("p", { className: "text-xs text-neutral-300", children: signal.rationale })] }), signal.riskMetrics && (_jsxs("div", { className: "bg-neutral-900 rounded p-3 space-y-2 text-xs", children: [_jsx("h4", { className: "text-xs font-semibold text-neutral-400 mb-2", children: "Risk Assessment" }), _jsxs("div", { className: "grid grid-cols-2 gap-2", children: [_jsxs("div", { children: [_jsx("span", { className: "text-neutral-400", children: "Max Loss:" }), _jsxs("span", { className: "text-red-400 ml-2", children: ["$", signal.riskMetrics.maxLoss.toFixed(2)] })] }), _jsxs("div", { children: [_jsx("span", { className: "text-neutral-400", children: "Max Gain:" }), _jsxs("span", { className: "text-green-400 ml-2", children: ["$", signal.riskMetrics.maxGain.toFixed(2)] })] }), _jsxs("div", { children: [_jsx("span", { className: "text-neutral-400", children: "R:R Ratio:" }), _jsxs("span", { className: "ml-2", children: [signal.riskMetrics.riskRewardRatio.toFixed(2), ":1"] })] }), _jsxs("div", { children: [_jsx("span", { className: "text-neutral-400", children: "Win Prob:" }), _jsxs("span", { className: "ml-2", children: [(signal.riskMetrics.winProbability * 100).toFixed(0), "%"] })] })] })] })), showExplainability && signal.contributingFactors && (_jsxs("div", { children: [_jsx("h4", { className: "text-xs font-semibold text-neutral-400 mb-2", children: "Contributing Factors" }), _jsx("div", { className: "space-y-2", children: signal.contributingFactors.map((factor, idx) => (_jsxs("div", { className: "bg-neutral-900 rounded p-2 text-xs", children: [_jsxs("div", { className: "flex items-center justify-between mb-1", children: [_jsx("span", { className: "font-semibold", children: factor.factor }), _jsx("span", { className: `text-xs ${factor.impact === 'positive' ? 'text-green-400' :
                                                                factor.impact === 'negative' ? 'text-red-400' : 'text-neutral-400'}`, children: factor.impact })] }), _jsx("p", { className: "text-neutral-300 text-xs", children: factor.description }), _jsx("div", { className: "mt-1", children: _jsxs("div", { className: "flex items-center justify-between text-xs text-neutral-500", children: [_jsxs("span", { children: ["Weight: ", (factor.weight * 100).toFixed(0), "%"] }), _jsxs("span", { children: ["Value: ", factor.value.toFixed(2)] })] }) })] }, idx))) })] })), _jsxs("div", { className: "text-xs text-neutral-500", children: [_jsxs("div", { children: ["Model: ", signal.modelVersion] }), _jsxs("div", { children: ["Generated: ", new Date(signal.generatedAt).toLocaleString()] }), _jsxs("div", { children: ["Expires: ", new Date(signal.expiresAt).toLocaleString()] })] })] }) })) })] }));
}
